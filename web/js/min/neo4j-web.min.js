!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).neo4j=e()}}(function(){return function o(s,u,a){function c(t,e){if(!u[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=u[t]={exports:{}};s[t][0].call(i.exports,function(e){return c(s[t][1][e]||e)},i,i.exports,o,s,u,a)}return u[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,t,r){t.exports=function(e){if(Array.isArray(e))return e}},{}],2:[function(e,t,r){t.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},{}],3:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},{}],4:[function(e,t,r){function a(e,t,r,n,i,o,s){try{var u=e[o](s),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(n,i)}t.exports=function(u){return function(){var e=this,s=arguments;return new Promise(function(t,r){var n=u.apply(e,s);function i(e){a(n,t,r,i,o,"next",e)}function o(e){a(n,t,r,i,o,"throw",e)}i(void 0)})}}},{}],5:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],6:[function(e,n,t){var o=e("./setPrototypeOf");function i(e,t,r){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?n.exports=i=function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&o(i,r.prototype),i}:n.exports=i=Reflect.construct,i.apply(null,arguments)}n.exports=i},{"./setPrototypeOf":20}],7:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},{}],8:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{}],9:[function(e,n,t){var o=e("./superPropBase");function i(e,t,r){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=i=Reflect.get:n.exports=i=function(e,t,r){var n=o(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},i(e,t,r||e)}n.exports=i},{"./superPropBase":22}],10:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],11:[function(e,t,r){var n=e("./setPrototypeOf");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},{"./setPrototypeOf":20}],12:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],13:[function(e,t,r){t.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}},{}],14:[function(e,t,r){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},{}],15:[function(e,t,r){t.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},{}],16:[function(e,t,r){t.exports=function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}},{}],17:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},{}],18:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},{}],19:[function(e,t,r){var n=e("../helpers/typeof"),i=e("./assertThisInitialized");t.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},{"../helpers/typeof":24,"./assertThisInitialized":3}],20:[function(e,r,t){function n(e,t){return r.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}r.exports=n},{}],21:[function(e,t,r){var n=e("./arrayWithHoles"),i=e("./iterableToArrayLimit"),o=e("./nonIterableRest");t.exports=function(e,t){return n(e)||i(e,t)||o()}},{"./arrayWithHoles":1,"./iterableToArrayLimit":16,"./nonIterableRest":17}],22:[function(e,t,r){var n=e("./getPrototypeOf");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},{"./getPrototypeOf":10}],23:[function(e,t,r){var n=e("./arrayWithoutHoles"),i=e("./iterableToArray"),o=e("./nonIterableSpread");t.exports=function(e){return n(e)||i(e)||o()}},{"./arrayWithoutHoles":2,"./iterableToArray":15,"./nonIterableSpread":18}],24:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(e){return n(e)}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(e)}t.exports=i},{}],25:[function(e,t,r){var n=e("./getPrototypeOf"),i=e("./setPrototypeOf"),o=e("./isNativeFunction"),s=e("./construct");function u(e){var r="function"==typeof Map?new Map:void 0;return t.exports=u=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},u(e)}t.exports=u},{"./construct":6,"./getPrototypeOf":10,"./isNativeFunction":14,"./setPrototypeOf":20}],26:[function(e,t,r){var n=function(o){"use strict";var a,e=Object.prototype,c=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function s(e,t,r,n){var i=t&&t.prototype instanceof u?t:u,o=Object.create(i.prototype),s=new x(n||[]);return o._invoke=function(o,s,u){var a=h;return function(e,t){if(a===p)throw new Error("Generator is already running");if(a===b){if("throw"===e)throw t;return T()}for(u.method=e,u.arg=t;;){var r=u.delegate;if(r){var n=k(r,u);if(n){if(n===d)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(a===h)throw a=b,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);a=p;var i=l(o,s,u);if("normal"===i.type){if(a=u.done?b:f,i.arg===d)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(a=b,u.method="throw",u.arg=i.arg)}}}(e,r,s),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var h="suspendedStart",f="suspendedYield",p="executing",b="completed",d={};function u(){}function v(){}function y(){}var _={};_[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(P([])));g&&g!==e&&c.call(g,i)&&(_=g);var w=y.prototype=u.prototype=Object.create(_);function O(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function S(a){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,i){var o=l(a[e],a,r);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"==typeof u&&c.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):Promise.resolve(u).then(function(e){s.value=e,n(s)},function(e){return t("throw",e,n,i)})}i(o.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function k(e,t){var r=e.iterator[t.method];if(r===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=a,k(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=a),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(c.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=a,e.done=!0,e};return n.next=n}}return{next:T}}function T(){return{value:a,done:!0}}return v.prototype=w.constructor=y,y.constructor=v,y[n]=v.displayName="GeneratorFunction",o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(w),e},o.awrap=function(e){return{__await:e}},O(S.prototype),S.prototype[r]=function(){return this},o.AsyncIterator=S,o.async=function(e,t,r,n){var i=new S(s(e,t,r,n));return o.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},O(w),w[n]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},o.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=a)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=a),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var s=c.call(i,"catchLoc"),u=c.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=a),d}},o}("object"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},{}],27:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":26}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./internal/Observable");r.Observable=n.Observable;var i=e("./internal/observable/ConnectableObservable");r.ConnectableObservable=i.ConnectableObservable;var o=e("./internal/operators/groupBy");r.GroupedObservable=o.GroupedObservable;var s=e("./internal/symbol/observable");r.observable=s.observable;var u=e("./internal/Subject");r.Subject=u.Subject;var a=e("./internal/BehaviorSubject");r.BehaviorSubject=a.BehaviorSubject;var c=e("./internal/ReplaySubject");r.ReplaySubject=c.ReplaySubject;var l=e("./internal/AsyncSubject");r.AsyncSubject=l.AsyncSubject;var h=e("./internal/scheduler/asap");r.asap=h.asap,r.asapScheduler=h.asapScheduler;var f=e("./internal/scheduler/async");r.async=f.async,r.asyncScheduler=f.asyncScheduler;var p=e("./internal/scheduler/queue");r.queue=p.queue,r.queueScheduler=p.queueScheduler;var b=e("./internal/scheduler/animationFrame");r.animationFrame=b.animationFrame,r.animationFrameScheduler=b.animationFrameScheduler;var d=e("./internal/scheduler/VirtualTimeScheduler");r.VirtualTimeScheduler=d.VirtualTimeScheduler,r.VirtualAction=d.VirtualAction;var v=e("./internal/Scheduler");r.Scheduler=v.Scheduler;var y=e("./internal/Subscription");r.Subscription=y.Subscription;var _=e("./internal/Subscriber");r.Subscriber=_.Subscriber;var m=e("./internal/Notification");r.Notification=m.Notification,r.NotificationKind=m.NotificationKind;var g=e("./internal/util/pipe");r.pipe=g.pipe;var w=e("./internal/util/noop");r.noop=w.noop;var O=e("./internal/util/identity");r.identity=O.identity;var S=e("./internal/util/isObservable");r.isObservable=S.isObservable;var k=e("./internal/util/ArgumentOutOfRangeError");r.ArgumentOutOfRangeError=k.ArgumentOutOfRangeError;var E=e("./internal/util/EmptyError");r.EmptyError=E.EmptyError;var C=e("./internal/util/ObjectUnsubscribedError");r.ObjectUnsubscribedError=C.ObjectUnsubscribedError;var x=e("./internal/util/UnsubscriptionError");r.UnsubscriptionError=x.UnsubscriptionError;var P=e("./internal/util/TimeoutError");r.TimeoutError=P.TimeoutError;var T=e("./internal/observable/bindCallback");r.bindCallback=T.bindCallback;var I=e("./internal/observable/bindNodeCallback");r.bindNodeCallback=I.bindNodeCallback;var R=e("./internal/observable/combineLatest");r.combineLatest=R.combineLatest;var j=e("./internal/observable/concat");r.concat=j.concat;var A=e("./internal/observable/defer");r.defer=A.defer;var N=e("./internal/observable/empty");r.empty=N.empty;var M=e("./internal/observable/forkJoin");r.forkJoin=M.forkJoin;var D=e("./internal/observable/from");r.from=D.from;var U=e("./internal/observable/fromEvent");r.fromEvent=U.fromEvent;var L=e("./internal/observable/fromEventPattern");r.fromEventPattern=L.fromEventPattern;var q=e("./internal/observable/generate");r.generate=q.generate;var F=e("./internal/observable/iif");r.iif=F.iif;var V=e("./internal/observable/interval");r.interval=V.interval;var z=e("./internal/observable/merge");r.merge=z.merge;var W=e("./internal/observable/never");r.never=W.never;var B=e("./internal/observable/of");r.of=B.of;var H=e("./internal/observable/onErrorResumeNext");r.onErrorResumeNext=H.onErrorResumeNext;var K=e("./internal/observable/pairs");r.pairs=K.pairs;var Y=e("./internal/observable/partition");r.partition=Y.partition;var G=e("./internal/observable/race");r.race=G.race;var Z=e("./internal/observable/range");r.range=Z.range;var J=e("./internal/observable/throwError");r.throwError=J.throwError;var X=e("./internal/observable/timer");r.timer=X.timer;var Q=e("./internal/observable/using");r.using=Q.using;var $=e("./internal/observable/zip");r.zip=$.zip;var ee=e("./internal/scheduled/scheduled");r.scheduled=ee.scheduled;var te=e("./internal/observable/empty");r.EMPTY=te.EMPTY;var re=e("./internal/observable/never");r.NEVER=re.NEVER;var ne=e("./internal/config");r.config=ne.config},{"./internal/AsyncSubject":29,"./internal/BehaviorSubject":30,"./internal/Notification":32,"./internal/Observable":33,"./internal/ReplaySubject":36,"./internal/Scheduler":37,"./internal/Subject":38,"./internal/Subscriber":40,"./internal/Subscription":41,"./internal/config":42,"./internal/observable/ConnectableObservable":44,"./internal/observable/bindCallback":46,"./internal/observable/bindNodeCallback":47,"./internal/observable/combineLatest":48,"./internal/observable/concat":49,"./internal/observable/defer":50,"./internal/observable/empty":51,"./internal/observable/forkJoin":52,"./internal/observable/from":53,"./internal/observable/fromEvent":55,"./internal/observable/fromEventPattern":56,"./internal/observable/generate":57,"./internal/observable/iif":58,"./internal/observable/interval":59,"./internal/observable/merge":60,"./internal/observable/never":61,"./internal/observable/of":62,"./internal/observable/onErrorResumeNext":63,"./internal/observable/pairs":64,"./internal/observable/partition":65,"./internal/observable/race":66,"./internal/observable/range":67,"./internal/observable/throwError":68,"./internal/observable/timer":69,"./internal/observable/using":70,"./internal/observable/zip":71,"./internal/operators/groupBy":107,"./internal/scheduled/scheduled":179,"./internal/scheduler/VirtualTimeScheduler":189,"./internal/scheduler/animationFrame":190,"./internal/scheduler/asap":191,"./internal/scheduler/async":192,"./internal/scheduler/queue":193,"./internal/symbol/observable":195,"./internal/util/ArgumentOutOfRangeError":197,"./internal/util/EmptyError":198,"./internal/util/ObjectUnsubscribedError":200,"./internal/util/TimeoutError":201,"./internal/util/UnsubscriptionError":202,"./internal/util/identity":205,"./internal/util/isObservable":214,"./internal/util/noop":217,"./internal/util/pipe":219}],29:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Subject"),u=e("./Subscription"),a=(o=s.Subject,i(c,o),c.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),u.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),u.Subscription.EMPTY):o.prototype._subscribe.call(this,e)},c.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},c.prototype.error=function(e){this.hasCompleted||o.prototype.error.call(this,e)},c.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&o.prototype.next.call(this,this.value),o.prototype.complete.call(this)},c);function c(){var e=null!==o&&o.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}r.AsyncSubject=a},{"./Subject":38,"./Subscription":41}],30:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Subject"),u=e("./util/ObjectUnsubscribedError"),a=(o=s.Subject,i(c,o),Object.defineProperty(c.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),c.prototype._subscribe=function(e){var t=o.prototype._subscribe.call(this,e);return t&&!t.closed&&e.next(this._value),t},c.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new u.ObjectUnsubscribedError;return this._value},c.prototype.next=function(e){o.prototype.next.call(this,this._value=e)},c);function c(e){var t=o.call(this)||this;return t._value=e,t}r.BehaviorSubject=a},{"./Subject":38,"./util/ObjectUnsubscribedError":200}],31:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Subscriber"),u=(o=s.Subscriber,i(a,o),a.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},a.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},a.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},a);function a(e,t,r){var n=o.call(this)||this;return n.parent=e,n.outerValue=t,n.outerIndex=r,n.index=0,n}r.InnerSubscriber=u},{"./Subscriber":40}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./observable/empty"),o=e("./observable/of"),s=e("./observable/throwError");(n=r.NotificationKind||(r.NotificationKind={})).NEXT="N",n.ERROR="E",n.COMPLETE="C";var u=(a.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},a.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},a.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},a.prototype.toObservable=function(){switch(this.kind){case"N":return o.of(this.value);case"E":return s.throwError(this.error);case"C":return i.empty()}throw new Error("unexpected notification kind value")},a.createNext=function(e){return void 0!==e?new a("N",e):a.undefinedValueNotification},a.createError=function(e){return new a("E",void 0,e)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a);function a(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}r.Notification=u},{"./observable/empty":51,"./observable/of":62,"./observable/throwError":68}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./util/canReportError"),o=e("./util/toSubscriber"),i=e("./symbol/observable"),s=e("./util/pipe"),u=e("./config"),a=(c.prototype.lift=function(e){var t=new c;return t.source=this,t.operator=e,t},c.prototype.subscribe=function(e,t,r){var n=this.operator,i=o.toSubscriber(e,t,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||u.config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),u.config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},c.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),n.canReportError(t)?t.error(e):console.warn(e)}},c.prototype.forEach=function(n,e){var i=this;return new(e=l(e))(function(e,t){var r;r=i.subscribe(function(e){try{n(e)}catch(e){t(e),r&&r.unsubscribe()}},t,e)})},c.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},c.prototype[i.observable]=function(){return this},c.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s.pipeFromArray(e)(this)},c.prototype.toPromise=function(e){var n=this;return new(e=l(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},c.create=function(e){return new c(e)},c);function c(e){this._isScalar=!1,e&&(this._subscribe=e)}function l(e){if(e||(e=u.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}r.Observable=a},{"./config":42,"./symbol/observable":195,"./util/canReportError":203,"./util/pipe":219,"./util/toSubscriber":226}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./config"),i=e("./util/hostReportError");r.empty={closed:!0,next:function(e){},error:function(e){if(n.config.useDeprecatedSynchronousErrorHandling)throw e;i.hostReportError(e)},complete:function(){}}},{"./config":42,"./util/hostReportError":204}],35:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Subscriber"),u=(o=s.Subscriber,i(a,o),a.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},a.prototype.notifyError=function(e,t){this.destination.error(e)},a.prototype.notifyComplete=function(e){this.destination.complete()},a);function a(){return null!==o&&o.apply(this,arguments)||this}r.OuterSubscriber=u},{"./Subscriber":40}],36:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Subject"),u=e("./scheduler/queue"),a=e("./Subscription"),c=e("./operators/observeOn"),l=e("./util/ObjectUnsubscribedError"),h=e("./SubjectSubscription"),f=(o=s.Subject,i(p,o),p.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}o.prototype.next.call(this,e)},p.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new b(this._getNow(),e)),this._trimBufferThenGetEvents()),o.prototype.next.call(this,e)},p.prototype._subscribe=function(e){var t,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new l.ObjectUnsubscribedError;if(t=this.isStopped||this.hasError?a.Subscription.EMPTY:(this.observers.push(e),new h.SubjectSubscription(this,e)),i&&e.add(e=new c.ObserveOnSubscriber(e,i)),r)for(var s=0;s<o&&!e.closed;s++)e.next(n[s]);else for(s=0;s<o&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},p.prototype._getNow=function(){return(this.scheduler||u.queue).now()},p.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return t<i&&(o=Math.max(o,i-t)),0<o&&n.splice(0,o),n},p);function p(e,t,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY);var n=o.call(this)||this;return n.scheduler=r,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=e<1?1:e,n._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}r.ReplaySubject=f;var b=function(e,t){this.time=e,this.value=t}},{"./Subject":38,"./SubjectSubscription":39,"./Subscription":41,"./operators/observeOn":122,"./scheduler/queue":193,"./util/ObjectUnsubscribedError":200}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(i.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},i.now=function(){return Date.now()},i);function i(e,t){void 0===t&&(t=i.now),this.SchedulerAction=e,this.now=t}r.Scheduler=n},{}],38:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Observable"),u=e("./Subscriber"),a=e("./Subscription"),c=e("./util/ObjectUnsubscribedError"),l=e("./SubjectSubscription"),h=e("../internal/symbol/rxSubscriber"),f=(o=u.Subscriber,i(p,o),p);function p(e){var t=o.call(this,e)||this;return t.destination=e,t}r.SubjectSubscriber=f;var b,d=(b=s.Observable,i(v,b),v.prototype[h.rxSubscriber]=function(){return new f(this)},v.prototype.lift=function(e){var t=new _(this,this);return t.operator=e,t},v.prototype.next=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},v.prototype.error=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},v.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},v.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},v.prototype._trySubscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return b.prototype._trySubscribe.call(this,e)},v.prototype._subscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new l.SubjectSubscription(this,e))},v.prototype.asObservable=function(){var e=new s.Observable;return e.source=this,e},v.create=function(e,t){return new _(e,t)},v);function v(){var e=b.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}r.Subject=d;var y,_=(i(m,y=d),m.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},m.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},m.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},m.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.Subscription.EMPTY},m);function m(e,t){var r=y.call(this)||this;return r.destination=e,r.source=t,r}r.AnonymousSubject=_},{"../internal/symbol/rxSubscriber":196,"./Observable":33,"./SubjectSubscription":39,"./Subscriber":40,"./Subscription":41,"./util/ObjectUnsubscribedError":200}],39:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Subscription"),u=(o=s.Subscription,i(a,o),a.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},a);function a(e,t){var r=o.call(this)||this;return r.subject=e,r.subscriber=t,r.closed=!1,r}r.SubjectSubscription=u},{"./Subscription":41}],40:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,u=e("./util/isFunction"),a=e("./Observer"),s=e("./Subscription"),c=e("../internal/symbol/rxSubscriber"),l=e("./config"),h=e("./util/hostReportError"),f=(o=s.Subscription,i(p,o),p.prototype[c.rxSubscriber]=function(){return this},p.create=function(e,t,r){var n=new p(e,t,r);return n.syncErrorThrowable=!1,n},p.prototype.next=function(e){this.isStopped||this._next(e)},p.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},p.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},p.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},p.prototype._next=function(e){this.destination.next(e)},p.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},p.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},p.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},p);function p(e,t,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=a.empty;break;case 1:if(!e){n.destination=a.empty;break}if("object"==typeof e){e instanceof p?(n.syncErrorThrowable=e.syncErrorThrowable,(n.destination=e).add(n)):(n.syncErrorThrowable=!0,n.destination=new d(n,e));break}default:n.syncErrorThrowable=!0,n.destination=new d(n,e,t,r)}return n}r.Subscriber=f;var b,d=(i(v,b=f),v.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},v.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=l.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):h.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;h.hostReportError(e)}}},v.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},v.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),l.config.useDeprecatedSynchronousErrorHandling)throw e;h.hostReportError(e)}},v.prototype.__tryOrSetError=function(t,e,r){if(!l.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return l.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(h.hostReportError(e),!0)}return!1},v.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},v);function v(e,t,r,n){var i,o=b.call(this)||this;o._parentSubscriber=e;var s=o;return u.isFunction(t)?i=t:t&&(i=t.next,r=t.error,n=t.complete,t!==a.empty&&(s=Object.create(t),u.isFunction(s.unsubscribe)&&o.add(s.unsubscribe.bind(s)),s.unsubscribe=o.unsubscribe.bind(o))),o._context=s,o._next=i,o._error=r,o._complete=n,o}r.SafeSubscriber=d},{"../internal/symbol/rxSubscriber":196,"./Observer":34,"./Subscription":41,"./config":42,"./util/hostReportError":204,"./util/isFunction":209}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("./util/isArray"),c=e("./util/isObject"),l=e("./util/isFunction"),h=e("./util/UnsubscriptionError"),i=(f.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,r=this._ctorUnsubscribe,n=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof f)e.remove(this);else if(null!==e)for(var o=0;o<e.length;++o)e[o].remove(this);if(l.isFunction(n)){r&&(this._unsubscribe=void 0);try{n.call(this)}catch(e){t=e instanceof h.UnsubscriptionError?p(e.errors):[e]}}if(a.isArray(i)){o=-1;for(var s=i.length;++o<s;){var u=i[o];if(c.isObject(u))try{u.unsubscribe()}catch(e){t=t||[],e instanceof h.UnsubscriptionError?t=t.concat(p(e.errors)):t.push(e)}}}if(t)throw new h.UnsubscriptionError(t)}},f.prototype.add=function(e){var t=e;if(!e)return f.EMPTY;switch(typeof e){case"function":t=new f(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof f)){var r=t;(t=new f)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=t._parentOrParents;if(null===n)t._parentOrParents=this;else if(n instanceof f){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t},f.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},f.EMPTY=((n=new f).closed=!0,n),f);function f(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}function p(e){return e.reduce(function(e,t){return e.concat(t instanceof h.UnsubscriptionError?t.errors:t)},[])}r.Subscription=i},{"./util/UnsubscriptionError":202,"./util/isArray":206,"./util/isFunction":209,"./util/isObject":213}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=!1;r.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else n&&console.log("RxJS: Back to a better error behavior. Thank you. <3");n=e},get useDeprecatedSynchronousErrorHandling(){return n}}},{}],43:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Subscriber"),u=e("./Observable"),a=e("./util/subscribeTo"),c=(o=s.Subscriber,i(l,o),l.prototype._next=function(e){this.parent.notifyNext(e)},l.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},l);function l(e){var t=o.call(this)||this;return t.parent=e,t}r.SimpleInnerSubscriber=c;var h,f=(h=s.Subscriber,i(p,h),p.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},p.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},p.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},p);function p(e,t,r){var n=h.call(this)||this;return n.parent=e,n.outerValue=t,n.outerIndex=r,n}r.ComplexInnerSubscriber=f;var b,d=(b=s.Subscriber,i(v,b),v.prototype.notifyNext=function(e){this.destination.next(e)},v.prototype.notifyError=function(e){this.destination.error(e)},v.prototype.notifyComplete=function(){this.destination.complete()},v);function v(){return null!==b&&b.apply(this,arguments)||this}r.SimpleOuterSubscriber=d;var y,_=(y=s.Subscriber,i(m,y),m.prototype.notifyNext=function(e,t,r,n){this.destination.next(t)},m.prototype.notifyError=function(e){this.destination.error(e)},m.prototype.notifyComplete=function(e){this.destination.complete()},m);function m(){return null!==y&&y.apply(this,arguments)||this}r.ComplexOuterSubscriber=_,r.innerSubscribe=function(e,t){if(!t.closed)return e instanceof u.Observable?e.subscribe(t):a.subscribeTo(e)(t)}},{"./Observable":33,"./Subscriber":40,"./util/subscribeTo":220}],44:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s,u=e("../Subject"),a=e("../Observable"),c=e("../Subscriber"),l=e("../Subscription"),h=e("../operators/refCount"),f=(o=a.Observable,i(p,o),p.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},p.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},p.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new l.Subscription).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed&&(this._connection=null,e=l.Subscription.EMPTY)),e},p.prototype.refCount=function(){return h.refCount()(this)},p);function p(e,t){var r=o.call(this)||this;return r.source=e,r.subjectFactory=t,r._refCount=0,r._isComplete=!1,r}r.ConnectableObservable=f,r.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(s=f.prototype)._subscribe},_isComplete:{value:s._isComplete,writable:!0},getSubject:{value:s.getSubject},connect:{value:s.connect},refCount:{value:s.refCount}};var b,d=(b=u.SubjectSubscriber,i(v,b),v.prototype._error=function(e){this._unsubscribe(),b.prototype._error.call(this,e)},v.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),b.prototype._complete.call(this)},v.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},v);function v(e,t){var r=b.call(this,e)||this;return r.connectable=t,r}y.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new m(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i};function y(e){this.connectable=e}var _,m=(_=c.Subscriber,i(g,_),g.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},g);function g(e,t){var r=_.call(this,e)||this;return r.connectable=t,r}},{"../Observable":33,"../Subject":38,"../Subscriber":40,"../Subscription":41,"../operators/refCount":133}],45:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("../Observable"),u=e("../scheduler/asap"),a=e("../util/isNumeric"),c=(o=s.Observable,i(l,o),l.create=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=u.asap),new l(e,t,r)},l.dispatch=function(e){var t=e.source,r=e.subscriber;return this.add(t.subscribe(r))},l.prototype._subscribe=function(e){var t=this.delayTime,r=this.source;return this.scheduler.schedule(l.dispatch,t,{source:r,subscriber:e})},l);function l(e,t,r){void 0===t&&(t=0),void 0===r&&(r=u.asap);var n=o.call(this)||this;return n.source=e,n.delayTime=t,n.scheduler=r,(!a.isNumeric(t)||t<0)&&(n.delayTime=0),r&&"function"==typeof r.schedule||(n.scheduler=u.asap),n}r.SubscribeOnObservable=c},{"../Observable":33,"../scheduler/asap":191,"../util/isNumeric":212}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../Observable"),c=e("../AsyncSubject"),i=e("../operators/map"),l=e("../util/canReportError"),o=e("../util/isArray"),h=e("../util/isScheduler");function f(e){var n=this,t=e.args,r=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,u=i.scheduler,a=i.subject;if(!a){a=i.subject=new c.AsyncSubject;try{o.apply(s,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length<=1?e[0]:e;n.add(u.schedule(p,0,{value:r,subject:a}))}]))}catch(e){a.error(e)}}this.add(a.subscribe(r))}function p(e){var t=e.value,r=e.subject;r.next(t),r.complete()}r.bindCallback=function r(s,n,u){if(n){if(!h.isScheduler(n))return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(s,u).apply(void 0,e).pipe(i.map(function(e){return o.isArray(e)?n.apply(void 0,e):n(e)}))};u=n}return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n,i=this,o={context:i,subject:n,callbackFunc:s,scheduler:u};return new a.Observable(function(e){if(u){var t={args:r,subscriber:e,params:o};return u.schedule(f,0,t)}if(!n){n=new c.AsyncSubject;try{s.apply(i,r.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.next(e.length<=1?e[0]:e),n.complete()}]))}catch(e){l.canReportError(n)?n.error(e):console.warn(e)}}return n.subscribe(e)})}}},{"../AsyncSubject":29,"../Observable":33,"../operators/map":111,"../util/canReportError":203,"../util/isArray":206,"../util/isScheduler":216}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=e("../Observable"),c=e("../AsyncSubject"),i=e("../operators/map"),a=e("../util/canReportError"),l=e("../util/isScheduler"),h=e("../util/isArray");function f(e){var i=this,t=e.params,r=e.subscriber,n=e.context,o=t.callbackFunc,s=t.args,u=t.scheduler,a=t.subject;if(!a){a=t.subject=new c.AsyncSubject;try{o.apply(n,s.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.shift();if(r)i.add(u.schedule(b,0,{err:r,subject:a}));else{var n=e.length<=1?e[0]:e;i.add(u.schedule(p,0,{value:n,subject:a}))}}]))}catch(e){this.add(u.schedule(b,0,{err:e,subject:a}))}}this.add(a.subscribe(r))}function p(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function b(e){var t=e.err;e.subject.error(t)}r.bindNodeCallback=function r(o,n,s){if(n){if(!l.isScheduler(n))return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(o,s).apply(void 0,e).pipe(i.map(function(e){return h.isArray(e)?n.apply(void 0,e):n(e)}))};s=n}return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var i={subject:void 0,args:r,callbackFunc:o,scheduler:s,context:this};return new u.Observable(function(e){var t=i.context,n=i.subject;if(s)return s.schedule(f,0,{params:i,subscriber:e,context:t});if(!n){n=i.subject=new c.AsyncSubject;try{o.apply(t,r.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.shift();r?n.error(r):(n.next(e.length<=1?e[0]:e),n.complete())}]))}catch(e){a.canReportError(n)?n.error(e):console.warn(e)}}return n.subscribe(e)})}}},{"../AsyncSubject":29,"../Observable":33,"../operators/map":111,"../util/canReportError":203,"../util/isArray":206,"../util/isScheduler":216}],48:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../util/isScheduler"),s=e("../util/isArray"),u=e("../OuterSubscriber"),a=e("../util/subscribeToResult"),c=e("./fromArray"),l={};r.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=void 0,n=void 0;return o.isScheduler(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&s.isArray(e[0])&&(e=e[0]),c.fromArray(e,n).lift(new h(r))};var h=(f.prototype.call=function(e,t){return t.subscribe(new b(e,this.resultSelector))},f);function f(e){this.resultSelector=e}r.CombineLatestOperator=h;var p,b=(p=u.OuterSubscriber,i(d,p),d.prototype._next=function(e){this.values.push(l),this.observables.push(e)},d.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(a.subscribeToResult(this,n,void 0,r))}}},d.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},d.prototype.notifyNext=function(e,t,r){var n=this.values,i=n[r],o=this.toRespond?i===l?--this.toRespond:this.toRespond:0;n[r]=t,0===o&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))},d.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},d);function d(e,t){var r=p.call(this,e)||this;return r.resultSelector=t,r.active=0,r.values=[],r.observables=[],r}r.CombineLatestSubscriber=b},{"../OuterSubscriber":35,"../util/isArray":206,"../util/isScheduler":216,"../util/subscribeToResult":225,"./fromArray":54}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./of"),i=e("../operators/concatAll");r.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.concatAll()(n.of.apply(void 0,e))}},{"../operators/concatAll":83,"./of":62}],50:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),i=e("./from"),o=e("./empty");r.defer=function(r){return new n.Observable(function(t){var e;try{e=r()}catch(e){return void t.error(e)}return(e?i.from(e):o.empty()).subscribe(t)})}},{"../Observable":33,"./empty":51,"./from":53}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable");r.EMPTY=new n.Observable(function(e){return e.complete()}),r.empty=function(e){return e?function(t){return new n.Observable(function(e){return t.schedule(function(){return e.complete()})})}(e):r.EMPTY}},{"../Observable":33}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),o=e("../util/isArray"),s=e("../operators/map"),u=e("../util/isObject"),l=e("./from");function a(a,c){return new n.Observable(function(n){var i=a.length;if(0!==i)for(var o=new Array(i),s=0,u=0,e=function(t){var e=l.from(a[t]),r=!1;n.add(e.subscribe({next:function(e){r||(r=!0,u++),o[t]=e},error:function(e){return n.error(e)},complete:function(){++s!==i&&r||(u===i&&n.next(c?c.reduce(function(e,t,r){return e[t]=o[r],e},{}):o),n.complete())}}))},t=0;t<i;t++)e(t);else n.complete()})}r.forkJoin=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=e[0];if(o.isArray(r))return a(r,null);if(u.isObject(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return a(n.map(function(e){return r[e]}),n)}}if("function"!=typeof e[e.length-1])return a(e,null);var i=e.pop();return a(e=1===e.length&&o.isArray(e[0])?e[0]:e,null).pipe(s.map(function(e){return i.apply(void 0,e)}))}},{"../Observable":33,"../operators/map":111,"../util/isArray":206,"../util/isObject":213,"./from":53}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),i=e("../util/subscribeTo"),o=e("../scheduled/scheduled");r.from=function(e,t){return t?o.scheduled(e,t):e instanceof n.Observable?e:new n.Observable(i.subscribeTo(e))}},{"../Observable":33,"../scheduled/scheduled":179,"../util/subscribeTo":220}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),i=e("../util/subscribeToArray"),o=e("../scheduled/scheduleArray");r.fromArray=function(e,t){return t?o.scheduleArray(e,t):new n.Observable(i.subscribeToArray(e))}},{"../Observable":33,"../scheduled/scheduleArray":175,"../util/subscribeToArray":221}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Observable"),s=e("../util/isArray"),u=e("../util/isFunction"),a=e("../operators/map");Object.prototype.toString;r.fromEvent=function e(r,n,i,t){return u.isFunction(i)&&(t=i,i=void 0),t?e(r,n,i).pipe(a.map(function(e){return s.isArray(e)?t.apply(void 0,e):t(e)})):new o.Observable(function(t){!function e(t,r,n,i,o){var s,u,a,c;if((c=t)&&"function"==typeof c.addEventListener&&"function"==typeof c.removeEventListener){var l=t;t.addEventListener(r,n,o),s=function(){return l.removeEventListener(r,n,o)}}else if((a=t)&&"function"==typeof a.on&&"function"==typeof a.off){var h=t;t.on(r,n),s=function(){return h.off(r,n)}}else if((u=t)&&"function"==typeof u.addListener&&"function"==typeof u.removeListener){var f=t;t.addListener(r,n),s=function(){return f.removeListener(r,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var p=0,b=t.length;p<b;p++)e(t[p],r,n,i,o)}i.add(s)}(r,n,function(e){1<arguments.length?t.next(Array.prototype.slice.call(arguments)):t.next(e)},t,i)})}},{"../Observable":33,"../operators/map":111,"../util/isArray":206,"../util/isFunction":209}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Observable"),s=e("../util/isArray"),u=e("../util/isFunction"),a=e("../operators/map");r.fromEventPattern=function e(n,i,t){return t?e(n,i).pipe(a.map(function(e){return s.isArray(e)?t.apply(void 0,e):t(e)})):new o.Observable(function(r){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)}var t;try{t=n(e)}catch(e){return void r.error(e)}if(u.isFunction(i))return function(){return i(e,t)}})}},{"../Observable":33,"../operators/map":111,"../util/isArray":206,"../util/isFunction":209}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),c=e("../util/identity"),l=e("../util/isScheduler");function h(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}r.generate=function(e,i,o,t,s){var u,a;if(1==arguments.length){var r=e;a=r.initialState,i=r.condition,o=r.iterate,u=r.resultSelector||c.identity,s=r.scheduler}else void 0===t||l.isScheduler(t)?(a=e,u=c.identity,s=t):(a=e,u=t);return new n.Observable(function(t){var e=a;if(s)return s.schedule(h,0,{subscriber:t,iterate:o,condition:i,resultSelector:u,state:e});for(;;){if(i){var r=void 0;try{r=i(e)}catch(e){return void t.error(e)}if(!r){t.complete();break}}var n=void 0;try{n=u(e)}catch(e){return void t.error(e)}if(t.next(n),t.closed)break;try{e=o(e)}catch(e){return void t.error(e)}}})}},{"../Observable":33,"../util/identity":205,"../util/isScheduler":216}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./defer"),i=e("./empty");r.iif=function(e,t,r){return void 0===t&&(t=i.EMPTY),void 0===r&&(r=i.EMPTY),n.defer(function(){return e()?t:r})}},{"./defer":50,"./empty":51}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),i=e("../scheduler/async"),o=e("../util/isNumeric");function s(e){var t=e.subscriber,r=e.counter,n=e.period;t.next(r),this.schedule({subscriber:t,counter:r+1,period:n},n)}r.interval=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=i.async),(!o.isNumeric(t)||t<0)&&(t=0),r&&"function"==typeof r.schedule||(r=i.async),new n.Observable(function(e){return e.add(r.schedule(s,t,{subscriber:e,counter:0,period:t})),e})}},{"../Observable":33,"../scheduler/async":192,"../util/isNumeric":212}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Observable"),s=e("../util/isScheduler"),u=e("../operators/mergeAll"),a=e("./fromArray");r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return s.isScheduler(i)?(n=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof o.Observable?e[0]:u.mergeAll(r)(a.fromArray(e,n))}},{"../Observable":33,"../operators/mergeAll":116,"../util/isScheduler":216,"./fromArray":54}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),i=e("../util/noop");r.NEVER=new n.Observable(i.noop),r.never=function(){return r.NEVER}},{"../Observable":33,"../util/noop":217}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../util/isScheduler"),i=e("./fromArray"),o=e("../scheduled/scheduleArray");r.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return n.isScheduler(r)?(e.pop(),o.scheduleArray(e,r)):i.fromArray(e)}},{"../scheduled/scheduleArray":175,"../util/isScheduler":216,"./fromArray":54}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Observable"),s=e("./from"),u=e("../util/isArray"),a=e("./empty");r.onErrorResumeNext=function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return a.EMPTY;var n=e[0],i=e.slice(1);return 1===e.length&&u.isArray(n)?r.apply(void 0,n):new o.Observable(function(t){function e(){return t.add(r.apply(void 0,i).subscribe(t))}return s.from(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}},{"../Observable":33,"../util/isArray":206,"./empty":51,"./from":53}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Observable"),s=e("../Subscription");function u(e){var t=e.keys,r=e.index,n=e.subscriber,i=e.subscription,o=e.obj;if(!n.closed)if(r<t.length){var s=t[r];n.next([s,o[s]]),i.add(this.schedule({keys:t,index:r+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}r.pairs=function(i,n){return n?new o.Observable(function(e){var t=Object.keys(i),r=new s.Subscription;return r.add(n.schedule(u,0,{keys:t,index:0,subscriber:e,subscription:r,obj:i})),r}):new o.Observable(function(e){for(var t=Object.keys(i),r=0;r<t.length&&!e.closed;r++){var n=t[r];i.hasOwnProperty(n)&&e.next([n,i[n]])}e.complete()})},r.dispatch=u},{"../Observable":33,"../Subscription":41}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../util/not"),i=e("../util/subscribeTo"),o=e("../operators/filter"),s=e("../Observable");r.partition=function(e,t,r){return[o.filter(t,r)(new s.Observable(i.subscribeTo(e))),o.filter(n.not(t,r))(new s.Observable(i.subscribeTo(e)))]}},{"../Observable":33,"../operators/filter":102,"../util/not":218,"../util/subscribeTo":220}],66:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../util/isArray"),s=e("./fromArray"),u=e("../OuterSubscriber"),a=e("../util/subscribeToResult");r.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!o.isArray(e[0]))return e[0];e=e[0]}return s.fromArray(e,void 0).lift(new c)};var c=(l.prototype.call=function(e,t){return t.subscribe(new f(e))},l);function l(){}r.RaceOperator=c;var h,f=(h=u.OuterSubscriber,i(p,h),p.prototype._next=function(e){this.observables.push(e)},p.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=a.subscribeToResult(this,n,void 0,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},p.prototype.notifyNext=function(e,t,r){if(!this.hasFirst){this.hasFirst=!0;for(var n=0;n<this.subscriptions.length;n++)if(n!==r){var i=this.subscriptions[n];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)},p);function p(e){var t=h.call(this,e)||this;return t.hasFirst=!1,t.observables=[],t.subscriptions=[],t}r.RaceSubscriber=f},{"../OuterSubscriber":35,"../util/isArray":206,"../util/subscribeToResult":225,"./fromArray":54}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e("../Observable");function u(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;n<=r?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))}r.range=function(n,i,o){return void 0===n&&(n=0),new s.Observable(function(e){void 0===i&&(i=n,n=0);var t=0,r=n;if(o)return o.schedule(u,0,{index:t,count:i,start:n,subscriber:e});for(;;){if(t++>=i){e.complete();break}if(e.next(r++),e.closed)break}})},r.dispatch=u},{"../Observable":33}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable");function i(e){var t=e.error;e.subscriber.error(t)}r.throwError=function(t,r){return r?new n.Observable(function(e){return r.schedule(i,0,{error:t,subscriber:e})}):new n.Observable(function(e){return e.error(t)})}},{"../Observable":33}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Observable"),s=e("../scheduler/async"),u=e("../util/isNumeric"),a=e("../util/isScheduler");function c(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}}r.timer=function(r,e,n){void 0===r&&(r=0);var i=-1;return u.isNumeric(e)?i=Number(e)<1?1:Number(e):a.isScheduler(e)&&(n=e),a.isScheduler(n)||(n=s.async),new o.Observable(function(e){var t=u.isNumeric(r)?r:+r-n.now();return n.schedule(c,t,{index:0,period:i,subscriber:e})})}},{"../Observable":33,"../scheduler/async":192,"../util/isNumeric":212,"../util/isScheduler":216}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),s=e("./from"),u=e("./empty");r.using=function(i,o){return new n.Observable(function(t){var e,r;try{e=i()}catch(e){return void t.error(e)}try{r=o(e)}catch(e){return void t.error(e)}var n=(r?s.from(r):u.EMPTY).subscribe(t);return function(){n.unsubscribe(),e&&e.unsubscribe()}})}},{"../Observable":33,"./empty":51,"./from":53}],71:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("./fromArray"),s=e("../util/isArray"),u=e("../Subscriber"),a=e("../../internal/symbol/iterator"),c=e("../innerSubscribe");r.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),o.fromArray(e,void 0).lift(new l(r))};var l=(h.prototype.call=function(e,t){return t.subscribe(new p(e,this.resultSelector))},h);function h(e){this.resultSelector=e}r.ZipOperator=l;var f,p=(f=u.Subscriber,i(b,f),b.prototype._next=function(e){var t=this.iterators;s.isArray(e)?t.push(new y(e)):"function"==typeof e[a.iterator]?t.push(new d(e[a.iterator]())):t.push(new g(this.destination,this,e))},b.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.destination.add(n.subscribe()):this.active--}}else this.destination.complete()},b.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},b.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++)if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return;var i=!1,o=[];for(n=0;n<t;n++){var s,u=(s=e[n]).next();if(s.hasCompleted()&&(i=!0),u.done)return void r.complete();o.push(u.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},b.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},b);function b(e,t,r){void 0===r&&(r=Object.create(null));var n=f.call(this,e)||this;return n.resultSelector=t,n.iterators=[],n.active=0,n.resultSelector="function"==typeof t?t:void 0,n}r.ZipSubscriber=p;var d=(v.prototype.hasValue=function(){return!0},v.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},v.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},v);function v(e){this.iterator=e,this.nextResult=e.next()}var y=(_.prototype[a.iterator]=function(){return this},_.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},_.prototype.hasValue=function(){return this.array.length>this.index},_.prototype.hasCompleted=function(){return this.array.length===this.index},_);function _(e){this.array=e,this.index=0,this.length=0,this.length=e.length}var m,g=(m=c.SimpleOuterSubscriber,i(w,m),w.prototype[a.iterator]=function(){return this},w.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},w.prototype.hasValue=function(){return 0<this.buffer.length},w.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},w.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},w.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},w.prototype.subscribe=function(){return c.innerSubscribe(this.observable,new c.SimpleInnerSubscriber(this))},w);function w(e,t,r){var n=m.call(this,e)||this;return n.parent=t,n.observable=r,n.stillUnsubscribed=!0,n.buffer=[],n.isComplete=!1,n}},{"../../internal/symbol/iterator":194,"../Subscriber":40,"../innerSubscribe":43,"../util/isArray":206,"./fromArray":54}],72:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.audit=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},u);function u(e){this.durationSelector=e}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=void 0;try{t=(0,this.durationSelector)(e)}catch(e){return this.destination.error(e)}var r=o.innerSubscribe(t,new o.SimpleInnerSubscriber(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}},l.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))},l.prototype.notifyNext=function(){this.clearThrottle()},l.prototype.notifyComplete=function(){this.clearThrottle()},l);function l(e,t){var r=a.call(this,e)||this;return r.durationSelector=t,r.hasValue=!1,r}},{"../innerSubscribe":43}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../scheduler/async"),i=e("./audit"),o=e("../observable/timer");r.auditTime=function(e,t){return void 0===t&&(t=n.async),i.audit(function(){return o.timer(e,t)})}},{"../observable/timer":69,"../scheduler/async":192,"./audit":72}],74:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.buffer=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingNotifier))},u);function u(e){this.closingNotifier=e}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype._next=function(e){this.buffer.push(e)},l.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},l);function l(e,t){var r=a.call(this,e)||this;return r.buffer=[],r.add(o.innerSubscribe(t,new o.SimpleInnerSubscriber(r))),r}},{"../innerSubscribe":43}],75:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.bufferCount=function(t,r){return void 0===r&&(r=null),function(e){return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},u);function u(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?f:c}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},l.prototype._complete=function(){var e=this.buffer;0<e.length&&this.destination.next(e),a.prototype._complete.call(this)},l);function l(e,t){var r=a.call(this,e)||this;return r.bufferSize=t,r.buffer=[],r}var h,f=(h=o.Subscriber,i(p,h),p.prototype._next=function(e){var t=this.bufferSize,r=this.startBufferEvery,n=this.buffers,i=this.count;this.count++,i%r==0&&n.push([]);for(var o=n.length;o--;){var s=n[o];s.push(e),s.length===t&&(n.splice(o,1),this.destination.next(s))}},p.prototype._complete=function(){for(var e=this.buffers,t=this.destination;0<e.length;){var r=e.shift();0<r.length&&t.next(r)}h.prototype._complete.call(this)},p);function p(e,t,r){var n=h.call(this,e)||this;return n.bufferSize=t,n.startBufferEvery=r,n.buffers=[],n.count=0,n}},{"../Subscriber":40}],76:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../scheduler/async"),s=e("../Subscriber"),u=e("../util/isScheduler");r.bufferTime=function(t){var e=arguments.length,r=o.async;u.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],e--);var n=null;2<=e&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return 3<=e&&(i=arguments[2]),function(e){return e.lift(new a(t,n,i,r))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new f(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},c);function c(e,t,r,n){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=n}var l,h=function(){this.buffer=[]},f=(l=s.Subscriber,i(p,l),p.prototype._next=function(e){for(var t,r=this.contexts,n=r.length,i=0;i<n;i++){var o=r[i],s=o.buffer;s.push(e),s.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},p.prototype._error=function(e){this.contexts.length=0,l.prototype._error.call(this,e)},p.prototype._complete=function(){for(var e=this.contexts,t=this.destination;0<e.length;){var r=e.shift();t.next(r.buffer)}l.prototype._complete.call(this)},p.prototype._unsubscribe=function(){this.contexts=null},p.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(b,r,n))}},p.prototype.openContext=function(){var e=new h;return this.contexts.push(e),e},p.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;0<=(t?t.indexOf(e):-1)&&t.splice(t.indexOf(e),1)},p);function p(e,t,r,n,i){var o=l.call(this,e)||this;o.bufferTimeSpan=t,o.bufferCreationInterval=r,o.maxBufferSize=n,o.scheduler=i,o.contexts=[];var s=o.openContext();if(o.timespanOnly=null==r||r<0,o.timespanOnly){var u={subscriber:o,context:s,bufferTimeSpan:t};o.add(s.closeAction=i.schedule(b,t,u))}else{var a={subscriber:o,context:s},c={bufferTimeSpan:t,bufferCreationInterval:r,subscriber:o,scheduler:i};o.add(s.closeAction=i.schedule(v,t,a)),o.add(i.schedule(d,r,c))}return o}function b(e){var t=e.subscriber,r=e.context;r&&t.closeContext(r),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function d(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,n=e.subscriber,i=e.scheduler,o=n.openContext();n.closed||(n.add(o.closeAction=i.schedule(v,r,{subscriber:n,context:o})),this.schedule(e,t))}function v(e){var t=e.subscriber,r=e.context;t.closeContext(r)}},{"../Subscriber":40,"../scheduler/async":192,"../util/isScheduler":216}],77:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscription"),s=e("../util/subscribeToResult"),u=e("../OuterSubscriber");r.bufferToggle=function(t,r){return function(e){return e.lift(new a(t,r))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.openings,this.closingSelector))},c);function c(e,t){this.openings=e,this.closingSelector=t}var l,h=(l=u.OuterSubscriber,i(f,l),f.prototype._next=function(e){for(var t=this.contexts,r=t.length,n=0;n<r;n++)t[n].buffer.push(e)},f.prototype._error=function(e){for(var t=this.contexts;0<t.length;){var r=t.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,l.prototype._error.call(this,e)},f.prototype._complete=function(){for(var e=this.contexts;0<e.length;){var t=e.shift();this.destination.next(t.buffer),t.subscription.unsubscribe(),t.buffer=null,t.subscription=null}this.contexts=null,l.prototype._complete.call(this)},f.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},f.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},f.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},f.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,n=e.subscription;this.destination.next(r),t.splice(t.indexOf(e),1),this.remove(n),n.unsubscribe()}},f.prototype.trySubscribe=function(e){var t=this.contexts,r=new o.Subscription,n={buffer:[],subscription:r};t.push(n);var i=s.subscribeToResult(this,e,n);!i||i.closed?this.closeBuffer(n):(i.context=n,this.add(i),r.add(i))},f);function f(e,t,r){var n=l.call(this,e)||this;return n.closingSelector=r,n.contexts=[],n.add(s.subscribeToResult(n,t)),n}},{"../OuterSubscriber":35,"../Subscription":41,"../util/subscribeToResult":225}],78:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscription"),s=e("../innerSubscribe");r.bufferWhen=function(t){return function(e){return e.lift(new u(t))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.closingSelector))},a);function a(e){this.closingSelector=e}var c,l=(c=s.SimpleOuterSubscriber,i(h,c),h.prototype._next=function(e){this.buffer.push(e)},h.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),c.prototype._complete.call(this)},h.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},h.prototype.notifyNext=function(){this.openBuffer()},h.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},h.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,r=this.buffer;this.buffer&&this.destination.next(r),this.buffer=[];try{t=(0,this.closingSelector)()}catch(e){return this.error(e)}e=new o.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(s.innerSubscribe(t,new s.SimpleInnerSubscriber(this))),this.subscribing=!1},h);function h(e,t){var r=c.call(this,e)||this;return r.closingSelector=t,r.subscribing=!1,r.openBuffer(),r}},{"../Subscription":41,"../innerSubscribe":43}],79:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.catchError=function(n){return function(e){var t=new s(n),r=e.lift(t);return t.caught=r}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.selector,this.caught))},u);function u(e){this.selector=e}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype.error=function(e){if(!this.isStopped){var t=void 0;try{t=this.selector(e,this.caught)}catch(e){return void a.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new o.SimpleInnerSubscriber(this);this.add(r);var n=o.innerSubscribe(t,r);n!==r&&this.add(n)}},l);function l(e,t,r){var n=a.call(this,e)||this;return n.selector=t,n.caught=r,n}},{"../innerSubscribe":43}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../observable/combineLatest");r.combineAll=function(t){return function(e){return e.lift(new n.CombineLatestOperator(t))}}},{"../observable/combineLatest":48}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../util/isArray"),i=e("../observable/combineLatest"),o=e("../observable/from");r.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=null;return"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&n.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(o.from([e].concat(t)),new i.CombineLatestOperator(r))}}},{"../observable/combineLatest":48,"../observable/from":53,"../util/isArray":206}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../observable/concat");r.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(n.concat.apply(void 0,[e].concat(t)))}}},{"../observable/concat":49}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./mergeAll");r.concatAll=function(){return n.mergeAll(1)}},{"./mergeAll":116}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./mergeMap");r.concatMap=function(e,t){return n.mergeMap(e,t,1)}},{"./mergeMap":117}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./concatMap");r.concatMapTo=function(e,t){return n.concatMap(function(){return e},t)}},{"./concatMap":84}],86:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.count=function(t){return function(e){return e.lift(new s(t,e))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.source))},u);function u(e,t){this.predicate=e,this.source=t}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},l.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},l.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},l);function l(e,t,r){var n=a.call(this,e)||this;return n.predicate=t,n.source=r,n.count=0,n.index=0,n}},{"../Subscriber":40}],87:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.debounce=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},u);function u(e){this.durationSelector=e}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},l.prototype._complete=function(){this.emitValue(),this.destination.complete()},l.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=o.innerSubscribe(t,new o.SimpleInnerSubscriber(this)))&&!r.closed&&this.add(this.durationSubscription=r)},l.prototype.notifyNext=function(){this.emitValue()},l.prototype.notifyComplete=function(){this.emitValue()},l.prototype.emitValue=function(){if(this.hasValue){var e=this.value,t=this.durationSubscription;t&&(this.durationSubscription=void 0,t.unsubscribe(),this.remove(t)),this.value=void 0,this.hasValue=!1,a.prototype._next.call(this,e)}},l);function l(e,t){var r=a.call(this,e)||this;return r.durationSelector=t,r.hasValue=!1,r}},{"../innerSubscribe":43}],88:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../scheduler/async");r.debounceTime=function(t,r){return void 0===r&&(r=s.async),function(e){return e.lift(new u(t,r))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.dueTime,this.scheduler))},a);function a(e,t){this.dueTime=e,this.scheduler=t}var c,l=(c=o.Subscriber,i(h,c),h.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(f,this.dueTime,this))},h.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},h.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},h.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},h);function h(e,t,r){var n=c.call(this,e)||this;return n.dueTime=t,n.scheduler=r,n.debouncedSubscription=null,n.lastValue=null,n.hasValue=!1,n}function f(e){e.debouncedNext()}},{"../Subscriber":40,"../scheduler/async":192}],89:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.defaultIfEmpty=function(t){return void 0===t&&(t=null),function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.defaultValue))},u);function u(e){this.defaultValue=e}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},l.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},l);function l(e,t){var r=a.call(this,e)||this;return r.defaultValue=t,r.isEmpty=!0,r}},{"../Subscriber":40}],90:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../scheduler/async"),s=e("../util/isDate"),u=e("../Subscriber"),a=e("../Notification");r.delay=function(e,t){void 0===t&&(t=o.async);var r=s.isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new c(r,t))}};var c=(l.prototype.call=function(e,t){return t.subscribe(new f(e,this.delay,this.scheduler))},l);function l(e,t){this.delay=e,this.scheduler=t}var h,f=(h=u.Subscriber,i(p,h),p.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;0<r.length&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(0<r.length){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},p.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(p.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},p.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new b(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},p.prototype._next=function(e){this.scheduleNotification(a.Notification.createNext(e))},p.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},p.prototype._complete=function(){this.scheduleNotification(a.Notification.createComplete()),this.unsubscribe()},p);function p(e,t,r){var n=h.call(this,e)||this;return n.delay=t,n.scheduler=r,n.queue=[],n.active=!1,n.errored=!1,n}var b=function(e,t){this.time=e,this.notification=t}},{"../Notification":32,"../Subscriber":40,"../scheduler/async":192,"../util/isDate":208}],91:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../Observable"),u=e("../OuterSubscriber"),a=e("../util/subscribeToResult");r.delayWhen=function(t,r){return r?function(e){return new d(e,r).lift(new c(t))}:function(e){return e.lift(new c(t))}};var c=(l.prototype.call=function(e,t){return t.subscribe(new f(e,this.delayDurationSelector))},l);function l(e){this.delayDurationSelector=e}var h,f=(h=u.OuterSubscriber,i(p,h),p.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},p.prototype.notifyError=function(e,t){this._error(e)},p.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},p.prototype._next=function(e){var t=this.index++;try{var r=this.delayDurationSelector(e,t);r&&this.tryDelay(r,e)}catch(e){this.destination.error(e)}},p.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},p.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},p.prototype.tryDelay=function(e,t){var r=a.subscribeToResult(this,e,t);r&&!r.closed&&(this.destination.add(r),this.delayNotifierSubscriptions.push(r))},p.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},p);function p(e,t){var r=h.call(this,e)||this;return r.delayDurationSelector=t,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}var b,d=(b=s.Observable,i(v,b),v.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new _(e,this.source))},v);function v(e,t){var r=b.call(this)||this;return r.source=e,r.subscriptionDelay=t,r}var y,_=(y=o.Subscriber,i(m,y),m.prototype._next=function(e){this.subscribeToSource()},m.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},m.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},m.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},m);function m(e,t){var r=y.call(this)||this;return r.parent=e,r.source=t,r.sourceSubscribed=!1,r}},{"../Observable":33,"../OuterSubscriber":35,"../Subscriber":40,"../util/subscribeToResult":225}],92:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.dematerialize=function(){return function(e){return e.lift(new s)}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e))},u);function u(){}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){e.observe(this.destination)},l);function l(e){return a.call(this,e)||this}},{"../Subscriber":40}],93:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.distinct=function(t,r){return function(e){return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.keySelector,this.flushes))},u);function u(e,t){this.keySelector=e,this.flushes=t}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype.notifyNext=function(){this.values.clear()},l.prototype.notifyError=function(e){this._error(e)},l.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},l.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},l.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},l);function l(e,t,r){var n=a.call(this,e)||this;return n.keySelector=t,n.values=new Set,r&&n.add(o.innerSubscribe(r,new o.SimpleInnerSubscriber(n))),n}r.DistinctSubscriber=c},{"../innerSubscribe":43}],94:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.distinctUntilChanged=function(t,r){return function(e){return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.compare,this.keySelector))},u);function u(e,t){this.compare=e,this.keySelector=t}var a,c=(a=o.Subscriber,i(l,a),l.prototype.compare=function(e,t){return e===t},l.prototype._next=function(e){var t;try{var r=this.keySelector;t=r?r(e):e}catch(e){return this.destination.error(e)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))},l);function l(e,t,r){var n=a.call(this,e)||this;return n.keySelector=r,n.hasKey=!1,"function"==typeof t&&(n.compare=t),n}},{"../Subscriber":40}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("./distinctUntilChanged");r.distinctUntilKeyChanged=function(r,n){return i.distinctUntilChanged(function(e,t){return n?n(e[r],t[r]):e[r]===t[r]})}},{"./distinctUntilChanged":94}],96:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("../util/ArgumentOutOfRangeError"),o=e("./filter"),s=e("./throwIfEmpty"),u=e("./defaultIfEmpty"),a=e("./take");r.elementAt=function(r,t){if(r<0)throw new i.ArgumentOutOfRangeError;var n=2<=arguments.length;return function(e){return e.pipe(o.filter(function(e,t){return t===r}),a.take(1),n?u.defaultIfEmpty(t):s.throwIfEmpty(function(){return new i.ArgumentOutOfRangeError}))}}},{"../util/ArgumentOutOfRangeError":197,"./defaultIfEmpty":89,"./filter":102,"./take":154,"./throwIfEmpty":161}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../observable/concat"),i=e("../observable/of");r.endWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return n.concat(e,i.of.apply(void 0,t))}}},{"../observable/concat":49,"../observable/of":62}],98:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.every=function(t,r){return function(e){return e.lift(new s(t,r,e))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.thisArg,this.source))},u);function u(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}var a,c=(a=o.Subscriber,i(l,a),l.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},l.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},l.prototype._complete=function(){this.notifyComplete(!0)},l);function l(e,t,r,n){var i=a.call(this,e)||this;return i.predicate=t,i.thisArg=r,i.source=n,i.index=0,i.thisArg=r||i,i}},{"../Subscriber":40}],99:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.exhaust=function(){return function(e){return e.lift(new s)}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e))},u);function u(){}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(o.innerSubscribe(e,new o.SimpleInnerSubscriber(this))))},l.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},l.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},l);function l(e){var t=a.call(this,e)||this;return t.hasCompleted=!1,t.hasSubscription=!1,t}},{"../innerSubscribe":43}],100:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=e("./map"),u=e("../observable/from"),o=e("../innerSubscribe");r.exhaustMap=function t(i,o){return o?function(e){return e.pipe(t(function(r,n){return u.from(i(r,n)).pipe(s.map(function(e,t){return o(r,e,n,t)}))}))}:function(e){return e.lift(new a(i))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))},c);function c(e){this.project=e}var l,h=(l=o.SimpleOuterSubscriber,i(f,l),f.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},f.prototype.tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t)},f.prototype._innerSub=function(e){var t=new o.SimpleInnerSubscriber(this),r=this.destination;r.add(t);var n=o.innerSubscribe(e,t);n!==t&&r.add(n)},f.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},f.prototype.notifyNext=function(e){this.destination.next(e)},f.prototype.notifyError=function(e){this.destination.error(e)},f.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},f);function f(e,t){var r=l.call(this,e)||this;return r.project=t,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}},{"../innerSubscribe":43,"../observable/from":53,"./map":111}],101:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.expand=function(t,r,n){return void 0===r&&(r=Number.POSITIVE_INFINITY),r=(r||0)<1?Number.POSITIVE_INFINITY:r,function(e){return e.lift(new s(t,r,n))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.concurrent,this.scheduler))},u);function u(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}r.ExpandOperator=s;var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.dispatch=function(e){var t=e.subscriber,r=e.result,n=e.value,i=e.index;t.subscribeToProjection(r,n,i)},l.prototype._next=function(e){var t=this.destination;if(t.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){t.next(e);try{var n=(0,this.project)(e,r);if(this.scheduler){var i={subscriber:this,result:n,value:e,index:r};this.destination.add(this.scheduler.schedule(l.dispatch,0,i))}else this.subscribeToProjection(n,e,r)}catch(e){t.error(e)}}else this.buffer.push(e)}},l.prototype.subscribeToProjection=function(e,t,r){this.active++,this.destination.add(o.innerSubscribe(e,new o.SimpleInnerSubscriber(this)))},l.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},l.prototype.notifyNext=function(e){this._next(e)},l.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&0<e.length&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},l);function l(e,t,r,n){var i=a.call(this,e)||this;return i.project=t,i.concurrent=r,i.scheduler=n,i.index=0,i.active=0,i.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(i.buffer=[]),i}r.ExpandSubscriber=c},{"../innerSubscribe":43}],102:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.filter=function(t,r){return function(e){return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.thisArg))},u);function u(e,t){this.predicate=e,this.thisArg=t}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},l);function l(e,t,r){var n=a.call(this,e)||this;return n.predicate=t,n.thisArg=r,n.count=0,n}},{"../Subscriber":40}],103:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../Subscription");r.finalize=function(t){return function(e){return e.lift(new u(t))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.callback))},a);function a(e){this.callback=e}var c,l=(c=o.Subscriber,i(h,c),h);function h(e,t){var r=c.call(this,e)||this;return r.add(new s.Subscription(t)),r}},{"../Subscriber":40,"../Subscription":41}],104:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.find=function(t,r){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(e){return e.lift(new s(t,e,!1,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},u);function u(e,t,r,n){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=n}r.FindValueOperator=s;var a,c=(a=o.Subscriber,i(l,a),l.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},l.prototype._next=function(e){var t=this.predicate,r=this.thisArg,n=this.index++;try{t.call(r||this,e,n,this.source)&&this.notifyComplete(this.yieldIndex?n:e)}catch(e){this.destination.error(e)}},l.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},l);function l(e,t,r,n,i){var o=a.call(this,e)||this;return o.predicate=t,o.source=r,o.yieldIndex=n,o.thisArg=i,o.index=0,o}r.FindValueSubscriber=c},{"../Subscriber":40}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../operators/find");r.findIndex=function(t,r){return function(e){return e.lift(new n.FindValueOperator(t,e,!0,r))}}},{"../operators/find":104}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("../util/EmptyError"),o=e("./filter"),s=e("./take"),u=e("./defaultIfEmpty"),a=e("./throwIfEmpty"),c=e("../util/identity");r.first=function(n,e){var t=2<=arguments.length;return function(r){return r.pipe(n?o.filter(function(e,t){return n(e,t,r)}):c.identity,s.take(1),t?u.defaultIfEmpty(e):a.throwIfEmpty(function(){return new i.EmptyError}))}}},{"../util/EmptyError":198,"../util/identity":205,"./defaultIfEmpty":89,"./filter":102,"./take":154,"./throwIfEmpty":161}],107:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../Subscription"),u=e("../Observable"),a=e("../Subject");r.groupBy=function(t,r,n,i){return function(e){return e.lift(new c(t,r,n,i))}};var c=(l.prototype.call=function(e,t){return t.subscribe(new f(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},l);function l(e,t,r,n){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=n}var h,f=(h=o.Subscriber,i(p,h),p.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},p.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups=new Map);var n,i=r.get(t);if(this.elementSelector)try{n=this.elementSelector(e)}catch(e){this.error(e)}else n=e;if(!i){i=this.subjectSelector?this.subjectSelector():new a.Subject,r.set(t,i);var o=new _(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new _(t,i))}catch(e){return void this.error(e)}this.add(s.subscribe(new d(t,i,this)))}}i.closed||i.next(n)},p.prototype._error=function(r){var e=this.groups;e&&(e.forEach(function(e,t){e.error(r)}),e.clear()),this.destination.error(r)},p.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},p.prototype.removeGroup=function(e){this.groups.delete(e)},p.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&h.prototype.unsubscribe.call(this))},p);function p(e,t,r,n,i){var o=h.call(this,e)||this;return o.keySelector=t,o.elementSelector=r,o.durationSelector=n,o.subjectSelector=i,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}var b,d=(b=o.Subscriber,i(v,b),v.prototype._next=function(e){this.complete()},v.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},v);function v(e,t,r){var n=b.call(this,t)||this;return n.key=e,n.group=t,n.parent=r,n}var y,_=(y=u.Observable,i(m,y),m.prototype._subscribe=function(e){var t=new s.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new w(r)),t.add(n.subscribe(e)),t},m);function m(e,t,r){var n=y.call(this)||this;return n.key=e,n.groupSubject=t,n.refCountSubscription=r,n}r.GroupedObservable=_;var g,w=(g=s.Subscription,i(O,g),O.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(g.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},O);function O(e){var t=g.call(this)||this;return(t.parent=e).count++,t}},{"../Observable":33,"../Subject":38,"../Subscriber":40,"../Subscription":41}],108:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.ignoreElements=function(){return function(e){return e.lift(new s)}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e))},u);function u(){}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){},l);function l(){return null!==a&&a.apply(this,arguments)||this}},{"../Subscriber":40}],109:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.isEmpty=function(){return function(e){return e.lift(new s)}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e))},u);function u(){}var a,c=(a=o.Subscriber,i(l,a),l.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},l.prototype._next=function(e){this.notifyComplete(!1)},l.prototype._complete=function(){this.notifyComplete(!0)},l);function l(e){return a.call(this,e)||this}},{"../Subscriber":40}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("../util/EmptyError"),o=e("./filter"),s=e("./takeLast"),u=e("./throwIfEmpty"),a=e("./defaultIfEmpty"),c=e("../util/identity");r.last=function(n,e){var t=2<=arguments.length;return function(r){return r.pipe(n?o.filter(function(e,t){return n(e,t,r)}):c.identity,s.takeLast(1),t?a.defaultIfEmpty(e):u.throwIfEmpty(function(){return new i.EmptyError}))}}},{"../util/EmptyError":198,"../util/identity":205,"./defaultIfEmpty":89,"./filter":102,"./takeLast":155,"./throwIfEmpty":161}],111:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.map=function(t,r){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.thisArg))},u);function u(e,t){this.project=e,this.thisArg=t}r.MapOperator=s;var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},l);function l(e,t,r){var n=a.call(this,e)||this;return n.project=t,n.count=0,n.thisArg=r||n,n}},{"../Subscriber":40}],112:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.mapTo=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.value))},u);function u(e){this.value=e}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){this.destination.next(this.value)},l);function l(e,t){var r=a.call(this,e)||this;return r.value=t,r}},{"../Subscriber":40}],113:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../Notification");r.materialize=function(){return function(e){return e.lift(new u)}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e))},a);function a(){}var c,l=(c=o.Subscriber,i(h,c),h.prototype._next=function(e){this.destination.next(s.Notification.createNext(e))},h.prototype._error=function(e){var t=this.destination;t.next(s.Notification.createError(e)),t.complete()},h.prototype._complete=function(){var e=this.destination;e.next(s.Notification.createComplete()),e.complete()},h);function h(e){return c.call(this,e)||this}},{"../Notification":32,"../Subscriber":40}],114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./reduce");r.max=function(r){var e="function"==typeof r?function(e,t){return 0<r(e,t)?e:t}:function(e,t){return t<e?e:t};return n.reduce(e)}},{"./reduce":132}],115:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../observable/merge");r.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(n.merge.apply(void 0,[e].concat(t)))}}},{"../observable/merge":60}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./mergeMap"),i=e("../util/identity");r.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),n.mergeMap(i.identity,e)}},{"../util/identity":205,"./mergeMap":117}],117:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("./map"),s=e("../observable/from"),u=e("../innerSubscribe");function a(t,i,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof i?function(e){return e.pipe(a(function(r,n){return s.from(t(r,n)).pipe(o.map(function(e,t){return i(r,e,n,t)}))},r))}:("number"==typeof i&&(r=i),function(e){return e.lift(new c(t,r))})}r.mergeMap=a;var c=(l.prototype.call=function(e,t){return t.subscribe(new f(e,this.project,this.concurrent))},l);function l(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}r.MergeMapOperator=c;var h,f=(h=u.SimpleOuterSubscriber,i(p,h),p.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},p.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},p.prototype._innerSub=function(e){var t=new u.SimpleInnerSubscriber(this),r=this.destination;r.add(t);var n=u.innerSubscribe(e,t);n!==t&&r.add(n)},p.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},p.prototype.notifyNext=function(e){this.destination.next(e)},p.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},p);function p(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var n=h.call(this,e)||this;return n.project=t,n.concurrent=r,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}r.MergeMapSubscriber=f,r.flatMap=a},{"../innerSubscribe":43,"../observable/from":53,"./map":111}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./mergeMap");r.mergeMapTo=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?n.mergeMap(function(){return e},t,r):("number"==typeof t&&(r=t),n.mergeMap(function(){return e},r))}},{"./mergeMap":117}],119:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.mergeScan=function(t,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(e){return e.lift(new s(t,r,n))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.accumulator,this.seed,this.concurrent))},u);function u(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}r.MergeScanOperator=s;var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=this.destination,n=void 0;try{n=(0,this.accumulator)(this.acc,e,t)}catch(e){return r.error(e)}this.active++,this._innerSub(n)}else this.buffer.push(e)},l.prototype._innerSub=function(e){var t=new o.SimpleInnerSubscriber(this),r=this.destination;r.add(t);var n=o.innerSubscribe(e,t);n!==t&&r.add(n)},l.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},l.prototype.notifyNext=function(e){var t=this.destination;this.acc=e,this.hasValue=!0,t.next(e)},l.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},l);function l(e,t,r,n){var i=a.call(this,e)||this;return i.accumulator=t,i.acc=r,i.concurrent=n,i.hasValue=!1,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}r.MergeScanSubscriber=c},{"../innerSubscribe":43}],120:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./reduce");r.min=function(r){var e="function"==typeof r?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t};return n.reduce(e)}},{"./reduce":132}],121:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../observable/ConnectableObservable");r.multicast=function(n,i){return function(e){var t;if(t="function"==typeof n?n:function(){return n},"function"==typeof i)return e.lift(new s(t,i));var r=Object.create(e,o.connectableObservableDescriptor);return r.source=e,r.subjectFactory=t,r}};var s=(n.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},n);function n(e,t){this.subjectFactory=e,this.selector=t}r.MulticastOperator=s},{"../observable/ConnectableObservable":44}],122:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../Notification");r.observeOn=function(t,r){return void 0===r&&(r=0),function(e){return e.lift(new u(t,r))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))},a);function a(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}r.ObserveOnOperator=u;var c,l=(c=o.Subscriber,i(h,c),h.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},h.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(h.dispatch,this.delay,new f(e,this.destination)))},h.prototype._next=function(e){this.scheduleMessage(s.Notification.createNext(e))},h.prototype._error=function(e){this.scheduleMessage(s.Notification.createError(e)),this.unsubscribe()},h.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete()),this.unsubscribe()},h);function h(e,t,r){void 0===r&&(r=0);var n=c.call(this,e)||this;return n.scheduler=t,n.delay=r,n}r.ObserveOnSubscriber=l;var f=function(e,t){this.notification=e,this.destination=t};r.ObserveOnMessage=f},{"../Notification":32,"../Subscriber":40}],123:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../observable/from"),s=e("../util/isArray"),u=e("../innerSubscribe");r.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&s.isArray(t[0])&&(t=t[0]),function(e){return e.lift(new a(t))}},r.onErrorResumeNextStatic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r;return 1===e.length&&s.isArray(e[0])&&(e=e[0]),r=e.shift(),o.from(r).lift(new a(e))};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.nextSources))},c);function c(e){this.nextSources=e}var l,h=(l=u.SimpleOuterSubscriber,i(f,l),f.prototype.notifyError=function(){this.subscribeToNextSource()},f.prototype.notifyComplete=function(){this.subscribeToNextSource()},f.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},f.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},f.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new u.SimpleInnerSubscriber(this),r=this.destination;r.add(t);var n=u.innerSubscribe(e,t);n!==t&&r.add(n)}else this.destination.complete()},f);function f(e,t){var r=l.call(this,e)||this;return r.destination=e,r.nextSources=t,r}},{"../innerSubscribe":43,"../observable/from":53,"../util/isArray":206}],124:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.pairwise=function(){return function(e){return e.lift(new s)}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e))},u);function u(){}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},l);function l(e){var t=a.call(this,e)||this;return t.hasPrev=!1,t}},{"../Subscriber":40}],125:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../util/not"),i=e("./filter");r.partition=function(t,r){return function(e){return[i.filter(t,r)(e),i.filter(n.not(t,r))(e)]}}},{"../util/not":218,"./filter":102}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./map");r.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(e){return n.map(function(i,o){return function(e){for(var t=e,r=0;r<o;r++){var n=null!=t?t[i[r]]:void 0;if(void 0===n)return;t=n}return t}}(t,r))(e)}}},{"./map":111}],127:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Subject"),i=e("./multicast");r.publish=function(e){return e?i.multicast(function(){return new n.Subject},e):i.multicast(new n.Subject)}},{"../Subject":38,"./multicast":121}],128:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../BehaviorSubject"),i=e("./multicast");r.publishBehavior=function(t){return function(e){return i.multicast(new n.BehaviorSubject(t))(e)}}},{"../BehaviorSubject":30,"./multicast":121}],129:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../AsyncSubject"),i=e("./multicast");r.publishLast=function(){return function(e){return i.multicast(new n.AsyncSubject)(e)}}},{"../AsyncSubject":29,"./multicast":121}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e("../ReplaySubject"),u=e("./multicast");r.publishReplay=function(e,t,r,n){r&&"function"!=typeof r&&(n=r);var i="function"==typeof r?r:void 0,o=new s.ReplaySubject(e,t,n);return function(e){return u.multicast(function(){return o},i)(e)}}},{"../ReplaySubject":36,"./multicast":121}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../util/isArray"),i=e("../observable/race");r.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&n.isArray(t[0])&&(t=t[0]),e.lift.call(i.race.apply(void 0,[e].concat(t)))}}},{"../observable/race":66,"../util/isArray":206}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("./scan"),o=e("./takeLast"),s=e("./defaultIfEmpty"),u=e("../util/pipe");r.reduce=function(n,t){return 2<=arguments.length?function(e){return u.pipe(i.scan(n,t),o.takeLast(1),s.defaultIfEmpty(t))(e)}:function(e){return u.pipe(i.scan(function(e,t,r){return n(e,t,r+1)}),o.takeLast(1))(e)}}},{"../util/pipe":219,"./defaultIfEmpty":89,"./scan":140,"./takeLast":155}],133:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.refCount=function(){return function(e){return e.lift(new s(e))}};var s=(u.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new c(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},u);function u(e){this.connectable=e}var a,c=(a=o.Subscriber,i(l,a),l.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},l);function l(e,t){var r=a.call(this,e)||this;return r.connectable=t,r}},{"../Subscriber":40}],134:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../observable/empty");r.repeat=function(t){return void 0===t&&(t=-1),function(e){return 0===t?s.empty():t<0?e.lift(new u(-1,e)):e.lift(new u(t-1,e))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.count,this.source))},a);function a(e,t){this.count=e,this.source=t}var c,l=(c=o.Subscriber,i(h,c),h.prototype.complete=function(){if(!this.isStopped){var e=this.source,t=this.count;if(0===t)return c.prototype.complete.call(this);-1<t&&(this.count=t-1),e.subscribe(this._unsubscribeAndRecycle())}},h);function h(e,t,r){var n=c.call(this,e)||this;return n.count=t,n.source=r,n}},{"../Subscriber":40,"../observable/empty":51}],135:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subject"),s=e("../innerSubscribe");r.repeatWhen=function(t){return function(e){return e.lift(new u(t))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.notifier,t))},a);function a(e){this.notifier=e}var c,l=(c=s.SimpleOuterSubscriber,i(h,c),h.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},h.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return c.prototype.complete.call(this)},h.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return c.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},h.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},h.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,c.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},h.prototype.subscribeToRetries=function(){var e;this.notifications=new o.Subject;try{e=(0,this.notifier)(this.notifications)}catch(e){return c.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=s.innerSubscribe(e,new s.SimpleInnerSubscriber(this))},h);function h(e,t,r){var n=c.call(this,e)||this;return n.notifier=t,n.source=r,n.sourceIsBeingSubscribedTo=!0,n}},{"../Subject":38,"../innerSubscribe":43}],136:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.retry=function(t){return void 0===t&&(t=-1),function(e){return e.lift(new s(t,e))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.count,this.source))},u);function u(e,t){this.count=e,this.source=t}var a,c=(a=o.Subscriber,i(l,a),l.prototype.error=function(e){if(!this.isStopped){var t=this.source,r=this.count;if(0===r)return a.prototype.error.call(this,e);-1<r&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}},l);function l(e,t,r){var n=a.call(this,e)||this;return n.count=t,n.source=r,n}},{"../Subscriber":40}],137:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subject"),s=e("../innerSubscribe");r.retryWhen=function(t){return function(e){return e.lift(new u(t,e))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.notifier,this.source))},a);function a(e,t){this.notifier=e,this.source=t}var c,l=(c=s.SimpleOuterSubscriber,i(h,c),h.prototype.error=function(e){if(!this.isStopped){var t=this.errors,r=this.retries,n=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{t=new o.Subject;try{r=(0,this.notifier)(t)}catch(e){return c.prototype.error.call(this,e)}n=s.innerSubscribe(r,new s.SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=t,this.retries=r,this.retriesSubscription=n,t.next(e)}},h.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},h.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},h);function h(e,t,r){var n=c.call(this,e)||this;return n.notifier=t,n.source=r,n}},{"../Subject":38,"../innerSubscribe":43}],138:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.sample=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){var r=new c(e),n=t.subscribe(r);return n.add(o.innerSubscribe(this.notifier,new o.SimpleInnerSubscriber(r))),n},u);function u(e){this.notifier=e}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype._next=function(e){this.value=e,this.hasValue=!0},l.prototype.notifyNext=function(){this.emitValue()},l.prototype.notifyComplete=function(){this.emitValue()},l.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},l);function l(){var e=null!==a&&a.apply(this,arguments)||this;return e.hasValue=!1,e}},{"../innerSubscribe":43}],139:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../scheduler/async");r.sampleTime=function(t,r){return void 0===r&&(r=s.async),function(e){return e.lift(new u(t,r))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.period,this.scheduler))},a);function a(e,t){this.period=e,this.scheduler=t}var c,l=(c=o.Subscriber,i(h,c),h.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},h.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},h);function h(e,t,r){var n=c.call(this,e)||this;return n.period=t,n.scheduler=r,n.hasValue=!1,n.add(r.schedule(f,t,{subscriber:n,period:t})),n}function f(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}},{"../Subscriber":40,"../scheduler/async":192}],140:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.scan=function(t,r){var n=!1;return 2<=arguments.length&&(n=!0),function(e){return e.lift(new s(t,r,n))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.accumulator,this.seed,this.hasSeed))},u);function u(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}var a,c=(a=o.Subscriber,i(l,a),Object.defineProperty(l.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),l.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},l.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},l);function l(e,t,r,n){var i=a.call(this,e)||this;return i.accumulator=t,i._seed=r,i.hasSeed=n,i.index=0,i}},{"../Subscriber":40}],141:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.sequenceEqual=function(t,r){return function(e){return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.compareTo,this.comparator))},u);function u(e,t){this.compareTo=e,this.comparator=t}r.SequenceEqualOperator=s;var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},l.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},l.prototype.checkValues=function(){for(var e=this._a,t=this._b,r=this.comparator;0<e.length&&0<t.length;){var n=e.shift(),i=t.shift(),o=!1;try{o=r?r(n,i):n===i}catch(e){this.destination.error(e)}o||this.emit(!1)}},l.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},l.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},l.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},l);function l(e,t,r){var n=a.call(this,e)||this;return n.compareTo=t,n.comparator=r,n._a=[],n._b=[],n._oneComplete=!1,n.destination.add(t.subscribe(new f(e,n))),n}r.SequenceEqualSubscriber=c;var h,f=(h=o.Subscriber,i(p,h),p.prototype._next=function(e){this.parent.nextB(e)},p.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},p.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},p);function p(e,t){var r=h.call(this,e)||this;return r.parent=t,r}},{"../Subscriber":40}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./multicast"),i=e("./refCount"),o=e("../Subject");function s(){return new o.Subject}r.share=function(){return function(e){return i.refCount()(n.multicast(s)(e))}}},{"../Subject":38,"./multicast":121,"./refCount":133}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var f=e("../ReplaySubject");r.shareReplay=function(e,t,r){var n;return n=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:r},function(e){return e.lift(function(e){var r,n,t=e.bufferSize,i=void 0===t?Number.POSITIVE_INFINITY:t,o=e.windowTime,s=void 0===o?Number.POSITIVE_INFINITY:o,u=e.refCount,a=e.scheduler,c=0,l=!1,h=!1;return function(e){var t;c++,!r||l?(l=!1,r=new f.ReplaySubject(i,s,a),t=r.subscribe(this),n=e.subscribe({next:function(e){r.next(e)},error:function(e){l=!0,r.error(e)},complete:function(){h=!0,n=void 0,r.complete()}})):t=r.subscribe(this),this.add(function(){c--,t.unsubscribe(),n&&!h&&u&&0===c&&(n.unsubscribe(),r=n=void 0)})}}(n))}}},{"../ReplaySubject":36}],144:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../util/EmptyError");r.single=function(t){return function(e){return e.lift(new u(t,e))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.predicate,this.source))},a);function a(e,t){this.predicate=e,this.source=t}var c,l=(c=o.Subscriber,i(h,c),h.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},h.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},h.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},h.prototype._complete=function(){var e=this.destination;0<this.index?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new s.EmptyError)},h);function h(e,t,r){var n=c.call(this,e)||this;return n.predicate=t,n.source=r,n.seenValue=!1,n.index=0,n}},{"../Subscriber":40,"../util/EmptyError":198}],145:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.skip=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},u);function u(e){this.total=e}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},l);function l(e,t){var r=a.call(this,e)||this;return r.total=t,r.count=0,r}},{"../Subscriber":40}],146:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../util/ArgumentOutOfRangeError");r.skipLast=function(t){return function(e){return e.lift(new u(t))}};var u=(a.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new o.Subscriber(e)):t.subscribe(new l(e,this._skipCount))},a);function a(e){if(this._skipCount=e,this._skipCount<0)throw new s.ArgumentOutOfRangeError}var c,l=(c=o.Subscriber,i(h,c),h.prototype._next=function(e){var t=this._skipCount,r=this._count++;if(r<t)this._ring[r]=e;else{var n=r%t,i=this._ring,o=i[n];i[n]=e,this.destination.next(o)}},h);function h(e,t){var r=c.call(this,e)||this;return r._skipCount=t,r._count=0,r._ring=new Array(t),r}},{"../Subscriber":40,"../util/ArgumentOutOfRangeError":197}],147:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.skipUntil=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier))},u);function u(e){this.notifier=e}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype._next=function(e){this.hasValue&&a.prototype._next.call(this,e)},l.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},l.prototype.notifyComplete=function(){},l);function l(e,t){var r=a.call(this,e)||this;r.hasValue=!1;var n=new o.SimpleInnerSubscriber(r);r.add(n),r.innerSubscription=n;var i=o.innerSubscribe(t,n);return i!==n&&(r.add(i),r.innerSubscription=i),r}},{"../innerSubscribe":43}],148:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.skipWhile=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate))},u);function u(e){this.predicate=e}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},l.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},l);function l(e,t){var r=a.call(this,e)||this;return r.predicate=t,r.skipping=!0,r.index=0,r}},{"../Subscriber":40}],149:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../observable/concat"),i=e("../util/isScheduler");r.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return i.isScheduler(r)?(t.pop(),function(e){return n.concat(t,e,r)}):function(e){return n.concat(t,e)}}},{"../observable/concat":49,"../util/isScheduler":216}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../observable/SubscribeOnObservable");r.subscribeOn=function(t,r){return void 0===r&&(r=0),function(e){return e.lift(new i(t,r))}};var i=(o.prototype.call=function(e,t){return new n.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},o);function o(e,t){this.scheduler=e,this.delay=t}},{"../observable/SubscribeOnObservable":45}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./switchMap"),i=e("../util/identity");r.switchAll=function(){return n.switchMap(i.identity)}},{"../util/identity":205,"./switchMap":152}],152:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=e("./map"),u=e("../observable/from"),o=e("../innerSubscribe");r.switchMap=function t(i,o){return"function"==typeof o?function(e){return e.pipe(t(function(r,n){return u.from(i(r,n)).pipe(s.map(function(e,t){return o(r,e,n,t)}))}))}:function(e){return e.lift(new a(i))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))},c);function c(e){this.project=e}var l,h=(l=o.SimpleOuterSubscriber,i(f,l),f.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t)},f.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var r=new o.SimpleInnerSubscriber(this),n=this.destination;n.add(r),this.innerSubscription=o.innerSubscribe(e,r),this.innerSubscription!==r&&n.add(this.innerSubscription)},f.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||l.prototype._complete.call(this),this.unsubscribe()},f.prototype._unsubscribe=function(){this.innerSubscription=void 0},f.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&l.prototype._complete.call(this)},f.prototype.notifyNext=function(e){this.destination.next(e)},f);function f(e,t){var r=l.call(this,e)||this;return r.project=t,r.index=0,r}},{"../innerSubscribe":43,"../observable/from":53,"./map":111}],153:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./switchMap");r.switchMapTo=function(e,t){return t?n.switchMap(function(){return e},t):n.switchMap(function(){return e})}},{"./switchMap":152}],154:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../util/ArgumentOutOfRangeError"),u=e("../observable/empty");r.take=function(t){return function(e){return 0===t?u.empty():e.lift(new a(t))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.total))},c);function c(e){if(this.total=e,this.total<0)throw new s.ArgumentOutOfRangeError}var l,h=(l=o.Subscriber,i(f,l),f.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},f);function f(e,t){var r=l.call(this,e)||this;return r.total=t,r.count=0,r}},{"../Subscriber":40,"../observable/empty":51,"../util/ArgumentOutOfRangeError":197}],155:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../util/ArgumentOutOfRangeError"),u=e("../observable/empty");r.takeLast=function(t){return function(e){return 0===t?u.empty():e.lift(new a(t))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.total))},c);function c(e){if(this.total=e,this.total<0)throw new s.ArgumentOutOfRangeError}var l,h=(l=o.Subscriber,i(f,l),f.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},f.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=t++%r;e.next(n[o])}e.complete()},f);function f(e,t){var r=l.call(this,e)||this;return r.total=t,r.ring=new Array,r.count=0,r}},{"../Subscriber":40,"../observable/empty":51,"../util/ArgumentOutOfRangeError":197}],156:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../innerSubscribe");r.takeUntil=function(t){return function(e){return e.lift(new s(t))}};var s=(u.prototype.call=function(e,t){var r=new c(e),n=o.innerSubscribe(this.notifier,new o.SimpleInnerSubscriber(r));return n&&!r.seenValue?(r.add(n),t.subscribe(r)):r},u);function u(e){this.notifier=e}var a,c=(a=o.SimpleOuterSubscriber,i(l,a),l.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},l.prototype.notifyComplete=function(){},l);function l(e){var t=a.call(this,e)||this;return t.seenValue=!1,t}},{"../innerSubscribe":43}],157:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.takeWhile=function(t,r){return void 0===r&&(r=!1),function(e){return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.inclusive))},u);function u(e,t){this.predicate=e,this.inclusive=t}var a,c=(a=o.Subscriber,i(l,a),l.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void r.error(e)}this.nextOrComplete(e,t)},l.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):(this.inclusive&&r.next(e),r.complete())},l);function l(e,t,r){var n=a.call(this,e)||this;return n.predicate=t,n.inclusive=r,n.index=0,n}},{"../Subscriber":40}],158:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../util/noop"),u=e("../util/isFunction");r.tap=function(t,r,n){return function(e){return e.lift(new a(t,r,n))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.nextOrObserver,this.error,this.complete))},c);function c(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}var l,h=(l=o.Subscriber,i(f,l),f.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},f.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},f.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},f);function f(e,t,r,n){var i=l.call(this,e)||this;return i._tapNext=s.noop,i._tapError=s.noop,i._tapComplete=s.noop,i._tapError=r||s.noop,i._tapComplete=n||s.noop,u.isFunction(t)?(i._context=i)._tapNext=t:t&&(i._context=t,i._tapNext=t.next||s.noop,i._tapError=t.error||s.noop,i._tapComplete=t.complete||s.noop),i}},{"../Subscriber":40,"../util/isFunction":209,"../util/noop":217}],159:[function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../innerSubscribe");n.defaultThrottleConfig={leading:!0,trailing:!1},n.throttle=function(t,r){return void 0===r&&(r=n.defaultThrottleConfig),function(e){return e.lift(new s(t,!!r.leading,!!r.trailing))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector,this.leading,this.trailing))},u);function u(e,t,r){this.durationSelector=e,this.leading=t,this.trailing=r}var a,c=(a=o.SimpleOuterSubscriber,r(l,a),l.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},l.prototype.send=function(){var e=this._hasValue,t=this._sendValue;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0},l.prototype.throttle=function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=o.innerSubscribe(t,new o.SimpleInnerSubscriber(this)))},l.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},l.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},l.prototype.notifyNext=function(){this.throttlingDone()},l.prototype.notifyComplete=function(){this.throttlingDone()},l);function l(e,t,r,n){var i=a.call(this,e)||this;return i.destination=e,i.durationSelector=t,i._leading=r,i._trailing=n,i._hasValue=!1,i}},{"../innerSubscribe":43}],160:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),s=e("../scheduler/async"),u=e("./throttle");r.throttleTime=function(t,r,n){return void 0===r&&(r=s.async),void 0===n&&(n=u.defaultThrottleConfig),function(e){return e.lift(new a(t,r,n.leading,n.trailing))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.duration,this.scheduler,this.leading,this.trailing))},c);function c(e,t,r,n){this.duration=e,this.scheduler=t,this.leading=r,this.trailing=n}var l,h=(l=o.Subscriber,i(f,l),f.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(p,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},f.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},f.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},f);function f(e,t,r,n,i){var o=l.call(this,e)||this;return o.duration=t,o.scheduler=r,o.leading=n,o.trailing=i,o._hasTrailingValue=!1,o._trailingValue=null,o}function p(e){e.subscriber.clearThrottle()}},{"../Subscriber":40,"../scheduler/async":192,"./throttle":159}],161:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../util/EmptyError"),s=e("../Subscriber");r.throwIfEmpty=function(t){return void 0===t&&(t=f),function(e){return e.lift(new u(t))}};var u=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.errorFactory))},a);function a(e){this.errorFactory=e}var c,l=(c=s.Subscriber,i(h,c),h.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},h.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},h);function h(e,t){var r=c.call(this,e)||this;return r.errorFactory=t,r.hasValue=!1,r}function f(){return new o.EmptyError}},{"../Subscriber":40,"../util/EmptyError":198}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("../scheduler/async"),o=e("./scan"),s=e("../observable/defer"),u=e("./map");r.timeInterval=function(n){return void 0===n&&(n=i.async),function(e){return s.defer(function(){return e.pipe(o.scan(function(e,t){var r=e.current;return{value:t,current:n.now(),last:r}},{current:n.now(),value:void 0,last:void 0}),u.map(function(e){var t=e.current,r=e.last,n=e.value;return new a(n,t-r)}))})}};var a=function(e,t){this.value=e,this.interval=t};r.TimeInterval=a},{"../observable/defer":50,"../scheduler/async":192,"./map":111,"./scan":140}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../scheduler/async"),i=e("../util/TimeoutError"),o=e("./timeoutWith"),s=e("../observable/throwError");r.timeout=function(e,t){return void 0===t&&(t=n.async),o.timeoutWith(e,s.throwError(new i.TimeoutError),t)}},{"../observable/throwError":68,"../scheduler/async":192,"../util/TimeoutError":201,"./timeoutWith":164}],164:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=e("../scheduler/async"),u=e("../util/isDate"),o=e("../innerSubscribe");r.timeoutWith=function(n,i,o){return void 0===o&&(o=s.async),function(e){var t=u.isDate(n),r=t?+n-o.now():Math.abs(n);return e.lift(new a(r,t,i,o))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},c);function c(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}var l,h=(l=o.SimpleOuterSubscriber,i(f,l),f.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(o.innerSubscribe(t,new o.SimpleInnerSubscriber(e)))},f.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(f.dispatchTimeout,this.waitFor,this))},f.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),l.prototype._next.call(this,e)},f.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},f);function f(e,t,r,n,i){var o=l.call(this,e)||this;return o.absoluteTimeout=t,o.waitFor=r,o.withObservable=n,o.scheduler=i,o.scheduleTimeout(),o}},{"../innerSubscribe":43,"../scheduler/async":192,"../util/isDate":208}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../scheduler/async"),i=e("./map");r.timestamp=function(t){return void 0===t&&(t=n.async),i.map(function(e){return new o(e,t.now())})};var o=function(e,t){this.value=e,this.timestamp=t};r.Timestamp=o},{"../scheduler/async":192,"./map":111}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./reduce");function i(e,t,r){return 0===r?[t]:(e.push(t),e)}r.toArray=function(){return n.reduce(i,[])}},{"./reduce":132}],167:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subject"),s=e("../innerSubscribe");r.window=function(t){return function(e){return e.lift(new u(t))}};var u=(a.prototype.call=function(e,t){var r=new l(e),n=t.subscribe(r);return n.closed||r.add(s.innerSubscribe(this.windowBoundaries,new s.SimpleInnerSubscriber(r))),n},a);function a(e){this.windowBoundaries=e}var c,l=(c=s.SimpleOuterSubscriber,i(h,c),h.prototype.notifyNext=function(){this.openWindow()},h.prototype.notifyError=function(e){this._error(e)},h.prototype.notifyComplete=function(){this._complete()},h.prototype._next=function(e){this.window.next(e)},h.prototype._error=function(e){this.window.error(e),this.destination.error(e)},h.prototype._complete=function(){this.window.complete(),this.destination.complete()},h.prototype._unsubscribe=function(){this.window=null},h.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,r=this.window=new o.Subject;t.next(r)},h);function h(e){var t=c.call(this,e)||this;return t.window=new o.Subject,e.next(t.window),t}},{"../Subject":38,"../innerSubscribe":43}],168:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber"),c=e("../Subject");r.windowCount=function(t,r){return void 0===r&&(r=0),function(e){return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new l(e,this.windowSize,this.startWindowEvery))},u);function u(e,t){this.windowSize=e,this.startWindowEvery=t}var a,l=(a=o.Subscriber,i(h,a),h.prototype._next=function(e){for(var t=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(e);var u=this.count-n+1;if(0<=u&&u%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var a=new c.Subject;i.push(a),r.next(a)}},h.prototype._error=function(e){var t=this.windows;if(t)for(;0<t.length&&!this.closed;)t.shift().error(e);this.destination.error(e)},h.prototype._complete=function(){var e=this.windows;if(e)for(;0<e.length&&!this.closed;)e.shift().complete();this.destination.complete()},h.prototype._unsubscribe=function(){this.count=0,this.windows=null},h);function h(e,t,r){var n=a.call(this,e)||this;return n.destination=e,n.windowSize=t,n.startWindowEvery=r,n.windows=[new c.Subject],n.count=0,e.next(n.windows[0]),n}},{"../Subject":38,"../Subscriber":40}],169:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subject"),s=e("../scheduler/async"),u=e("../Subscriber"),a=e("../util/isNumeric"),c=e("../util/isScheduler");r.windowTime=function(t){var r=s.async,n=null,i=Number.POSITIVE_INFINITY;return c.isScheduler(arguments[3])&&(r=arguments[3]),c.isScheduler(arguments[2])?r=arguments[2]:a.isNumeric(arguments[2])&&(i=Number(arguments[2])),c.isScheduler(arguments[1])?r=arguments[1]:a.isNumeric(arguments[1])&&(n=Number(arguments[1])),function(e){return e.lift(new l(t,n,i,r))}};var l=(h.prototype.call=function(e,t){return t.subscribe(new v(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},h);function h(e,t,r,n){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=n}var f,p=(f=o.Subject,i(b,f),b.prototype.next=function(e){this._numberOfNextedValues++,f.prototype.next.call(this,e)},Object.defineProperty(b.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),b);function b(){var e=null!==f&&f.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}var d,v=(d=u.Subscriber,i(y,d),y.prototype._next=function(e){for(var t=this.windows,r=t.length,n=0;n<r;n++){var i=t[n];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},y.prototype._error=function(e){for(var t=this.windows;0<t.length;)t.shift().error(e);this.destination.error(e)},y.prototype._complete=function(){for(var e=this.windows;0<e.length;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},y.prototype.openWindow=function(){var e=new p;return this.windows.push(e),this.destination.next(e),e},y.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},y);function y(e,t,r,n,i){var o=d.call(this,e)||this;o.destination=e,o.windowTimeSpan=t,o.windowCreationInterval=r,o.maxWindowSize=n,o.scheduler=i,o.windows=[];var s=o.openWindow();if(null!==r&&0<=r){var u={subscriber:o,window:s,context:null},a={windowTimeSpan:t,windowCreationInterval:r,subscriber:o,scheduler:i};o.add(i.schedule(g,t,u)),o.add(i.schedule(m,r,a))}else{var c={subscriber:o,window:s,windowTimeSpan:t};o.add(i.schedule(_,t,c))}return o}function _(e){var t=e.subscriber,r=e.windowTimeSpan,n=e.window;n&&t.closeWindow(n),e.window=t.openWindow(),this.schedule(e,r)}function m(e){var t=e.windowTimeSpan,r=e.subscriber,n=e.scheduler,i=e.windowCreationInterval,o=r.openWindow(),s={action:this,subscription:null},u={subscriber:r,window:o,context:s};s.subscription=n.schedule(g,t,u),this.add(s.subscription),this.schedule(e,i)}function g(e){var t=e.subscriber,r=e.window,n=e.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(r)}},{"../Subject":38,"../Subscriber":40,"../scheduler/async":192,"../util/isNumeric":212,"../util/isScheduler":216}],170:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var l=e("../Subject"),h=e("../Subscription"),o=e("../OuterSubscriber"),f=e("../util/subscribeToResult");r.windowToggle=function(t,r){return function(e){return e.lift(new s(t,r))}};var s=(u.prototype.call=function(e,t){return t.subscribe(new c(e,this.openings,this.closingSelector))},u);function u(e,t){this.openings=e,this.closingSelector=t}var a,c=(a=o.OuterSubscriber,i(p,a),p.prototype._next=function(e){var t=this.contexts;if(t)for(var r=t.length,n=0;n<r;n++)t[n].window.next(e)},p.prototype._error=function(e){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,n=-1;++n<r;){var i=t[n];i.window.error(e),i.subscription.unsubscribe()}a.prototype._error.call(this,e)},p.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.complete(),n.subscription.unsubscribe()}a.prototype._complete.call(this)},p.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},p.prototype.notifyNext=function(e,t,r,n,i){if(e===this.openings){var o=void 0;try{o=(0,this.closingSelector)(t)}catch(e){return this.error(e)}var s=new l.Subject,u=new h.Subscription,a={window:s,subscription:u};this.contexts.push(a);var c=f.subscribeToResult(this,o,a);c.closed?this.closeWindow(this.contexts.length-1):(c.context=a,u.add(c)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(e))},p.prototype.notifyError=function(e){this.error(e)},p.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},p.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,r=t[e],n=r.window,i=r.subscription;t.splice(e,1),n.complete(),i.unsubscribe()}},p);function p(e,t,r){var n=a.call(this,e)||this;return n.openings=t,n.closingSelector=r,n.contexts=[],n.add(n.openSubscription=f.subscribeToResult(n,t,t)),n}},{"../OuterSubscriber":35,"../Subject":38,"../Subscription":41,"../util/subscribeToResult":225}],171:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subject"),s=e("../OuterSubscriber"),u=e("../util/subscribeToResult");r.windowWhen=function(t){return function(e){return e.lift(new a(t))}};var a=(c.prototype.call=function(e,t){return t.subscribe(new h(e,this.closingSelector))},c);function c(e){this.closingSelector=e}var l,h=(l=s.OuterSubscriber,i(f,l),f.prototype.notifyNext=function(e,t,r,n,i){this.openWindow(i)},f.prototype.notifyError=function(e){this._error(e)},f.prototype.notifyComplete=function(e){this.openWindow(e)},f.prototype._next=function(e){this.window.next(e)},f.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},f.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},f.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},f.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var r,n=this.window=new o.Subject;this.destination.next(n);try{r=(0,this.closingSelector)()}catch(e){return this.destination.error(e),void this.window.error(e)}this.add(this.closingNotification=u.subscribeToResult(this,r))},f);function f(e,t){var r=l.call(this,e)||this;return r.destination=e,r.closingSelector=t,r.openWindow(),r}},{"../OuterSubscriber":35,"../Subject":38,"../util/subscribeToResult":225}],172:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=e("../OuterSubscriber"),u=e("../util/subscribeToResult");r.withLatestFrom=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(e){var t;"function"==typeof n[n.length-1]&&(t=n.pop());var r=n;return e.lift(new s(r,t))}};var s=(a.prototype.call=function(e,t){return t.subscribe(new l(e,this.observables,this.project))},a);function a(e,t){this.observables=e,this.project=t}var c,l=(c=o.OuterSubscriber,i(h,c),h.prototype.notifyNext=function(e,t,r){this.values[r]=t;var n=this.toRespond;if(0<n.length){var i=n.indexOf(r);-1!==i&&n.splice(i,1)}},h.prototype.notifyComplete=function(){},h.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},h.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},h);function h(e,t,r){var n=c.call(this,e)||this;n.observables=t,n.project=r,n.toRespond=[];var i=t.length;n.values=new Array(i);for(var o=0;o<i;o++)n.toRespond.push(o);for(o=0;o<i;o++){var s=t[o];n.add(u.subscribeToResult(n,s,void 0,o))}return n}},{"../OuterSubscriber":35,"../util/subscribeToResult":225}],173:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../observable/zip");r.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(n.zip.apply(void 0,[e].concat(t)))}}},{"../observable/zip":71}],174:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../observable/zip");r.zipAll=function(t){return function(e){return e.lift(new n.ZipOperator(t))}}},{"../observable/zip":71}],175:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Observable"),s=e("../Subscription");r.scheduleArray=function(n,i){return new o.Observable(function(e){var t=new s.Subscription,r=0;return t.add(i.schedule(function(){r!==n.length?(e.next(n[r++]),e.closed||t.add(this.schedule())):e.complete()})),t})}},{"../Observable":33,"../Subscription":41}],176:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable"),o=e("../Subscription"),s=e("../symbol/iterator");r.scheduleIterable=function(t,r){if(!t)throw new Error("Iterable cannot be null");return new n.Observable(function(n){var i,e=new o.Subscription;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(r.schedule(function(){i=t[s.iterator](),e.add(r.schedule(function(){if(!n.closed){var e,t;try{var r=i.next();e=r.value,t=r.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),e})}},{"../Observable":33,"../Subscription":41,"../symbol/iterator":194}],177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Observable"),s=e("../Subscription"),u=e("../symbol/observable");r.scheduleObservable=function(n,i){return new o.Observable(function(t){var r=new s.Subscription;return r.add(i.schedule(function(){var e=n[u.observable]();r.add(e.subscribe({next:function(e){r.add(i.schedule(function(){return t.next(e)}))},error:function(e){r.add(i.schedule(function(){return t.error(e)}))},complete:function(){r.add(i.schedule(function(){return t.complete()}))}}))})),r})}},{"../Observable":33,"../Subscription":41,"../symbol/observable":195}],178:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("../Observable"),o=e("../Subscription");r.schedulePromise=function(e,n){return new i.Observable(function(t){var r=new o.Subscription;return r.add(n.schedule(function(){return e.then(function(e){r.add(n.schedule(function(){t.next(e),r.add(n.schedule(function(){return t.complete()}))}))},function(e){r.add(n.schedule(function(){return t.error(e)}))})})),r})}},{"../Observable":33,"../Subscription":41}],179:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./scheduleObservable"),i=e("./schedulePromise"),o=e("./scheduleArray"),s=e("./scheduleIterable"),u=e("../util/isInteropObservable"),a=e("../util/isPromise"),c=e("../util/isArrayLike"),l=e("../util/isIterable");r.scheduled=function(e,t){if(null!=e){if(u.isInteropObservable(e))return n.scheduleObservable(e,t);if(a.isPromise(e))return i.schedulePromise(e,t);if(c.isArrayLike(e))return o.scheduleArray(e,t);if(l.isIterable(e)||"string"==typeof e)return s.scheduleIterable(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}},{"../util/isArrayLike":207,"../util/isInteropObservable":210,"../util/isIterable":211,"../util/isPromise":215,"./scheduleArray":175,"./scheduleIterable":176,"./scheduleObservable":177,"./schedulePromise":178}],180:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("../Subscription"),u=(o=s.Subscription,i(a,o),a.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},a);function a(e,t){return o.call(this)||this}r.Action=u},{"../Subscription":41}],181:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./AsyncAction"),u=(o=s.AsyncAction,i(a,o),a.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&0<r?o.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},a.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return o.prototype.recycleAsyncId.call(this,e,t,r);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)},a);function a(e,t){var r=o.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}r.AnimationFrameAction=u},{"./AsyncAction":185}],182:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./AsyncScheduler"),u=(o=s.AsyncScheduler,i(a,o),a.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},a);function a(){return null!==o&&o.apply(this,arguments)||this}r.AnimationFrameScheduler=u},{"./AsyncScheduler":186}],183:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("../util/Immediate"),u=e("./AsyncAction"),a=(o=u.AsyncAction,i(c,o),c.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&0<r?o.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=s.Immediate.setImmediate(e.flush.bind(e,null))))},c.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return o.prototype.recycleAsyncId.call(this,e,t,r);0===e.actions.length&&(s.Immediate.clearImmediate(t),e.scheduled=void 0)},c);function c(e,t){var r=o.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}r.AsapAction=a},{"../util/Immediate":199,"./AsyncAction":185}],184:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./AsyncScheduler"),u=(o=s.AsyncScheduler,i(a,o),a.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},a);function a(){return null!==o&&o.apply(this,arguments)||this}r.AsapScheduler=u},{"./AsyncScheduler":186}],185:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./Action"),u=(o=s.Action,i(a,o),a.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},a.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),setInterval(e.flush.bind(e,this),r)},a.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)},a.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},a.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},a.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},a);function a(e,t){var r=o.call(this,e,t)||this;return r.scheduler=e,r.work=t,r.pending=!1,r}r.AsyncAction=u},{"./Action":180}],186:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("../Scheduler"),u=(o=s.Scheduler,i(a,o),a.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),a.delegate&&a.delegate!==this?a.delegate.schedule(e,t,r):o.prototype.schedule.call(this,e,t,r)},a.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},a);function a(e,t){void 0===t&&(t=s.Scheduler.now);var r=o.call(this,e,function(){return a.delegate&&a.delegate!==r?a.delegate.now():t()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}r.AsyncScheduler=u},{"../Scheduler":37}],187:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./AsyncAction"),u=(o=s.AsyncAction,i(a,o),a.prototype.schedule=function(e,t){return void 0===t&&(t=0),0<t?o.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},a.prototype.execute=function(e,t){return 0<t||this.closed?o.prototype.execute.call(this,e,t):this._execute(e,t)},a.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?o.prototype.requestAsyncId.call(this,e,t,r):e.flush(this)},a);function a(e,t){var r=o.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}r.QueueAction=u},{"./AsyncAction":185}],188:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./AsyncScheduler"),u=(o=s.AsyncScheduler,i(a,o),a);function a(){return null!==o&&o.apply(this,arguments)||this}r.QueueScheduler=u},{"./AsyncScheduler":186}],189:[function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o,s=e("./AsyncAction"),u=e("./AsyncScheduler"),a=(o=u.AsyncScheduler,i(c,o),c.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},c.frameTimeFactor=10,c);function c(e,t){void 0===e&&(e=h),void 0===t&&(t=Number.POSITIVE_INFINITY);var r=o.call(this,e,function(){return r.frame})||this;return r.maxFrames=t,r.frame=0,r.index=-1,r}r.VirtualTimeScheduler=a;var l,h=(l=s.AsyncAction,i(f,l),f.prototype.schedule=function(e,t){if(void 0===t&&(t=0),!this.id)return l.prototype.schedule.call(this,e,t);this.active=!1;var r=new f(this.scheduler,this.work);return this.add(r),r.schedule(e,t)},f.prototype.requestAsyncId=function(e,t,r){void 0===r&&(r=0),this.delay=e.frame+r;var n=e.actions;return n.push(this),n.sort(f.sortActions),!0},f.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},f.prototype._execute=function(e,t){if(!0===this.active)return l.prototype._execute.call(this,e,t)},f.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},f);function f(e,t,r){void 0===r&&(r=e.index+=1);var n=l.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.index=r,n.active=!0,n.index=e.index=r,n}r.VirtualAction=h},{"./AsyncAction":185,"./AsyncScheduler":186}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./AnimationFrameAction"),i=e("./AnimationFrameScheduler");r.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),r.animationFrame=r.animationFrameScheduler},{"./AnimationFrameAction":181,"./AnimationFrameScheduler":182}],191:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./AsapAction"),i=e("./AsapScheduler");r.asapScheduler=new i.AsapScheduler(n.AsapAction),r.asap=r.asapScheduler},{"./AsapAction":183,"./AsapScheduler":184}],192:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./AsyncAction"),i=e("./AsyncScheduler");r.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),r.async=r.asyncScheduler},{"./AsyncAction":185,"./AsyncScheduler":186}],193:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./QueueAction"),i=e("./QueueScheduler");r.queueScheduler=new i.QueueScheduler(n.QueueAction),r.queue=r.queueScheduler},{"./QueueAction":187,"./QueueScheduler":188}],194:[function(e,t,r){"use strict";function n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(r,"__esModule",{value:!0}),r.getSymbolIterator=n,r.iterator=n(),r.$$iterator=r.iterator},{}],195:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},{}],196:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),r.$$rxSubscriber=r.rxSubscriber},{}],197:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(i.prototype=Object.create(Error.prototype),i);function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}r.ArgumentOutOfRangeError=n},{}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(i.prototype=Object.create(Error.prototype),i);function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}r.EmptyError=n},{}],199:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=1,i=Promise.resolve(),o={};function s(e){return e in o&&(delete o[e],!0)}r.Immediate={setImmediate:function(e){var t=n++;return o[t]=!0,i.then(function(){return s(t)&&e()}),t},clearImmediate:function(e){s(e)}},r.TestTools={pending:function(){return Object.keys(o).length}}},{}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(i.prototype=Object.create(Error.prototype),i);function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}r.ObjectUnsubscribedError=n},{}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(i.prototype=Object.create(Error.prototype),i);function i(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}r.TimeoutError=n},{}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(i.prototype=Object.create(Error.prototype),i);function i(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}r.UnsubscriptionError=n},{}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../Subscriber");r.canReportError=function(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;e=n&&n instanceof o.Subscriber?n:null}return!0}},{"../Subscriber":40}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hostReportError=function(e){setTimeout(function(){throw e},0)}},{}],205:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.identity=function(e){return e}},{}],206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},{}],207:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},{}],208:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},{}],209:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isFunction=function(e){return"function"==typeof e}},{}],210:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../symbol/observable");r.isInteropObservable=function(e){return e&&"function"==typeof e[n.observable]}},{"../symbol/observable":195}],211:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../symbol/iterator");r.isIterable=function(e){return e&&"function"==typeof e[n.iterator]}},{"../symbol/iterator":194}],212:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./isArray");r.isNumeric=function(e){return!n.isArray(e)&&0<=e-parseFloat(e)+1}},{"./isArray":206}],213:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObject=function(e){return null!==e&&"object"==typeof e}},{}],214:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Observable");r.isObservable=function(e){return!!e&&(e instanceof n.Observable||"function"==typeof e.lift&&"function"==typeof e.subscribe)}},{"../Observable":33}],215:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPromise=function(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},{}],216:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isScheduler=function(e){return e&&"function"==typeof e.schedule}},{}],217:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noop=function(){}},{}],218:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.not=function(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}},{}],219:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./identity");function i(t){return 0===t.length?n.identity:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}}r.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)},r.pipeFromArray=i},{"./identity":205}],220:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./subscribeToArray"),i=e("./subscribeToPromise"),o=e("./subscribeToIterable"),s=e("./subscribeToObservable"),u=e("./isArrayLike"),a=e("./isPromise"),c=e("./isObject"),l=e("../symbol/iterator"),h=e("../symbol/observable");r.subscribeTo=function(e){if(e&&"function"==typeof e[h.observable])return s.subscribeToObservable(e);if(u.isArrayLike(e))return n.subscribeToArray(e);if(a.isPromise(e))return i.subscribeToPromise(e);if(e&&"function"==typeof e[l.iterator])return o.subscribeToIterable(e);var t=c.isObject(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},{"../symbol/iterator":194,"../symbol/observable":195,"./isArrayLike":207,"./isObject":213,"./isPromise":215,"./subscribeToArray":221,"./subscribeToIterable":222,"./subscribeToObservable":223,"./subscribeToPromise":224}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.subscribeToArray=function(n){return function(e){for(var t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()}}},{}],222:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("../symbol/iterator");r.subscribeToIterable=function(n){return function(t){for(var e=n[i.iterator]();;){var r=void 0;try{r=e.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t}}},{"../symbol/iterator":194}],223:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../symbol/observable");r.subscribeToObservable=function(r){return function(e){var t=r[n.observable]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}}},{"../symbol/observable":195}],224:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./hostReportError");r.subscribeToPromise=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,n.hostReportError),t}}},{"./hostReportError":204}],225:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../InnerSubscriber"),s=e("./subscribeTo"),u=e("../Observable");r.subscribeToResult=function(e,t,r,n,i){if(void 0===i&&(i=new o.InnerSubscriber(e,r,n)),!i.closed)return t instanceof u.Observable?t.subscribe(i):s.subscribeTo(t)(i)}},{"../InnerSubscriber":31,"../Observable":33,"./subscribeTo":220}],226:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../Subscriber"),i=e("../symbol/rxSubscriber"),o=e("../Observer");r.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(o.empty)}},{"../Observer":34,"../Subscriber":40,"../symbol/rxSubscriber":196}],227:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../internal/operators/audit");r.audit=n.audit;var i=e("../internal/operators/auditTime");r.auditTime=i.auditTime;var o=e("../internal/operators/buffer");r.buffer=o.buffer;var s=e("../internal/operators/bufferCount");r.bufferCount=s.bufferCount;var u=e("../internal/operators/bufferTime");r.bufferTime=u.bufferTime;var a=e("../internal/operators/bufferToggle");r.bufferToggle=a.bufferToggle;var c=e("../internal/operators/bufferWhen");r.bufferWhen=c.bufferWhen;var l=e("../internal/operators/catchError");r.catchError=l.catchError;var h=e("../internal/operators/combineAll");r.combineAll=h.combineAll;var f=e("../internal/operators/combineLatest");r.combineLatest=f.combineLatest;var p=e("../internal/operators/concat");r.concat=p.concat;var b=e("../internal/operators/concatAll");r.concatAll=b.concatAll;var d=e("../internal/operators/concatMap");r.concatMap=d.concatMap;var v=e("../internal/operators/concatMapTo");r.concatMapTo=v.concatMapTo;var y=e("../internal/operators/count");r.count=y.count;var _=e("../internal/operators/debounce");r.debounce=_.debounce;var m=e("../internal/operators/debounceTime");r.debounceTime=m.debounceTime;var g=e("../internal/operators/defaultIfEmpty");r.defaultIfEmpty=g.defaultIfEmpty;var w=e("../internal/operators/delay");r.delay=w.delay;var O=e("../internal/operators/delayWhen");r.delayWhen=O.delayWhen;var S=e("../internal/operators/dematerialize");r.dematerialize=S.dematerialize;var k=e("../internal/operators/distinct");r.distinct=k.distinct;var E=e("../internal/operators/distinctUntilChanged");r.distinctUntilChanged=E.distinctUntilChanged;var C=e("../internal/operators/distinctUntilKeyChanged");r.distinctUntilKeyChanged=C.distinctUntilKeyChanged;var x=e("../internal/operators/elementAt");r.elementAt=x.elementAt;var P=e("../internal/operators/endWith");r.endWith=P.endWith;var T=e("../internal/operators/every");r.every=T.every;var I=e("../internal/operators/exhaust");r.exhaust=I.exhaust;var R=e("../internal/operators/exhaustMap");r.exhaustMap=R.exhaustMap;var j=e("../internal/operators/expand");r.expand=j.expand;var A=e("../internal/operators/filter");r.filter=A.filter;var N=e("../internal/operators/finalize");r.finalize=N.finalize;var M=e("../internal/operators/find");r.find=M.find;var D=e("../internal/operators/findIndex");r.findIndex=D.findIndex;var U=e("../internal/operators/first");r.first=U.first;var L=e("../internal/operators/groupBy");r.groupBy=L.groupBy;var q=e("../internal/operators/ignoreElements");r.ignoreElements=q.ignoreElements;var F=e("../internal/operators/isEmpty");r.isEmpty=F.isEmpty;var V=e("../internal/operators/last");r.last=V.last;var z=e("../internal/operators/map");r.map=z.map;var W=e("../internal/operators/mapTo");r.mapTo=W.mapTo;var B=e("../internal/operators/materialize");r.materialize=B.materialize;var H=e("../internal/operators/max");r.max=H.max;var K=e("../internal/operators/merge");r.merge=K.merge;var Y=e("../internal/operators/mergeAll");r.mergeAll=Y.mergeAll;var G=e("../internal/operators/mergeMap");r.mergeMap=G.mergeMap,r.flatMap=G.flatMap;var Z=e("../internal/operators/mergeMapTo");r.mergeMapTo=Z.mergeMapTo;var J=e("../internal/operators/mergeScan");r.mergeScan=J.mergeScan;var X=e("../internal/operators/min");r.min=X.min;var Q=e("../internal/operators/multicast");r.multicast=Q.multicast;var $=e("../internal/operators/observeOn");r.observeOn=$.observeOn;var ee=e("../internal/operators/onErrorResumeNext");r.onErrorResumeNext=ee.onErrorResumeNext;var te=e("../internal/operators/pairwise");r.pairwise=te.pairwise;var re=e("../internal/operators/partition");r.partition=re.partition;var ne=e("../internal/operators/pluck");r.pluck=ne.pluck;var ie=e("../internal/operators/publish");r.publish=ie.publish;var oe=e("../internal/operators/publishBehavior");r.publishBehavior=oe.publishBehavior;var se=e("../internal/operators/publishLast");r.publishLast=se.publishLast;var ue=e("../internal/operators/publishReplay");r.publishReplay=ue.publishReplay;var ae=e("../internal/operators/race");r.race=ae.race;var ce=e("../internal/operators/reduce");r.reduce=ce.reduce;var le=e("../internal/operators/repeat");r.repeat=le.repeat;var he=e("../internal/operators/repeatWhen");r.repeatWhen=he.repeatWhen;var fe=e("../internal/operators/retry");r.retry=fe.retry;var pe=e("../internal/operators/retryWhen");r.retryWhen=pe.retryWhen;var be=e("../internal/operators/refCount");r.refCount=be.refCount;var de=e("../internal/operators/sample");r.sample=de.sample;var ve=e("../internal/operators/sampleTime");r.sampleTime=ve.sampleTime;var ye=e("../internal/operators/scan");r.scan=ye.scan;var _e=e("../internal/operators/sequenceEqual");r.sequenceEqual=_e.sequenceEqual;var me=e("../internal/operators/share");r.share=me.share;var ge=e("../internal/operators/shareReplay");r.shareReplay=ge.shareReplay;var we=e("../internal/operators/single");r.single=we.single;var Oe=e("../internal/operators/skip");r.skip=Oe.skip;var Se=e("../internal/operators/skipLast");r.skipLast=Se.skipLast;var ke=e("../internal/operators/skipUntil");r.skipUntil=ke.skipUntil;var Ee=e("../internal/operators/skipWhile");r.skipWhile=Ee.skipWhile;var Ce=e("../internal/operators/startWith");r.startWith=Ce.startWith;var xe=e("../internal/operators/subscribeOn");r.subscribeOn=xe.subscribeOn;var Pe=e("../internal/operators/switchAll");r.switchAll=Pe.switchAll;var Te=e("../internal/operators/switchMap");r.switchMap=Te.switchMap;var Ie=e("../internal/operators/switchMapTo");r.switchMapTo=Ie.switchMapTo;var Re=e("../internal/operators/take");r.take=Re.take;var je=e("../internal/operators/takeLast");r.takeLast=je.takeLast;var Ae=e("../internal/operators/takeUntil");r.takeUntil=Ae.takeUntil;var Ne=e("../internal/operators/takeWhile");r.takeWhile=Ne.takeWhile;var Me=e("../internal/operators/tap");r.tap=Me.tap;var De=e("../internal/operators/throttle");r.throttle=De.throttle;var Ue=e("../internal/operators/throttleTime");r.throttleTime=Ue.throttleTime;var Le=e("../internal/operators/throwIfEmpty");r.throwIfEmpty=Le.throwIfEmpty;var qe=e("../internal/operators/timeInterval");r.timeInterval=qe.timeInterval;var Fe=e("../internal/operators/timeout");r.timeout=Fe.timeout;var Ve=e("../internal/operators/timeoutWith");r.timeoutWith=Ve.timeoutWith;var ze=e("../internal/operators/timestamp");r.timestamp=ze.timestamp;var We=e("../internal/operators/toArray");r.toArray=We.toArray;var Be=e("../internal/operators/window");r.window=Be.window;var He=e("../internal/operators/windowCount");r.windowCount=He.windowCount;var Ke=e("../internal/operators/windowTime");r.windowTime=Ke.windowTime;var Ye=e("../internal/operators/windowToggle");r.windowToggle=Ye.windowToggle;var Ge=e("../internal/operators/windowWhen");r.windowWhen=Ge.windowWhen;var Ze=e("../internal/operators/withLatestFrom");r.withLatestFrom=Ze.withLatestFrom;var Je=e("../internal/operators/zip");r.zip=Je.zip;var Xe=e("../internal/operators/zipAll");r.zipAll=Xe.zipAll},{"../internal/operators/audit":72,"../internal/operators/auditTime":73,"../internal/operators/buffer":74,"../internal/operators/bufferCount":75,"../internal/operators/bufferTime":76,"../internal/operators/bufferToggle":77,"../internal/operators/bufferWhen":78,"../internal/operators/catchError":79,"../internal/operators/combineAll":80,"../internal/operators/combineLatest":81,"../internal/operators/concat":82,"../internal/operators/concatAll":83,"../internal/operators/concatMap":84,"../internal/operators/concatMapTo":85,"../internal/operators/count":86,"../internal/operators/debounce":87,"../internal/operators/debounceTime":88,"../internal/operators/defaultIfEmpty":89,"../internal/operators/delay":90,"../internal/operators/delayWhen":91,"../internal/operators/dematerialize":92,"../internal/operators/distinct":93,"../internal/operators/distinctUntilChanged":94,"../internal/operators/distinctUntilKeyChanged":95,"../internal/operators/elementAt":96,"../internal/operators/endWith":97,"../internal/operators/every":98,"../internal/operators/exhaust":99,"../internal/operators/exhaustMap":100,"../internal/operators/expand":101,"../internal/operators/filter":102,"../internal/operators/finalize":103,"../internal/operators/find":104,"../internal/operators/findIndex":105,"../internal/operators/first":106,"../internal/operators/groupBy":107,"../internal/operators/ignoreElements":108,"../internal/operators/isEmpty":109,"../internal/operators/last":110,"../internal/operators/map":111,"../internal/operators/mapTo":112,"../internal/operators/materialize":113,"../internal/operators/max":114,"../internal/operators/merge":115,"../internal/operators/mergeAll":116,"../internal/operators/mergeMap":117,"../internal/operators/mergeMapTo":118,"../internal/operators/mergeScan":119,"../internal/operators/min":120,"../internal/operators/multicast":121,"../internal/operators/observeOn":122,"../internal/operators/onErrorResumeNext":123,"../internal/operators/pairwise":124,"../internal/operators/partition":125,"../internal/operators/pluck":126,"../internal/operators/publish":127,"../internal/operators/publishBehavior":128,"../internal/operators/publishLast":129,"../internal/operators/publishReplay":130,"../internal/operators/race":131,"../internal/operators/reduce":132,"../internal/operators/refCount":133,"../internal/operators/repeat":134,"../internal/operators/repeatWhen":135,"../internal/operators/retry":136,"../internal/operators/retryWhen":137,"../internal/operators/sample":138,"../internal/operators/sampleTime":139,"../internal/operators/scan":140,"../internal/operators/sequenceEqual":141,"../internal/operators/share":142,"../internal/operators/shareReplay":143,"../internal/operators/single":144,"../internal/operators/skip":145,"../internal/operators/skipLast":146,"../internal/operators/skipUntil":147,"../internal/operators/skipWhile":148,"../internal/operators/startWith":149,"../internal/operators/subscribeOn":150,"../internal/operators/switchAll":151,"../internal/operators/switchMap":152,"../internal/operators/switchMapTo":153,"../internal/operators/take":154,"../internal/operators/takeLast":155,"../internal/operators/takeUntil":156,"../internal/operators/takeWhile":157,"../internal/operators/tap":158,"../internal/operators/throttle":159,"../internal/operators/throttleTime":160,"../internal/operators/throwIfEmpty":161,"../internal/operators/timeInterval":162,"../internal/operators/timeout":163,"../internal/operators/timeoutWith":164,"../internal/operators/timestamp":165,"../internal/operators/toArray":166,"../internal/operators/window":167,"../internal/operators/windowCount":168,"../internal/operators/windowTime":169,"../internal/operators/windowToggle":170,"../internal/operators/windowWhen":171,"../internal/operators/withLatestFrom":172,"../internal/operators/zip":173,"../internal/operators/zipAll":174}],228:[function(e,t,r){"use strict";function c(e,t,r){return t<=e&&e<=r}function s(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function u(e){this.tokens=[].slice.call(e)}u.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};function l(e,t){if(e)throw TypeError("Decoder error");return t||65533}var n="utf-8";function i(e,t){if(!(this instanceof i))return new i(e,t);if((e=void 0!==e?String(e).toLowerCase():n)!==n)throw new Error("Encoding not supported. Only utf-8 is supported");t=s(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function o(e,t){if(!(this instanceof o))return new o(e,t);if((e=void 0!==e?String(e).toLowerCase():n)!==n)throw new Error("Encoding not supported. Only utf-8 is supported");t=s(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function a(e){var n=e.fatal,i=0,o=0,s=0,u=128,a=191;this.handler=function(e,t){if(-1===t&&0!==s)return s=0,l(n);if(-1===t)return-1;if(0===s){if(c(t,0,127))return t;if(c(t,194,223))s=1,i=t-192;else if(c(t,224,239))224===t&&(u=160),237===t&&(a=159),s=2,i=t-224;else{if(!c(t,240,244))return l(n);240===t&&(u=144),244===t&&(a=143),s=3,i=t-240}return i<<=6*s,null}if(!c(t,u,a))return i=s=o=0,u=128,a=191,e.prepend(t),l(n);if(a=191,i+=t-(u=128)<<6*(s-(o+=1)),o!==s)return null;var r=i;return i=s=o=0,r}}function h(e){e.fatal;this.handler=function(e,t){if(-1===t)return-1;if(c(t,0,127))return t;var r,n;c(t,128,2047)?(r=1,n=192):c(t,2048,65535)?(r=2,n=224):c(t,65536,1114111)&&(r=3,n=240);for(var i=[(t>>6*r)+n];0<r;){var o=t>>6*(r-1);i.push(128|63&o),r-=1}return i}}i.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=s(t),this._streaming||(this._decoder=new a({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var n,i=new u(r),o=[];!i.endOfStream()&&-1!==(n=this._decoder.handler(i,i.read()));)null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));if(!this._streaming){do{if(-1===(n=this._decoder.handler(i,i.read())))break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}while(!i.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(o)}},o.prototype={encode:function(e,t){e=e?String(e):"",t=s(t),this._streaming||(this._encoder=new h(this._options)),this._streaming=Boolean(t.stream);for(var r,n=[],i=new u(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||57343<o)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var u=1023&o,a=1023&s;i.push(65536+(u<<10)+a),n+=1}else i.push(65533)}n+=1}return i}(e));!i.endOfStream()&&-1!==(r=this._encoder.handler(i,i.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(i,i.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}},r.TextEncoder=o,r.TextDecoder=i},{}],229:[function(e,t,r){var n;n=this,function(e){"use strict";function N(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1<t.length){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function M(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function p(e){return e.toUpperCase()}function t(e){var t="[A-Za-z]",r="[0-9]",n=N(r,"[A-Fa-f]"),i=M(M("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+M("%[89A-Fa-f]"+n+"%"+n+n)+"|"+M("%"+n+n)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=N("[\\:\\/\\?\\#\\[\\]\\@]",o),u=e?"[\\uE000-\\uF8FF]":"[]",a=N(t,r,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=M(t+N(t,r,"[\\+\\-\\.]")+"*"),l=M(M(i+"|"+N(a,o,"[\\:]"))+"*"),h=(M(M("25[0-5]")+"|"+M("2[0-4]"+r)+"|"+M("1"+r+r)+"|"+M("[1-9]"+r)+"|"+r),M(M("25[0-5]")+"|"+M("2[0-4]"+r)+"|"+M("1"+r+r)+"|"+M("0?[1-9]"+r)+"|0?0?"+r)),f=M(h+"\\."+h+"\\."+h+"\\."+h),p=M(n+"{1,4}"),b=M(M(p+"\\:"+p)+"|"+f),d=M([M(M(p+"\\:")+"{6}"+b),M("\\:\\:"+M(p+"\\:")+"{5}"+b),M(M(p)+"?\\:\\:"+M(p+"\\:")+"{4}"+b),M(M(M(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+M(p+"\\:")+"{3}"+b),M(M(M(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+M(p+"\\:")+"{2}"+b),M(M(M(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+b),M(M(M(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+b),M(M(M(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),M(M(M(p+"\\:")+"{0,6}"+p)+"?\\:\\:")].join("|")),v=M(M(a+"|"+i)+"+"),y=(M(d+"\\%25"+v),M("\\["+M(M(d+M("\\%25|\\%(?!"+n+"{2})")+v)+"|"+d+"|"+M("[vV]"+n+"+\\."+N(a,o,"[\\:]")+"+"))+"\\]")),_=M(M(i+"|"+N(a,o))+"*"),m=M(y+"|"+f+"(?!"+_+")|"+_),g=M(r+"*"),w=M(M(l+"@")+"?"+m+M("\\:"+g)+"?"),O=M(i+"|"+N(a,o,"[\\:\\@]")),S=M(O+"*"),k=M(O+"+"),E=M(M(i+"|"+N(a,o,"[\\@]"))+"+"),C=M(M("\\/"+S)+"*"),x=M("\\/"+M(k+C)+"?"),P=M(E+C),T=M(k+C),I="(?!"+O+")",R=(M(C+"|"+x+"|"+P+"|"+T+"|"+I),M(M(O+"|"+N("[\\/\\?]",u))+"*")),j=M(M(O+"|[\\/\\?]")+"*"),A=M(M("\\/\\/"+w+C)+"|"+x+"|"+T+"|"+I);M(M(c+"\\:"+A+M("\\?"+R)+"?"+M("\\#"+j)+"?")+"|"+M(M(M("\\/\\/"+w+C)+"|"+x+"|"+P+"|"+I)+M("\\?"+R)+"?"+M("\\#"+j)+"?")),M(c+"\\:"+A+M("\\?"+R)+"?"),M(M("\\/\\/("+M("("+l+")@")+"?("+m+")"+M("\\:("+g+")")+"?)")+"?("+C+"|"+x+"|"+T+"|"+I+")"),M("\\?("+R+")"),M("\\#("+j+")"),M(M("\\/\\/("+M("("+l+")@")+"?("+m+")"+M("\\:("+g+")")+"?)")+"?("+C+"|"+x+"|"+P+"|"+I+")"),M("\\?("+R+")"),M("\\#("+j+")"),M(M("\\/\\/("+M("("+l+")@")+"?("+m+")"+M("\\:("+g+")")+"?)")+"?("+C+"|"+x+"|"+T+"|"+I+")"),M("\\?("+R+")"),M("\\#("+j+")"),M("("+l+")@"),M("\\:("+g+")");return{NOT_SCHEME:new RegExp(N("[^]",t,r,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(N("[^\\%\\:]",a,o),"g"),NOT_HOST:new RegExp(N("[^\\%\\[\\]\\:]",a,o),"g"),NOT_PATH:new RegExp(N("[^\\%\\/\\:\\@]",a,o),"g"),NOT_PATH_NOSCHEME:new RegExp(N("[^\\%\\/\\@]",a,o),"g"),NOT_QUERY:new RegExp(N("[^\\%]",a,o,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:new RegExp(N("[^\\%]",a,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(N("[^]",a,o),"g"),UNRESERVED:new RegExp(a,"g"),OTHER_CHARS:new RegExp(N("[^\\%]",a,s),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+d+")"+M(M("\\%25|\\%(?!"+n+"{2})")+"("+v+")")+"?\\]?$")}}var u=t(!1),a=t(!0),w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},A=2147483647,r=/^xn--/,i=/[^\0-\x7E]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=Math.floor,U=String.fromCharCode;function L(e){throw new RangeError(s[e])}function c(e,t){var r=e.split("@"),n="";return 1<r.length&&(n=r[0]+"@",e=r[1]),n+function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(o,".")).split("."),t).join(".")}function q(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(55296<=i&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}function F(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function V(e,t,r){var n=0;for(e=r?D(e/700):e>>1,e+=D(e/t);455<e;n+=36)e=D(e/35);return D(n+36*e/(e+38))}function l(e){var t,r=[],n=e.length,i=0,o=128,s=72,u=e.lastIndexOf("-");u<0&&(u=0);for(var a=0;a<u;++a)128<=e.charCodeAt(a)&&L("not-basic"),r.push(e.charCodeAt(a));for(var c=0<u?u+1:0;c<n;){for(var l=i,h=1,f=36;;f+=36){n<=c&&L("invalid-input");var p=(t=e.charCodeAt(c++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(36<=p||p>D((A-i)/h))&&L("overflow"),i+=p*h;var b=f<=s?1:s+26<=f?26:f-s;if(p<b)break;var d=36-b;h>D(A/d)&&L("overflow"),h*=d}var v=r.length+1;s=V(i-l,v,0==l),D(i/v)>A-o&&L("overflow"),o+=D(i/v),i%=v,r.splice(i++,0,o)}return String.fromCodePoint.apply(String,r)}function h(e){var t=[],r=(e=q(e)).length,n=128,i=0,o=72,s=!0,u=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var h=c.value;h<128&&t.push(U(h))}}catch(e){u=!0,a=e}finally{try{!s&&l.return&&l.return()}finally{if(u)throw a}}var f=t.length,p=f;for(f&&t.push("-");p<r;){var b=A,d=!0,v=!1,y=void 0;try{for(var _,m=e[Symbol.iterator]();!(d=(_=m.next()).done);d=!0){var g=_.value;n<=g&&g<b&&(b=g)}}catch(e){v=!0,y=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw y}}var w=p+1;b-n>D((A-i)/w)&&L("overflow"),i+=(b-n)*w,n=b;var O=!0,S=!1,k=void 0;try{for(var E,C=e[Symbol.iterator]();!(O=(E=C.next()).done);O=!0){var x=E.value;if(x<n&&++i>A&&L("overflow"),x==n){for(var P=i,T=36;;T+=36){var I=T<=o?1:o+26<=T?26:T-o;if(P<I)break;var R=P-I,j=36-I;t.push(U(F(I+R%j,0))),P=D(R/j)}t.push(U(F(P,0))),o=V(i,w,p==f),i=0,++p}}}catch(e){S=!0,k=e}finally{try{!O&&C.return&&C.return()}finally{if(S)throw k}}++i,++n}return t.join("")}var v={version:"2.1.0",ucs2:{decode:q,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:l,encode:h,toASCII:function(e){return c(e,function(e){return i.test(e)?"xn--"+h(e):e})},toUnicode:function(e){return c(e,function(e){return r.test(e)?l(e.slice(4).toLowerCase()):e})}},f={};function b(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function d(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(194<=i&&i<224){if(6<=n-r){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(224<=i){if(9<=n-r){var s=parseInt(e.substr(r+4,2),16),u=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function y(e,r){function t(e){var t=d(e);return t.match(r.UNRESERVED)?t:e}return e.scheme&&(e.scheme=String(e.scheme).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(r.PCT_ENCODED,t).replace(r.NOT_USERINFO,b).replace(r.PCT_ENCODED,p)),void 0!==e.host&&(e.host=String(e.host).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_HOST,b).replace(r.PCT_ENCODED,p)),void 0!==e.path&&(e.path=String(e.path).replace(r.PCT_ENCODED,t).replace(e.scheme?r.NOT_PATH:r.NOT_PATH_NOSCHEME,b).replace(r.PCT_ENCODED,p)),void 0!==e.query&&(e.query=String(e.query).replace(r.PCT_ENCODED,t).replace(r.NOT_QUERY,b).replace(r.PCT_ENCODED,p)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(r.PCT_ENCODED,t).replace(r.NOT_FRAGMENT,b).replace(r.PCT_ENCODED,p)),e}function O(e){return e.replace(/^0*(.*)/,"$1")||"0"}function S(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=w(r,2)[1];return n?n.split(".").map(O).join("."):e}function _(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=w(r,3),i=n[1],o=n[2];if(i){for(var s=i.toLowerCase().split("::").reverse(),u=w(s,2),a=u[0],c=u[1],l=c?c.split(":").map(O):[],h=a.split(":").map(O),f=t.IPV4ADDRESS.test(h[h.length-1]),p=f?7:8,b=h.length-p,d=Array(p),v=0;v<p;++v)d[v]=l[v]||h[b+v]||"";f&&(d[p-1]=S(d[p-1],t));var y=d.reduce(function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e},[]).sort(function(e,t){return t.length-e.length})[0],_=void 0;if(y&&1<y.length){var m=d.slice(0,y.index),g=d.slice(y.index+y.length);_=m.join(":")+"::"+g.join(":")}else _=d.join(":");return o&&(_+="%"+o),_}return e}var m=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,g=void 0==="".match(/(){0}/)[1];function k(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?a:u;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(m);if(i){g?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=_(S(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=f[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)y(r,n);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=v.toASCII(r.host.replace(n.PCT_ENCODED,d).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}y(r,u)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var E=/^\.\.?\//,C=/^\/\.(\/|$)/,x=/^\/\.\.(\/|$)/,P=/^\/?(?:.|\n)*?(?=\/|$)/;function T(e){for(var t=[];e.length;)if(e.match(E))e=e.replace(E,"");else if(e.match(C))e=e.replace(C,"/");else if(e.match(x))e=e.replace(x,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(P);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function I(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=r.iri?a:u,n=[],i=f[(r.scheme||t.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(t,r),t.host)if(e.IPV6ADDRESS.test(t.host));else if(r.domainHost||i&&i.domainHost)try{t.host=r.iri?v.toUnicode(t.host):v.toASCII(t.host.replace(e.PCT_ENCODED,d).toLowerCase())}catch(e){t.error=t.error||"Host's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+e}y(t,e),"suffix"!==r.reference&&t.scheme&&(n.push(t.scheme),n.push(":"));var o=function(e,t){var r=!1!==t.iri?a:u,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(_(S(String(e.host),r),r).replace(r.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}(t,r);if(void 0!==o&&("suffix"!==r.reference&&n.push("//"),n.push(o),t.path&&"/"!==t.path.charAt(0)&&n.push("/")),void 0!==t.path){var s=t.path;r.absolutePath||i&&i.absolutePath||(s=T(s)),void 0===o&&(s=s.replace(/^\/\//,"/%2F")),n.push(s)}return void 0!==t.query&&(n.push("?"),n.push(t.query)),void 0!==t.fragment&&(n.push("#"),n.push(t.fragment)),n.join("")}function R(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=k(I(e,r),r),t=k(I(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=T(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=T(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=T(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=T(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function j(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:u.PCT_ENCODED,d)}var z={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},W={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize};function B(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var H={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=B(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(B(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=w(r,2),i=n[0],o=n[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},K={scheme:"wss",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},Y={},G="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Z="[0-9A-Fa-f]",J=M(M("%[EFef]"+Z+"%"+Z+Z+"%"+Z+Z)+"|"+M("%[89A-Fa-f]"+Z+"%"+Z+Z)+"|"+M("%"+Z+Z)),X=N("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Q=new RegExp(G,"g"),$=new RegExp(J,"g"),ee=new RegExp(N("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',X),"g"),te=new RegExp(N("[^]",G,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),re=te;function ne(e){var t=d(e);return t.match(Q)?t:e}var ie={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,o={},s=r.query.split("&"),u=0,a=s.length;u<a;++u){var c=s[u].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),h=0,f=l.length;h<f;++h)n.push(l[h]);break;case"subject":r.subject=j(c[1],t);break;case"body":r.body=j(c[1],t);break;default:i=!0,o[j(c[0],t)]=j(c[1],t)}}i&&(r.headers=o)}r.query=void 0;for(var p=0,b=n.length;p<b;++p){var d=n[p].split("@");if(d[0]=j(d[0]),t.unicodeSupport)d[1]=j(d[1],t).toLowerCase();else try{d[1]=v.toASCII(j(d[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[p]=d.join("@")}return r},serialize:function(e,t){var r=e,n=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(n){for(var i=0,o=n.length;i<o;++i){var s=String(n[i]),u=s.lastIndexOf("@"),a=s.slice(0,u).replace($,ne).replace($,p).replace(ee,b),c=s.slice(u+1);try{c=t.iri?v.toUnicode(c):v.toASCII(j(c,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}n[i]=a+"@"+c}r.path=n.join(",")}var l=e.headers=e.headers||{};e.subject&&(l.subject=e.subject),e.body&&(l.body=e.body);var h=[];for(var f in l)l[f]!==Y[f]&&h.push(f.replace($,ne).replace($,p).replace(te,b)+"="+l[f].replace($,ne).replace($,p).replace(re,b));return h.length&&(r.query=h.join("&")),r}},oe=/^([^\:]+)\:(.*)/,se={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(oe),n=e;if(r){var i=t.scheme||n.scheme||"urn",o=r[1].toLowerCase(),s=r[2],u=i+":"+(t.nid||o),a=f[u];n.nid=o,n.nss=s,n.path=void 0,a&&(n=a.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,i=r+":"+(t.nid||n),o=f[i];o&&(e=o.serialize(e,t));var s=e,u=e.nss;return s.path=(n||t.nid)+":"+u,s}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ae={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ue)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};f[z.scheme]=z,f[W.scheme]=W,f[H.scheme]=H,f[K.scheme]=K,f[ie.scheme]=ie,f[se.scheme]=se,f[ae.scheme]=ae,e.SCHEMES=f,e.pctEncChar=b,e.pctDecChars=d,e.parse=k,e.removeDotSegments=T,e.serialize=I,e.resolveComponents=R,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return I(R(k(e,n),k(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=I(k(e,t),t):"object"===n(e)&&(e=k(I(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=I(k(e,r),r):"object"===n(e)&&(e=I(e,r)),"string"==typeof t?t=I(k(t,r),r):"object"===n(t)&&(t=I(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:u.ESCAPE,b)},e.unescapeComponent=j,Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof r&&void 0!==t?r:n.URI=n.URI||{})},{}],230:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.WRITE=r.READ=r.Driver=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("./error"),l=(n(e("./internal/connection-provider")),n(e("./internal/bookmark"))),u=n(e("./internal/connection-provider-direct")),a=n(e("./internal/connectivity-verifier")),h=e("./internal/constants"),f=n(e("./internal/logger")),p=e("./internal/pool-config"),b=n(e("./session")),d=n(e("./session-rx")),c=e("./internal/request-message"),v=e("./internal/util"),y=36e5,_=1e3,m=h.ACCESS_MODE_READ;r.READ=m;var g=h.ACCESS_MODE_WRITE;r.WRITE=g;var w=0,O=function(){function c(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};(0,i.default)(this,c),function(e){e.maxConnectionLifetime=S(e.maxConnectionLifetime,y),e.maxConnectionPoolSize=S(e.maxConnectionPoolSize,p.DEFAULT_MAX_SIZE),e.connectionAcquisitionTimeout=S(e.connectionAcquisitionTimeout,p.DEFAULT_ACQUISITION_TIMEOUT),e.fetchSize=k(e.fetchSize,_)}(n),this._id=w++,this._address=e,this._userAgent=t,this._authToken=r,this._config=n,this._log=f.default.create(n),this._connectionProvider=null,this._afterConstruction()}return(0,o.default)(c,[{key:"verifyConnectivity",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).database,t=void 0===e?"":e,r=this._getOrCreateConnectionProvider();return new a.default(r).verify({database:t})}},{key:"supportsMultiDb",value:function(){return this._getOrCreateConnectionProvider().supportsMultiDb()}},{key:"supportsTransactionConfig",value:function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()}},{key:"_supportsRouting",value:function(){return!1}},{key:"_isEncrypted",value:function(){return this._config.encrypted===v.ENCRYPTION_ON}},{key:"_getTrust",value:function(){return this._config.trust}},{key:"session",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultAccessMode,r=void 0===t?g:t,n=e.bookmarks,i=e.database,o=void 0===i?"":i,s=e.fetchSize;return this._newSession({defaultAccessMode:r,bookmarkOrBookmarks:n,database:o,reactive:!1,fetchSize:k(s,this._config.fetchSize)})}},{key:"rxSession",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultAccessMode,r=void 0===t?g:t,n=e.bookmarks,i=e.database,o=void 0===i?"":i,s=e.fetchSize;return new d.default({session:this._newSession({defaultAccessMode:r,bookmarks:n,database:o,reactive:!0,fetchSize:k(s,this._config.fetchSize)}),config:this._config})}},{key:"close",value:function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider?this._connectionProvider.close():Promise.resolve()}},{key:"_afterConstruction",value:function(){this._log.info("Direct driver ".concat(this._id," created for server address ").concat(this._address))}},{key:"_createConnectionProvider",value:function(e,t,r){return new u.default({id:this._id,config:this._config,log:this._log,address:e,userAgent:t,authToken:r})}},{key:"_newSession",value:function(e){var t=e.defaultAccessMode,r=e.bookmarkOrBookmarks,n=e.database,i=e.reactive,o=e.fetchSize,s=c._validateSessionMode(t),u=this._getOrCreateConnectionProvider(),a=r?new l.default(r):l.default.empty();return new b.default({mode:s,database:n,connectionProvider:u,bookmark:a,config:this._config,reactive:i,fetchSize:o})}},{key:"_getOrCreateConnectionProvider",value:function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._address,this._userAgent,this._authToken)),this._connectionProvider}}],[{key:"_validateSessionMode",value:function(e){var t=e||g;if(t!==h.ACCESS_MODE_READ&&t!==h.ACCESS_MODE_WRITE)throw(0,s.newError)("Illegal session mode "+t);return t}}]),c}();function S(e,t){var r=parseInt(e,10);return 0<r||0===r?r:r<0?Number.MAX_SAFE_INTEGER:t}function k(e,t){var r=parseInt(e,10);if(0<r||r===c.ALL)return r;if(0===r||r<0)throw new Error("The fetch size can only be a positive value or -1 for ALL. However fetchSize = "+r);return t}var E=r.Driver=O;r.default=E},{"./error":231,"./internal/bookmark":242,"./internal/connection-provider":261,"./internal/connection-provider-direct":257,"./internal/connectivity-verifier":263,"./internal/constants":264,"./internal/logger":267,"./internal/pool-config":270,"./internal/request-message":274,"./internal/util":288,"./session":295,"./session-rx":294,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],231:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.newError=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"N/A";return new c(e,t)},r.PROTOCOL_ERROR=r.SESSION_EXPIRED=r.SERVICE_UNAVAILABLE=r.Neo4jError=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),a=n(e("@babel/runtime/helpers/wrapNativeSuper"));r.SERVICE_UNAVAILABLE="ServiceUnavailable";r.SESSION_EXPIRED="SessionExpired";r.PROTOCOL_ERROR="ProtocolError";var c=function(e){function n(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"N/A";return(0,i.default)(this,n),(t=(0,o.default)(this,(0,s.default)(n).call(this,e))).message=e,t.code=r,t.name="Neo4jError",t}return(0,u.default)(n,e),n}((0,a.default)(Error));r.Neo4jError=c},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19,"@babel/runtime/helpers/wrapNativeSuper":25}],232:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.isNode=function(e){return h(e,u)},r.isRelationship=function(e){return h(e,a)},r.isUnboundRelationship=function(e){return h(e,UNBOUNT_RELATIONSHIP_IDENTIFIER_PROPERTY)},r.isPath=function(e){return h(e,c)},r.isPathSegment=function(e){return h(e,l)},r.PathSegment=r.Path=r.UnboundRelationship=r.Relationship=r.Node=void 0;var s=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),o={value:!0,enumerable:!1,configurable:!1,writable:!1},u="__isNode__",a="__isRelationship__",c="__isPath__",l="__isPathSegment__";function h(e,t){return!0===(e&&e[t])}var f=function(){function n(e,t,r){(0,s.default)(this,n),this.identity=e,this.labels=t,this.properties=r}return(0,i.default)(n,[{key:"toString",value:function(){for(var e="("+this.identity,t=0;t<this.labels.length;t++)e+=":"+this.labels[t];var r=Object.keys(this.properties);if(0<r.length){e+=" {";for(var n=0;n<r.length;n++)0<n&&(e+=","),e+=r[n]+":"+JSON.stringify(this.properties[r[n]]);e+="}"}return e+=")"}}]),n}();r.Node=f,Object.defineProperty(f.prototype,u,o);var p=function(){function o(e,t,r,n,i){(0,s.default)(this,o),this.identity=e,this.start=t,this.end=r,this.type=n,this.properties=i}return(0,i.default)(o,[{key:"toString",value:function(){var e="("+this.start+")-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+JSON.stringify(this.properties[t[r]]);e+="}"}return e+="]->("+this.end+")"}}]),o}();r.Relationship=p,Object.defineProperty(p.prototype,a,o);var b=function(){function n(e,t,r){(0,s.default)(this,n),this.identity=e,this.type=t,this.properties=r}return(0,i.default)(n,[{key:"bind",value:function(e,t){return new p(this.identity,e,t,this.type,this.properties)}},{key:"toString",value:function(){var e="-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+JSON.stringify(this.properties[t[r]]);e+="}"}return e+="]->"}}]),n}();r.UnboundRelationship=b,Object.defineProperty(b.prototype,"__isUnboundRelationship__",o);function d(e,t,r){(0,s.default)(this,d),this.start=e,this.relationship=t,this.end=r}r.PathSegment=d,Object.defineProperty(d.prototype,l,o);function v(e,t,r){(0,s.default)(this,v),this.start=e,this.end=t,this.segments=r,this.length=r.length}r.Path=v,Object.defineProperty(v.prototype,c,o)},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],233:[function(I,e,R){(function(r){"use strict";var e=I("@babel/runtime/helpers/interopRequireDefault"),t=I("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(R,"__esModule",{value:!0}),R.driver=y,Object.defineProperty(R,"int",{enumerable:!0,get:function(){return n.int}}),Object.defineProperty(R,"isInt",{enumerable:!0,get:function(){return n.isInt}}),Object.defineProperty(R,"Neo4jError",{enumerable:!0,get:function(){return o.Neo4jError}}),Object.defineProperty(R,"isPoint",{enumerable:!0,get:function(){return b.isPoint}}),Object.defineProperty(R,"isDate",{enumerable:!0,get:function(){return d.isDate}}),Object.defineProperty(R,"isDateTime",{enumerable:!0,get:function(){return d.isDateTime}}),Object.defineProperty(R,"isDuration",{enumerable:!0,get:function(){return d.isDuration}}),Object.defineProperty(R,"isLocalDateTime",{enumerable:!0,get:function(){return d.isLocalDateTime}}),Object.defineProperty(R,"isLocalTime",{enumerable:!0,get:function(){return d.isLocalTime}}),Object.defineProperty(R,"isTime",{enumerable:!0,get:function(){return d.isTime}}),R.default=R.temporal=R.spatial=R.error=R.session=R.types=R.logging=R.auth=R.integer=void 0;var n=t(I("./integer")),i=I("./graph-types"),o=I("./error"),s=e(I("./result")),u=e(I("./result-summary")),a=e(I("./record")),c=I("./driver"),l=e(I("./routing-driver")),h=e(I("./version")),f=I("./internal/util"),p=e(I("./internal/url-util")),b=I("./spatial-types"),d=I("./temporal-types"),v=e(I("./internal/server-address"));function y(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};(0,f.assertString)(e,"Bolt URL");var n,i=p.default.parseDatabaseUrl(e),o=!1,s=!1;switch(i.scheme){case"bolt":break;case"bolt+s":s=!0,n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":s=!0,n="TRUST_ALL_CERTIFICATES";break;case"neo4j":o=!0;break;case"neo4j+s":n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",o=s=!0;break;case"neo4j+ssc":n="TRUST_ALL_CERTIFICATES",o=s=!0;break;default:throw new Error("Unknown scheme: ".concat(i.scheme))}if(s){if("encrypted"in r||"trust"in r)throw new Error("Encryption/trust can only be configured either through URL or config, not both");r.encrypted=f.ENCRYPTION_ON,r.trust=n}if((t=t||{}).scheme=t.scheme||"none",r.userAgent=r.userAgent||g,o)return new l.default(v.default.fromUrl(i.hostAndPort),i.query,r.userAgent,t,r);if(!(0,f.isEmptyObjectOrNull)(i.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(e,"'"));return new c.Driver(v.default.fromUrl(i.hostAndPort),r.userAgent,t,r)}var _={basic:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},custom:function(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0;return i?{scheme:n,principal:e,credentials:t,realm:r,parameters:i}:{scheme:n,principal:e,credentials:t,realm:r}}};R.auth=_;var m,g="neo4j-javascript/"+h.default,w={console:(m=function(e){return{level:e,logger:function(e,t){return console.log("".concat(r.Date.now()," ").concat(e.toUpperCase()," ").concat(t))}}},O.toString=function(){return m.toString()},O)};function O(e){return m.apply(this,arguments)}R.logging=w;var S={Node:i.Node,Relationship:i.Relationship,UnboundRelationship:i.UnboundRelationship,PathSegment:i.PathSegment,Path:i.Path,Result:s.default,ResultSummary:u.default,Record:a.default,Point:b.Point,Date:d.Date,DateTime:d.DateTime,Duration:d.Duration,LocalDateTime:d.LocalDateTime,LocalTime:d.LocalTime,Time:d.Time,Integer:n.default};R.types=S;var k={READ:c.READ,WRITE:c.WRITE};R.session=k;var E={SERVICE_UNAVAILABLE:o.SERVICE_UNAVAILABLE,SESSION_EXPIRED:o.SESSION_EXPIRED,PROTOCOL_ERROR:o.PROTOCOL_ERROR};R.error=E;var C={toNumber:n.toNumber,toString:n.toString,inSafeRange:n.inSafeRange};R.integer=C;var x={isPoint:b.isPoint};R.spatial=x;var P={isDuration:d.isDuration,isLocalTime:d.isLocalTime,isTime:d.isTime,isDate:d.isDate,isLocalDateTime:d.isLocalDateTime,isDateTime:d.isDateTime};R.temporal=P;var T={driver:y,int:n.int,isInt:n.isInt,isPoint:b.isPoint,isDuration:d.isDuration,isLocalTime:d.isLocalTime,isTime:d.isTime,isDate:d.isDate,isLocalDateTime:d.isLocalDateTime,isDateTime:d.isDateTime,integer:C,Neo4jError:o.Neo4jError,auth:_,logging:w,types:S,session:k,error:E,spatial:x,temporal:P};R.default=T}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./driver":230,"./error":231,"./graph-types":232,"./integer":234,"./internal/server-address":281,"./internal/url-util":287,"./internal/util":288,"./record":289,"./result":292,"./result-summary":291,"./routing-driver":293,"./spatial-types":296,"./temporal-types":297,"./version":300,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13}],234:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),c=e("./error"),l=function(){function p(e,t){(0,i.default)(this,p),this.low=0|e,this.high=0|t}return(0,o.default)(p,[{key:"inSafeRange",value:function(){return this.greaterThanOrEqual(p.MIN_SAFE_VALUE)&&this.lessThanOrEqual(p.MAX_SAFE_VALUE)}},{key:"toInt",value:function(){return this.low}},{key:"toNumber",value:function(){return this.high*u+(this.low>>>0)}},{key:"toNumberOrInfinity",value:function(){return this.lessThan(p.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(p.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()}},{key:"toString",value:function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";var t;if(this.isNegative()){if(this.equals(p.MIN_VALUE)){var r=p.fromNumber(e),n=this.div(r);return t=n.multiply(r).subtract(this),n.toString(e)+t.toInt().toString(e)}return"-"+this.negate().toString(e)}var i=p.fromNumber(Math.pow(e,6));t=this;for(var o="";;){var s=t.div(i),u=(t.subtract(s.multiply(i)).toInt()>>>0).toString(e);if((t=s).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}}},{key:"getHighBits",value:function(){return this.high}},{key:"getLowBits",value:function(){return this.low}},{key:"getNumBitsAbs",value:function(){if(this.isNegative())return this.equals(p.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!==this.high?t+33:t+1}},{key:"isZero",value:function(){return 0===this.high&&0===this.low}},{key:"isNegative",value:function(){return this.high<0}},{key:"isPositive",value:function(){return 0<=this.high}},{key:"isOdd",value:function(){return 1==(1&this.low)}},{key:"isEven",value:function(){return 0==(1&this.low)}},{key:"equals",value:function(e){return p.isInteger(e)||(e=p.fromValue(e)),this.high===e.high&&this.low===e.low}},{key:"notEquals",value:function(e){return!this.equals(e)}},{key:"lessThan",value:function(e){return this.compare(e)<0}},{key:"lessThanOrEqual",value:function(e){return this.compare(e)<=0}},{key:"greaterThan",value:function(e){return 0<this.compare(e)}},{key:"greaterThanOrEqual",value:function(e){return 0<=this.compare(e)}},{key:"compare",value:function(e){if(p.isInteger(e)||(e=p.fromValue(e)),this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1}},{key:"negate",value:function(){return this.equals(p.MIN_VALUE)?p.MIN_VALUE:this.not().add(p.ONE)}},{key:"add",value:function(e){p.isInteger(e)||(e=p.fromValue(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,a=0,c=0,l=0,h=0;return l+=(h+=i+(65535&e.low))>>>16,c+=(l+=n+u)>>>16,a+=(c+=r+s)>>>16,a+=t+o,p.fromBits((l&=65535)<<16|(h&=65535),(a&=65535)<<16|(c&=65535))}},{key:"subtract",value:function(e){return p.isInteger(e)||(e=p.fromValue(e)),this.add(e.negate())}},{key:"multiply",value:function(e){if(this.isZero())return p.ZERO;if(p.isInteger(e)||(e=p.fromValue(e)),e.isZero())return p.ZERO;if(this.equals(p.MIN_VALUE))return e.isOdd()?p.MIN_VALUE:p.ZERO;if(e.equals(p.MIN_VALUE))return this.isOdd()?p.MIN_VALUE:p.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(b)&&e.lessThan(b))return p.fromNumber(this.toNumber()*e.toNumber());var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,a=65535&e.low,c=0,l=0,h=0,f=0;return h+=(f+=i*a)>>>16,l+=(h+=n*a)>>>16,h&=65535,l+=(h+=i*u)>>>16,c+=(l+=r*a)>>>16,l&=65535,c+=(l+=n*u)>>>16,l&=65535,c+=(l+=i*s)>>>16,c+=t*a+r*u+n*s+i*o,p.fromBits((h&=65535)<<16|(f&=65535),(c&=65535)<<16|(l&=65535))}},{key:"div",value:function(e){if(p.isInteger(e)||(e=p.fromValue(e)),e.isZero())throw(0,c.newError)("division by zero");if(this.isZero())return p.ZERO;var t,r,n;{if(this.equals(p.MIN_VALUE))return e.equals(p.ONE)||e.equals(p.NEG_ONE)?p.MIN_VALUE:e.equals(p.MIN_VALUE)?p.ONE:(t=this.shiftRight(1).div(e).shiftLeft(1)).equals(p.ZERO)?e.isNegative()?p.ONE:p.NEG_ONE:(r=this.subtract(e.multiply(t)),n=t.add(r.div(e)));if(e.equals(p.MIN_VALUE))return p.ZERO}if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(n=p.ZERO,r=this;r.greaterThanOrEqual(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:Math.pow(2,i-48),s=p.fromNumber(t),u=s.multiply(e);u.isNegative()||u.greaterThan(r);)u=(s=p.fromNumber(t-=o)).multiply(e);s.isZero()&&(s=p.ONE),n=n.add(s),r=r.subtract(u)}return n}},{key:"modulo",value:function(e){return p.isInteger(e)||(e=p.fromValue(e)),this.subtract(this.div(e).multiply(e))}},{key:"not",value:function(){return p.fromBits(~this.low,~this.high)}},{key:"and",value:function(e){return p.isInteger(e)||(e=p.fromValue(e)),p.fromBits(this.low&e.low,this.high&e.high)}},{key:"or",value:function(e){return p.isInteger(e)||(e=p.fromValue(e)),p.fromBits(this.low|e.low,this.high|e.high)}},{key:"xor",value:function(e){return p.isInteger(e)||(e=p.fromValue(e)),p.fromBits(this.low^e.low,this.high^e.high)}},{key:"shiftLeft",value:function(e){return p.isInteger(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?p.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):p.fromBits(0,this.low<<e-32)}},{key:"shiftRight",value:function(e){return p.isInteger(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?p.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):p.fromBits(this.high>>e-32,0<=this.high?0:-1)}}]),p}();l.__isInteger__=!0,Object.defineProperty(l.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1}),l.isInteger=function(e){return!0===(e&&e.__isInteger__)};var s={};l.fromInt=function(e){var t,r;return-128<=(e|=0)&&e<128&&(r=s[e])?r:(t=new l(e,e<0?-1:0,!1),-128<=e&&e<128&&(s[e]=t),t)},l.fromNumber=function(e){return isNaN(e)||!isFinite(e)?l.ZERO:e<=-a?l.MIN_VALUE:a<=e+1?l.MAX_VALUE:e<0?l.fromNumber(-e).negate():new l(e%u|0,e/u|0)},l.fromBits=function(e,t){return new l(e,t)},l.fromString=function(e,t){if(0===e.length)throw(0,c.newError)("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return l.ZERO;if((t=t||10)<2||36<t)throw(0,c.newError)("radix out of range: "+t);var r;if(0<(r=e.indexOf("-")))throw(0,c.newError)('number format error: interior "-" character: '+e);if(0===r)return l.fromString(e.substring(1),t).negate();for(var n=l.fromNumber(Math.pow(t,8)),i=l.ZERO,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),t);if(s<8){var a=l.fromNumber(Math.pow(t,s));i=i.multiply(a).add(l.fromNumber(u))}else i=(i=i.multiply(n)).add(l.fromNumber(u))}return i},l.fromValue=function(e){return e instanceof l?e:"number"==typeof e?l.fromNumber(e):"string"==typeof e?l.fromString(e):new l(e.low,e.high)},l.toNumber=function(e){return l.fromValue(e).toNumber()},l.toString=function(e,t){return l.fromValue(e).toString(t)},l.inSafeRange=function(e){return l.fromValue(e).inSafeRange()};var u=4294967296,a=u*u/2,b=l.fromInt(1<<24);l.ZERO=l.fromInt(0),l.ONE=l.fromInt(1),l.NEG_ONE=l.fromInt(-1),l.MAX_VALUE=l.fromBits(-1,2147483647,!1),l.MIN_VALUE=l.fromBits(0,-2147483648,!1),l.MIN_SAFE_VALUE=l.fromBits(1,-2097152),l.MAX_SAFE_VALUE=l.fromBits(-1,2097151);var h=l.fromValue;r.int=h;var f=l.isInteger;r.isInt=f;var p=l.inSafeRange;r.inSafeRange=p;var d=l.toNumber;r.toNumber=d;var v=l.toString;r.toString=v;var y=l;r.default=y},{"./error":231,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],235:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assertDatabaseIsEmpty=function(e,t,r){if(e){var n=(0,i.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw t._handleFatalError(n),r.onError(n),n}},r.assertTxConfigIsEmpty=function(e,t,r){if(e&&!e.isEmpty()){var n=(0,i.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw t._handleFatalError(n),r.onError(n),n}};var i=e("../error");e("./stream-observers")},{"../error":231,"./stream-observers":283}],236:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),b=e("./bolt-protocol-util"),u=i(e("./bookmark")),a=(e("./chunking"),i(e("./connection")),e("./constants")),c=n(e("./packstream-v1")),d=i(e("./request-message")),v=e("./stream-observers"),l=i(e("./tx-config")),h=function(){function n(e,t,r){(0,o.default)(this,n),this._connection=e,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(r)}return(0,s.default)(n,[{key:"packer",value:function(){return this._packer}},{key:"unpacker",value:function(){return this._unpacker}},{key:"transformMetadata",value:function(e){return e}},{key:"initialize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.userAgent,r=e.authToken,n=e.onError,i=e.onComplete,o=new v.LoginObserver({connection:this._connection,afterError:n,afterComplete:i});return this._connection.write(d.default.init(t,r),o,!0),o}},{key:"prepareToClose",value:function(){}},{key:"beginTransaction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.bookmark,r=e.txConfig,n=e.database,i=e.mode,o=e.beforeError,s=e.afterError,u=e.beforeComplete,a=e.afterComplete;return this.run("BEGIN",t?t.asBeginTransactionParameters():{},{bookmark:t,txConfig:r,database:n,mode:i,beforeError:o,afterError:s,beforeComplete:u,afterComplete:a,flush:!1})}},{key:"commitTransaction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.beforeError,r=e.afterError,n=e.beforeComplete,i=e.afterComplete;return this.run("COMMIT",{},{bookmark:u.default.empty(),txConfig:l.default.empty(),mode:a.ACCESS_MODE_WRITE,beforeError:t,afterError:r,beforeComplete:n,afterComplete:i})}},{key:"rollbackTransaction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.beforeError,r=e.afterError,n=e.beforeComplete,i=e.afterComplete;return this.run("ROLLBACK",{},{bookmark:u.default.empty(),txConfig:l.default.empty(),mode:a.ACCESS_MODE_WRITE,beforeError:t,afterError:r,beforeComplete:n,afterComplete:i})}},{key:"run",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=(r.bookmark,r.txConfig),i=r.database,o=(r.mode,r.beforeKeys),s=r.afterKeys,u=r.beforeError,a=r.afterError,c=r.beforeComplete,l=r.afterComplete,h=r.flush,f=void 0===h||h,p=new v.ResultStreamObserver({connection:this._connection,beforeKeys:o,afterKeys:s,beforeError:u,afterError:a,beforeComplete:c,afterComplete:l});return(0,b.assertTxConfigIsEmpty)(n,this._connection,p),(0,b.assertDatabaseIsEmpty)(i,this._connection,p),this._connection.write(d.default.run(e,t),p,!1),this._connection.write(d.default.pullAll(),p,f),p}},{key:"reset",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.onError,r=e.onComplete,n=new v.ResetObserver({connection:this._connection,onError:t,onComplete:r});return this._connection.write(d.default.reset(),n,!0),n}},{key:"_createPacker",value:function(e){return new c.Packer(e)}},{key:"_createUnpacker",value:function(e){return new c.Unpacker(e)}},{key:"version",get:function(){return a.BOLT_PROTOCOL_V1}}]),n}();r.default=h},{"./bolt-protocol-util":235,"./bookmark":242,"./chunking":251,"./connection":262,"./constants":264,"./packstream-v1":268,"./request-message":274,"./stream-observers":283,"./tx-config":286,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13}],237:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),a=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/inherits")),l=i(e("./bolt-protocol-v1")),h=n(e("./packstream-v2")),f=e("./constants"),p=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"_createPacker",value:function(e){return new h.Packer(e)}},{key:"_createUnpacker",value:function(e){return new h.Unpacker(e)}},{key:"version",get:function(){return f.BOLT_PROTOCOL_V2}}]),t}(l.default);r.default=p},{"./bolt-protocol-v1":236,"./constants":264,"./packstream-v2":269,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":19}],238:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/inherits")),c=n(e("./bolt-protocol-v2")),v=n(e("./request-message")),y=e("./bolt-protocol-util"),_=e("./stream-observers"),l=e("./constants"),h=new _.StreamObserver,f=function(e){function t(){return(0,i.default)(this,t),(0,s.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,a.default)(t,e),(0,o.default)(t,[{key:"transformMetadata",value:function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e}},{key:"initialize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.userAgent,r=e.authToken,n=e.onError,i=e.onComplete,o=new _.LoginObserver({connection:this._connection,afterError:n,afterComplete:i});return this._connection.write(v.default.hello(t,r),o,!0),o}},{key:"prepareToClose",value:function(){this._connection.write(v.default.goodbye(),h,!0)}},{key:"beginTransaction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.bookmark,r=e.txConfig,n=e.database,i=e.mode,o=e.beforeError,s=e.afterError,u=e.beforeComplete,a=e.afterComplete,c=new _.ResultStreamObserver({connection:this._connection,beforeError:o,afterError:s,beforeComplete:u,afterComplete:a});return c.prepareToHandleSingleResponse(),(0,y.assertDatabaseIsEmpty)(n,this._connection,c),this._connection.write(v.default.begin({bookmark:t,txConfig:r,mode:i}),c,!0),c}},{key:"commitTransaction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.beforeError,r=e.afterError,n=e.beforeComplete,i=e.afterComplete,o=new _.ResultStreamObserver({connection:this._connection,beforeError:t,afterError:r,beforeComplete:n,afterComplete:i});return o.prepareToHandleSingleResponse(),this._connection.write(v.default.commit(),o,!0),o}},{key:"rollbackTransaction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.beforeError,r=e.afterError,n=e.beforeComplete,i=e.afterComplete,o=new _.ResultStreamObserver({connection:this._connection,beforeError:t,afterError:r,beforeComplete:n,afterComplete:i});return o.prepareToHandleSingleResponse(),this._connection.write(v.default.rollback(),o,!0),o}},{key:"run",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=r.bookmark,i=r.txConfig,o=r.database,s=r.mode,u=r.beforeKeys,a=r.afterKeys,c=r.beforeError,l=r.afterError,h=r.beforeComplete,f=r.afterComplete,p=r.flush,b=void 0===p||p,d=new _.ResultStreamObserver({connection:this._connection,beforeKeys:u,afterKeys:a,beforeError:c,afterError:l,beforeComplete:h,afterComplete:f});return(0,y.assertDatabaseIsEmpty)(o,this._connection,d),this._connection.write(v.default.runWithMetadata(e,t,{bookmark:n,txConfig:i,mode:s}),d,!1),this._connection.write(v.default.pullAll(),d,b),d}},{key:"version",get:function(){return l.BOLT_PROTOCOL_V3}}]),t}(c.default);r.default=f},{"./bolt-protocol-util":235,"./bolt-protocol-v2":237,"./constants":264,"./request-message":274,"./stream-observers":283,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],239:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),a=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/inherits")),l=i(e("./bolt-protocol-v3")),w=n(e("./request-message")),O=e("./stream-observers"),h=e("./constants"),f=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"beginTransaction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.bookmark,r=e.txConfig,n=e.database,i=e.mode,o=e.beforeError,s=e.afterError,u=e.beforeComplete,a=e.afterComplete,c=new O.ResultStreamObserver({connection:this._connection,beforeError:o,afterError:s,beforeComplete:u,afterComplete:a});return c.prepareToHandleSingleResponse(),this._connection.write(w.default.begin({bookmark:t,txConfig:r,database:n,mode:i}),c,!0),c}},{key:"run",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=r.bookmark,i=r.txConfig,o=r.database,s=r.mode,u=r.beforeKeys,a=r.afterKeys,c=r.beforeError,l=r.afterError,h=r.beforeComplete,f=r.afterComplete,p=r.flush,b=void 0===p||p,d=r.reactive,v=void 0!==d&&d,y=r.fetchSize,_=void 0===y?w.ALL:y,m=new O.ResultStreamObserver({connection:this._connection,reactive:v,fetchSize:_,moreFunction:this._requestMore,discardFunction:this._requestDiscard,beforeKeys:u,afterKeys:a,beforeError:c,afterError:l,beforeComplete:h,afterComplete:f}),g=v;return this._connection.write(w.default.runWithMetadata(e,t,{bookmark:n,txConfig:i,database:o,mode:s}),m,g&&b),v||this._connection.write(w.default.pull({n:_}),m,b),m}},{key:"_requestMore",value:function(e,t,r,n){e.write(w.default.pull({stmtId:t,n:r}),n,!0)}},{key:"_requestDiscard",value:function(e,t,r){e.write(w.default.discard({stmtId:t}),r,!0)}},{key:"_noOp",value:function(){}},{key:"version",get:function(){return h.BOLT_PROTOCOL_V4_0}}]),t}(l.default);r.default=f},{"./bolt-protocol-v3":238,"./constants":264,"./request-message":274,"./stream-observers":283,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":19}],240:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime/helpers/classCallCheck")),u=i(e("@babel/runtime/helpers/createClass")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),c=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),o=i(e("./bolt-protocol-v4x0")),h=n(e("./request-message")),f=e("./constants"),p=e("./stream-observers"),b=function(e){function o(e,t,r,n){var i;return(0,s.default)(this,o),(i=(0,a.default)(this,(0,c.default)(o).call(this,e,t,r)))._serversideRouting=n,i}return(0,l.default)(o,e),(0,u.default)(o,[{key:"initialize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.userAgent,r=e.authToken,n=e.onError,i=e.onComplete,o=new p.LoginObserver({connection:this._connection,afterError:n,afterComplete:i});return this._connection.write(h.default.hello(t,r,this._serversideRouting),o,!0),o}},{key:"version",get:function(){return f.BOLT_PROTOCOL_V4_1}}]),o}(o.default);r.default=b},{"./bolt-protocol-v4x0":239,"./constants":264,"./request-message":274,"./stream-observers":283,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":19}],241:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),a=n(e("@babel/runtime/helpers/getPrototypeOf")),c=n(e("@babel/runtime/helpers/inherits")),i=n(e("./bolt-protocol-v4x1")),l=e("./constants"),h=function(e){function i(e,t,r,n){return(0,o.default)(this,i),(0,u.default)(this,(0,a.default)(i).call(this,e,t,r,n))}return(0,c.default)(i,e),(0,s.default)(i,[{key:"version",get:function(){return l.BOLT_PROTOCOL_V4_2}}]),i}(i.default);r.default=h},{"./bolt-protocol-v4x1":240,"./constants":264,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],242:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/defineProperty")),s=i(e("@babel/runtime/helpers/classCallCheck")),u=i(e("@babel/runtime/helpers/createClass")),a=n(e("./util")),c=function(){function t(e){(0,s.default)(this,t),this._values=function(e){if(!e)return[];if(a.isString(e))return[e];if(Array.isArray(e)){for(var t=[],r=function r(e){return e.reduce(function(e,t){return Array.isArray(t)?e.concat(r(t)):e.concat(t)},[])}(e),n=0;n<r.length;n++){var i=r[n];if(null!=i){if(!a.isString(i))throw new TypeError("Bookmark value should be a string, given: '".concat(i,"'"));t.push(i)}}return t}throw new TypeError("Bookmark should either be a string or a string array, given: '".concat(e,"'"))}(e)}return(0,u.default)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"values",value:function(){return this._values}},{key:"asBeginTransactionParameters",value:function(){return this.isEmpty()?{}:(0,o.default)({},"bookmarks",this._values)}}],[{key:"empty",value:function(){return l}}]),t}(),l=new(r.default=c)(null)},{"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13}],243:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),a=n(e("@babel/runtime/helpers/getPrototypeOf")),c=n(e("@babel/runtime/helpers/inherits")),i=function(e){function i(e){var t;(0,o.default)(this,i);var r=e instanceof ArrayBuffer?e:new ArrayBuffer(e);return(t=(0,u.default)(this,(0,a.default)(i).call(this,r.byteLength)))._buffer=r,t._view=new DataView(t._buffer),t}return(0,c.default)(i,e),(0,s.default)(i,[{key:"putUInt8",value:function(e,t){this._view.setUint8(e,t)}},{key:"getUInt8",value:function(e){return this._view.getUint8(e)}},{key:"putInt8",value:function(e,t){this._view.setInt8(e,t)}},{key:"getInt8",value:function(e){return this._view.getInt8(e)}},{key:"getFloat64",value:function(e){return this._view.getFloat64(e)}},{key:"putFloat64",value:function(e,t){this._view.setFloat64(e,t)}},{key:"getSlice",value:function(e,t){if(this._buffer.slice)return new i(this._buffer.slice(e,e+t));for(var r=new i(t),n=0;n<t;n++)r.putUInt8(n,this.getUInt8(n+e));return r}},{key:"readView",value:function(e){return new DataView(this._buffer,this._updatePos(e),e)}}]),i}(n(e("../buf/base-buf")).default);r.default=i},{"../buf/base-buf":248,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],244:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),c=n(e("./browser-buf")),l=e("../../error"),h=e("../util"),o=function(){function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e){return new WebSocket(e)};(0,a.default)(this,u),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this);var n=function(e,t){var r=function(e){return!0===e.encrypted||e.encrypted===h.ENCRYPTION_ON}(e),n=function(e){return!1===e.encrypted||e.encrypted===h.ENCRYPTION_OFF}(e),i=e.trust,o=function(e){var t="function"==typeof e?e():"";return t&&0<=t.toLowerCase().indexOf("https")}(t);if(function(e,t,r){null===r||(e&&!r?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):t&&r&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(r,n,o),n)return{scheme:"ws",error:null};if(o)return{scheme:"wss",error:null};if(r){return i&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==i?{scheme:null,error:(0,l.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+i+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+h.ENCRYPTION_OFF+'"` in the driver configuration.')}:{scheme:"wss",error:null}}return{scheme:"ws",error:null}}(this._config=e,t),i=n.scheme,o=n.error;if(o)this._error=o;else{this._ws=function(t,r,n){var e=t+"://"+r.asHostPort();try{return n(e)}catch(e){if(function(e,t){return"SyntaxError"===e.name&&function(e){return"["===e.charAt(0)&&-1!==e.indexOf("]")}(t.asHostPort())}(e,r)){var i=function(e,t){var r=t.host().replace(new RegExp(":","g"),"-").replace("%","s")+".ipv6-literal.net";return"".concat(e,"://").concat(r,":").concat(t.port())}(t,r);return n(i)}throw e}}(i,e.address,r),this._ws.binaryType="arraybuffer";var s=this;this._ws.onclose=function(e){e&&!e.wasClean&&s._handleConnectionError(),s._open=!1},this._ws.onopen=function(){s._clearConnectionTimeout();var e=s._pending;s._pending=null;for(var t=0;t<e.length;t++)s.write(e[t])},this._ws.onmessage=function(e){if(s.onmessage){var t=new c.default(e.data);s.onmessage(t)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return(0,i.default)(u,[{key:"_handleConnectionError",value:function(){if(this._connectionTimeoutFired)return this._error=(0,l.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&(this._error=(0,l.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))}},{key:"write",value:function(e){if(null!==this._pending)this._pending.push(e);else{if(!(e instanceof c.default))throw(0,l.newError)("Don't know how to send buffer: "+e);try{this._ws.send(e._buffer)}catch(e){if(1===this._ws.readyState)throw e;this._handleConnectionError()}}}},{key:"close",value:function(){var r=this;return new Promise(function(e,t){r._ws&&3!==r._ws.readyState?(r._open=!1,r._clearConnectionTimeout(),r._ws.onclose=function(){return e()},r._ws.close()):e()})}},{key:"_setupConnectionTimeout",value:function(){var e=this,t=this._config.connectionTimeout;if(t){var r=this._ws;return setTimeout(function(){1!==r.readyState&&(e._connectionTimeoutFired=!0,r.close())},t)}return null}},{key:"_clearConnectionTimeout",value:function(){var e=this._connectionTimeoutId;!e&&0!==e||(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(e))}}]),u}();function f(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}r.default=o},{"../../error":231,"../util":288,"./browser-buf":243,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],245:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/inherits")),c=function(e){function t(){return(0,i.default)(this,t),(0,s.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,a.default)(t,e),(0,o.default)(t,[{key:"resolve",value:function(e){return this._resolveToItself(e)}}]),t}(n(e("../resolver/base-host-name-resolver")).default);r.default=c},{"../resolver/base-host-name-resolver":275,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],246:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("../browser/browser-buf")),o=e("text-encoding-utf-8"),s=new o.TextEncoder("utf-8"),u=new o.TextDecoder("utf-8");var a={encode:function(e){return new i.default(s.encode(e).buffer)},decode:function(e,t){if(e instanceof i.default)return u.decode(e.readView(Math.min(t,e.length-e.position)));for(var r=new i.default(t),n=0;n<t;n++)r.writeUInt8(e.readUInt8());return r.reset(),u.decode(r.readView(t))}};r.default=a},{"../browser/browser-buf":243,"@babel/runtime/helpers/interopRequireDefault":12,"text-encoding-utf-8":228}],247:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.utf8=r.HostNameResolver=r.Channel=r.alloc=void 0;var i=n(e("./browser-buf")),o=n(e("./browser-channel")),s=n(e("./browser-host-name-resolver")),u=n(e("./browser-utf8"));r.alloc=function(e){return new i.default(e)};var a=o.default;r.Channel=a;var c=s.default;r.HostNameResolver=c;var l=u.default;r.utf8=l},{"./browser-buf":243,"./browser-channel":244,"./browser-host-name-resolver":245,"./browser-utf8":246,"@babel/runtime/helpers/interopRequireDefault":12}],248:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),a=n(e("@babel/runtime/helpers/classCallCheck")),c=n(e("@babel/runtime/helpers/createClass")),i=function(){function t(e){(0,a.default)(this,t),this.position=0,this.length=e}return(0,c.default)(t,[{key:"getUInt8",value:function(e){throw new Error("Not implemented")}},{key:"getInt8",value:function(e){throw new Error("Not implemented")}},{key:"getFloat64",value:function(e){throw new Error("Not implemented")}},{key:"putUInt8",value:function(e,t){throw new Error("Not implemented")}},{key:"putInt8",value:function(e,t){throw new Error("Not implemented")}},{key:"putFloat64",value:function(e,t){throw new Error("Not implemented")}},{key:"getInt16",value:function(e){return this.getInt8(e)<<8|this.getUInt8(e+1)}},{key:"getUInt16",value:function(e){return this.getUInt8(e)<<8|this.getUInt8(e+1)}},{key:"getInt32",value:function(e){return this.getInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)}},{key:"getUInt32",value:function(e){return this.getUInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)}},{key:"getInt64",value:function(e){return this.getInt8(e)<<56|this.getUInt8(e+1)<<48|this.getUInt8(e+2)<<40|this.getUInt8(e+3)<<32|this.getUInt8(e+4)<<24|this.getUInt8(e+5)<<16|this.getUInt8(e+6)<<8|this.getUInt8(e+7)}},{key:"getSlice",value:function(e,t){return new l(e,t,this)}},{key:"putInt16",value:function(e,t){this.putInt8(e,t>>8),this.putUInt8(e+1,255&t)}},{key:"putUInt16",value:function(e,t){this.putUInt8(e,t>>8&255),this.putUInt8(e+1,255&t)}},{key:"putInt32",value:function(e,t){this.putInt8(e,t>>24),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)}},{key:"putUInt32",value:function(e,t){this.putUInt8(e,t>>24&255),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)}},{key:"putInt64",value:function(e,t){this.putInt8(e,t>>48),this.putUInt8(e+1,t>>42&255),this.putUInt8(e+2,t>>36&255),this.putUInt8(e+3,t>>30&255),this.putUInt8(e+4,t>>24&255),this.putUInt8(e+5,t>>16&255),this.putUInt8(e+6,t>>8&255),this.putUInt8(e+7,255&t)}},{key:"putBytes",value:function(e,t){for(var r=0,n=t.remaining();r<n;r++)this.putUInt8(e+r,t.readUInt8())}},{key:"readUInt8",value:function(){return this.getUInt8(this._updatePos(1))}},{key:"readInt8",value:function(){return this.getInt8(this._updatePos(1))}},{key:"readUInt16",value:function(){return this.getUInt16(this._updatePos(2))}},{key:"readUInt32",value:function(){return this.getUInt32(this._updatePos(4))}},{key:"readInt16",value:function(){return this.getInt16(this._updatePos(2))}},{key:"readInt32",value:function(){return this.getInt32(this._updatePos(4))}},{key:"readInt64",value:function(){return this.getInt32(this._updatePos(8))}},{key:"readFloat64",value:function(){return this.getFloat64(this._updatePos(8))}},{key:"writeUInt8",value:function(e){this.putUInt8(this._updatePos(1),e)}},{key:"writeInt8",value:function(e){this.putInt8(this._updatePos(1),e)}},{key:"writeInt16",value:function(e){this.putInt16(this._updatePos(2),e)}},{key:"writeInt32",value:function(e){this.putInt32(this._updatePos(4),e)}},{key:"writeUInt32",value:function(e){this.putUInt32(this._updatePos(4),e)}},{key:"writeInt64",value:function(e){this.putInt64(this._updatePos(8),e)}},{key:"writeFloat64",value:function(e){this.putFloat64(this._updatePos(8),e)}},{key:"writeBytes",value:function(e){this.putBytes(this._updatePos(e.remaining()),e)}},{key:"readSlice",value:function(e){return this.getSlice(this._updatePos(e),e)}},{key:"_updatePos",value:function(e){var t=this.position;return this.position+=e,t}},{key:"remaining",value:function(){return this.length-this.position}},{key:"hasRemaining",value:function(){return 0<this.remaining()}},{key:"reset",value:function(){this.position=0}},{key:"toString",value:function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()}},{key:"toHex",value:function(){for(var e="",t=0;t<this.length;t++){var r=this.getUInt8(t).toString(16);1===r.length&&(r="0"+r),e+=r,t!==this.length-1&&(e+=" ")}return e}}]),t}(),l=function(e){function i(e,t,r){var n;return(0,a.default)(this,i),(n=(0,o.default)(this,(0,s.default)(i).call(this,t)))._start=e,n._inner=r,n}return(0,u.default)(i,e),(0,c.default)(i,[{key:"putUInt8",value:function(e,t){this._inner.putUInt8(this._start+e,t)}},{key:"getUInt8",value:function(e){return this._inner.getUInt8(this._start+e)}},{key:"putInt8",value:function(e,t){this._inner.putInt8(this._start+e,t)}},{key:"putFloat64",value:function(e,t){this._inner.putFloat64(this._start+e,t)}},{key:"getInt8",value:function(e){return this._inner.getInt8(this._start+e)}},{key:"getFloat64",value:function(e){return this._inner.getFloat64(this._start+e)}}]),i}(r.default=i)},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],249:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),a=n(e("@babel/runtime/helpers/getPrototypeOf")),c=n(e("@babel/runtime/helpers/inherits")),i=n(e("./base-buf")),l=e("../browser"),h=function(e){function i(e){var t;(0,o.default)(this,i);for(var r=0,n=0;n<e.length;n++)r+=e[n].length;return(t=(0,u.default)(this,(0,a.default)(i).call(this,r)))._buffers=e,t}return(0,c.default)(i,e),(0,s.default)(i,[{key:"getUInt8",value:function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getUInt8(e);e-=r.length}}},{key:"getInt8",value:function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getInt8(e);e-=r.length}}},{key:"getFloat64",value:function(e){for(var t=(0,l.alloc)(8),r=0;r<8;r++)t.putUInt8(r,this.getUInt8(e+r));return t.getFloat64(0)}}]),i}(i.default);r.default=h},{"../browser":247,"./base-buf":248,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],250:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=e("../error"),s=e("./util"),u=[null,void 0,!0,!1,s.ENCRYPTION_ON,s.ENCRYPTION_OFF],a=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];r.default=function e(t,r,n){(0,i.default)(this,e),this.address=t,this.encrypted=function(e){var t=e.encrypted;if(-1!==u.indexOf(t))return t;throw(0,o.newError)("Illegal value of the encrypted setting ".concat(t,". Expected one of ").concat(u))}(r),this.trust=function(e){var t=e.trust;if(-1!==a.indexOf(t))return t;throw(0,o.newError)("Illegal value of the trust setting ".concat(t,". Expected one of ").concat(a))}(r),this.trustedCertificates=function(e){return e.trustedCertificates||[]}(r),this.knownHostsPath=function(e){return e.knownHosts||null}(r),this.connectionErrorCode=n||o.SERVICE_UNAVAILABLE,this.connectionTimeout=function(e){var t=parseInt(e.connectionTimeout,10);return 0===t?null:t&&t<0?null:t||3e4}(r)}},{"../error":231,"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/interopRequireDefault":12}],251:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.Dechunker=r.Chunker=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/inherits")),c=n(e("./buf/base-buf")),l=e("./browser"),h=n(e("./buf/combined-buf")),f=function(e){function n(e,t){var r;return(0,i.default)(this,n),(r=(0,s.default)(this,(0,u.default)(n).call(this,0)))._bufferSize=t||1400,r._ch=e,r._buffer=(0,l.alloc)(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}return(0,a.default)(n,e),(0,o.default)(n,[{key:"putUInt8",value:function(e,t){this._ensure(1),this._buffer.writeUInt8(t)}},{key:"putInt8",value:function(e,t){this._ensure(1),this._buffer.writeInt8(t)}},{key:"putFloat64",value:function(e,t){this._ensure(8),this._buffer.writeFloat64(t)}},{key:"putBytes",value:function(e,t){for(;0<t.remaining();)this._ensure(1),this._buffer.remaining()>t.remaining()?this._buffer.writeBytes(t):this._buffer.writeBytes(t.readSlice(this._buffer.remaining()));return this}},{key:"flush",value:function(){if(0<this._buffer.position){this._closeChunkIfOpen();var e=this._buffer;this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,l.alloc)(this._bufferSize),this._chunkOpen=!1}return this}},{key:"messageBoundary",value:function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)}},{key:"_ensure",value:function(e){var t=this._chunkOpen?e:e+2;this._buffer.remaining()<t&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)}},{key:"_closeChunkIfOpen",value:function(){if(this._chunkOpen){var e=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1}}}]),n}(c.default);r.Chunker=f;var p=function(){function e(){(0,i.default)(this,e),this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return(0,o.default)(e,[{key:"AWAITING_CHUNK",value:function(e){return 2<=e.remaining()?this._onHeader(e.readUInt16()):(this._partialChunkHeader=e.readUInt8()<<8,this.IN_HEADER)}},{key:"IN_HEADER",value:function(e){return this._onHeader(65535&(this._partialChunkHeader|e.readUInt8()))}},{key:"IN_CHUNK",value:function(e){return this._chunkSize<=e.remaining()?(this._currentMessage.push(e.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=e.remaining(),this._currentMessage.push(e.readSlice(e.remaining())),this.IN_CHUNK)}},{key:"CLOSED",value:function(e){}},{key:"_onHeader",value:function(e){if(0!==e)return this._chunkSize=e,this.IN_CHUNK;var t;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new h.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}},{key:"write",value:function(e){for(;e.hasRemaining();)this._state=this._state(e)}}]),e}();r.Dechunker=p},{"./browser":247,"./buf/base-buf":248,"./buf/combined-buf":249,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],252:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),c=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),h=n(e("@babel/runtime/helpers/assertThisInitialized")),f=n(e("@babel/runtime/helpers/inherits")),p=e("./browser"),b=e("./chunking"),d=e("../error"),v=n(e("./channel-config")),y=n(e("./protocol-handshaker")),u=n(e("./connection"));n(e("./bolt-protocol-v1")),e("./stream-observers");function _(){}var m={onNext:_,onCompleted:_,onError:_},g=0,w=function(e){function u(e,t,r,n){var i,o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;return(0,a.default)(this,u),(i=(0,c.default)(this,(0,l.default)(u).call(this,t)))._id=g++,i._address=r,i._server={address:r.asHostPort()},i.creationTimestamp=Date.now(),i._disableLosslessIntegers=o,i._pendingObservers=[],i._currentObserver=void 0,i._ch=e,i._dechunker=new b.Dechunker,i._chunker=new b.Chunker(e),i._log=n,i._serversideRouting=s,i._dbConnectionId=null,i._protocol=null,i._currentFailure=null,i._isBroken=!1,i._log.isDebugEnabled()&&i._log.debug("".concat((0,h.default)(i)," created towards ").concat(r)),i}var t;return(0,f.default)(u,e),(0,s.default)(u,[{key:"connect",value:function(e,t){var r=this;return this._negotiateProtocol().then(function(){return r._initialize(e,t)})}},{key:"_negotiateProtocol",value:function(){var n=this,i=new y.default(this,this._ch,this._chunker,this._disableLosslessIntegers,this._log,this._serversideRouting);return new Promise(function(t,r){function e(e){n._handleFatalError(e),r(e)}n._ch.onerror=e.bind(n),n._ch._error&&e(n._ch._error),n._ch.onmessage=function(e){try{n._protocol=i.createNegotiatedProtocol(e),n._ch.onerror=n._handleFatalError.bind(n),n._ch.onmessage=function(e){return n._dechunker.write(e)},n._dechunker.onmessage=function(e){n._handleMessage(n._protocol.unpacker().unpack(e))},e.hasRemaining()&&n._dechunker.write(e.readSlice(e.remaining())),t(n)}catch(e){n._handleFatalError(e),r(e)}},i.writeHandshakeRequest()})}},{key:"_initialize",value:function(r,n){var i=this,o=this;return new Promise(function(e,t){i._protocol.initialize({userAgent:r,authToken:n,onError:function(e){return t(e)},onComplete:function(){return e(o)}})})}},{key:"protocol",value:function(){return this._protocol}},{key:"write",value:function(e,t,r){var n=this;this._queueObserver(t)&&(this._log.isDebugEnabled()&&this._log.debug("".concat(this," C: ").concat(e)),this._protocol.packer().packStruct(e.signature,e.fields.map(function(e){return n._packable(e)})),this._chunker.messageBoundary(),r&&this._chunker.flush())}},{key:"_handleFatalError",value:function(e){for(this._isBroken=!0,this._error=this.handleAndTransformError(e,this._address),this._log.isErrorEnabled()&&this._log.error("".concat(this," experienced a fatal error ").concat(JSON.stringify(this._error))),this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(this._error);0<this._pendingObservers.length;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(this._error)}}},{key:"_handleMessage",value:function(e){if(!this._isBroken){var t=e.fields[0];switch(e.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: RECORD ").concat(JSON.stringify(e))),this._currentObserver.onNext(t);break;case 112:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: SUCCESS ").concat(JSON.stringify(e)));try{var r=this._protocol.transformMetadata(t);this._currentObserver.onCompleted(r)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: FAILURE ").concat(JSON.stringify(e)));try{var n=(0,d.newError)(t.message,t.code);this._currentFailure=this.handleAndTransformError(n,this._address),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._resetOnFailure()}break;case 126:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: IGNORED ").concat(JSON.stringify(e)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,d.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._handleFatalError((0,d.newError)("Unknown Bolt protocol message: "+e))}}}},{key:"resetAndFlush",value:function(){var n=this;return new Promise(function(e,r){n._protocol.reset({onError:function(e){if(n._isBroken)r(e);else{var t=n._handleProtocolError("Received FAILURE as a response for RESET: "+e);r(t)}},onComplete:function(){e()}})})}},{key:"_resetOnFailure",value:function(){var e=this;this._protocol.reset({onError:function(){e._currentFailure=null},onComplete:function(){e._currentFailure=null}})}},{key:"_queueObserver",value:function(e){return this._isBroken?(e&&e.onError&&e.onError(this._error),!1):((e=e||m).onCompleted=e.onCompleted||_,e.onError=e.onError||_,e.onNext=e.onNext||_,void 0===this._currentObserver?this._currentObserver=e:this._pendingObservers.push(e),!0)}},{key:"_updateCurrentObserver",value:function(){this._currentObserver=this._pendingObservers.shift()}},{key:"isOpen",value:function(){return!this._isBroken&&this._ch._open}},{key:"close",value:(t=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._log.isDebugEnabled()&&this._log.debug("".concat(this," closing")),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),e.next=4,this._ch.close();case 4:this._log.isDebugEnabled()&&this._log.debug("".concat(this," closed"));case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")}},{key:"_packable",value:function(e){return this._protocol.packer().packable(e)}},{key:"_handleProtocolError",value:function(e){this._currentFailure=null,this._updateCurrentObserver();var t=(0,d.newError)(e,d.PROTOCOL_ERROR);return this._handleFatalError(t),t}},{key:"id",get:function(){return this._id}},{key:"databaseId",get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e}},{key:"address",get:function(){return this._address}},{key:"version",get:function(){return this._server.version},set:function(e){this._server.version=e}},{key:"server",get:function(){return this._server}}],[{key:"create",value:function(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,o=new v.default(e,t,r.errorCode());return new u(new p.Channel(o),r,e,n,t.disableLosslessIntegers,i)}}]),u}(u.default);r.default=w},{"../error":231,"./bolt-protocol-v1":236,"./browser":247,"./channel-config":250,"./chunking":251,"./connection":262,"./protocol-handshaker":272,"./stream-observers":283,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19,"@babel/runtime/regenerator":27}],253:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/inherits")),c=function(e){function n(e,t){var r;return(0,i.default)(this,n),r=(0,s.default)(this,(0,u.default)(n).call(this,t)),t&&(r._originalErrorHandler=e._errorHandler,e._errorHandler=r._errorHandler),r._delegate=e,r}return(0,a.default)(n,e),(0,o.default)(n,[{key:"isOpen",value:function(){return this._delegate.isOpen()}},{key:"protocol",value:function(){return this._delegate.protocol()}},{key:"connect",value:function(e,t){return this._delegate.connect(e,t)}},{key:"write",value:function(e,t,r){return this._delegate.write(e,t,r)}},{key:"resetAndFlush",value:function(){return this._delegate.resetAndFlush()}},{key:"close",value:function(){return this._delegate.close()}},{key:"_release",value:function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()}},{key:"id",get:function(){return this._delegate.id}},{key:"databaseId",get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e}},{key:"server",get:function(){return this._delegate.server}},{key:"address",get:function(){return this._delegate.address}},{key:"version",get:function(){return this._delegate.version},set:function(e){this._delegate.version=e}}]),n}(n(e("./connection")).default);r.default=c},{"./connection":262,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],254:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("../error"),u=function(){function n(e,t,r){(0,i.default)(this,n),this._errorCode=e,this._handleUnavailability=t||a,this._handleWriteFailure=r||a}return(0,o.default)(n,[{key:"errorCode",value:function(){return this._errorCode}},{key:"handleAndTransformError",value:function(e,t){return function(e){if(e)return e.code===s.SESSION_EXPIRED||e.code===s.SERVICE_UNAVAILABLE||"Neo.TransientError.General.DatabaseUnavailable"===e.code;return!1}(e)?this._handleUnavailability(e,t):function(e){if(e)return"Neo.ClientError.Cluster.NotALeader"===e.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===e.code;return!1}(e)?this._handleWriteFailure(e,t):e}}]),n}();function a(e){return e}r.default=u},{"../error":231,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],255:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/inherits")),c=function(e){function r(e){var t;return(0,i.default)(this,r),(t=(0,s.default)(this,(0,u.default)(r).call(this,{mode:e._mode,database:e._database,bookmark:e._bookmark,connectionProvider:e._connectionProvider})))._connectionHolder=e,t}return(0,a.default)(r,e),(0,o.default)(r,[{key:"initializeConnection",value:function(){return 0!==this._connectionHolder._referenceCount}},{key:"getConnection",value:function(){return this._connectionHolder.getConnection()}},{key:"releaseConnection",value:function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})}},{key:"close",value:function(){return this._connectionHolder.getConnection().catch(function(){return function(){return Promise.resolve()}})}}]),r}(n(e("./connection-holder")).default);r.default=c},{"./connection-holder":256,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],256:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_CONNECTION_HOLDER=r.default=void 0;var i=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),a=n(e("@babel/runtime/helpers/classCallCheck")),c=n(e("@babel/runtime/helpers/createClass")),u=e("../error"),l=e("./util"),h=e("./constants"),f=n(e("./bookmark")),p=function(){function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.mode,r=void 0===t?h.ACCESS_MODE_WRITE:t,n=e.database,i=void 0===n?"":n,o=e.bookmark,s=e.connectionProvider;(0,a.default)(this,u),this._mode=r,this._database=i?(0,l.assertString)(i,"database"):"",this._bookmark=o||f.default.empty(),this._connectionProvider=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null)}return(0,c.default)(u,[{key:"mode",value:function(){return this._mode}},{key:"database",value:function(){return this._database}},{key:"initializeConnection",value:function(){return 0!==this._referenceCount?(this._referenceCount++,!1):(this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmark:this._bookmark}),this._referenceCount++,!0)}},{key:"getConnection",value:function(){return this._connectionPromise}},{key:"releaseConnection",value:function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)}},{key:"close",value:function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())}},{key:"_releaseConnection",value:function(){return this._connectionPromise=this._connectionPromise.then(function(e){return e?e.resetAndFlush().catch(b).then(function(){return e._release()}):Promise.resolve()}).catch(b),this._connectionPromise}}]),u}();function b(e){}var d=new(function(e){function t(){return(0,a.default)(this,t),(0,i.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,c.default)(t,[{key:"initializeConnection",value:function(){return!0}},{key:"getConnection",value:function(){return Promise.reject((0,u.newError)("This connection holder does not serve connections"))}},{key:"releaseConnection",value:function(){return Promise.resolve()}},{key:"close",value:function(){return Promise.resolve()}}]),t}(r.default=p));r.EMPTY_CONNECTION_HOLDER=d},{"../error":231,"./bookmark":242,"./constants":264,"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],257:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),c=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/possibleConstructorReturn")),h=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),a=n(e("./connection-provider-pooled")),f=n(e("./connection-delegate")),p=n(e("./connection-channel")),b=e("./constants"),d=function(e){function a(e){var t,r=e.id,n=e.config,i=e.log,o=e.address,s=e.userAgent,u=e.authToken;return(0,c.default)(this,a),(t=(0,l.default)(this,(0,h.default)(a).call(this,{id:r,config:n,log:i,userAgent:s,authToken:u})))._address=o,t}var t,r,n;return(0,u.default)(a,e),(0,s.default)(a,[{key:"acquireConnection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.accessMode,e.database,e.bookmarks;return this._connectionPool.acquire(this._address).then(function(e){return new f.default(e,null)})}},{key:"_hasProtocolVersion",value:(n=(0,o.default)(i.default.mark(function e(t){var r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.default.create(this._address,this._config,this._createConnectionErrorHandler(),this._log),e.prev=1,e.next=4,r._negotiateProtocol();case 4:if(n=r.protocol())return e.abrupt("return",t(n.version));e.next=7;break;case 7:return e.abrupt("return",!1);case 8:return e.prev=8,e.next=11,r.close();case 11:return e.finish(8);case 12:case"end":return e.stop()}},e,this,[[1,,8,12]])})),function(e){return n.apply(this,arguments)})},{key:"supportsMultiDb",value:(r=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._hasProtocolVersion(function(e){return e>=b.BOLT_PROTOCOL_V4_0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"supportsTransactionConfig",value:(t=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._hasProtocolVersion(function(e){return e>=b.BOLT_PROTOCOL_V3});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),a}(a.default);r.default=d},{"./connection-channel":252,"./connection-delegate":253,"./connection-provider-pooled":258,"./constants":264,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19,"@babel/runtime/regenerator":27}],258:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),c=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/possibleConstructorReturn")),h=n(e("@babel/runtime/helpers/getPrototypeOf")),f=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/inherits")),p=n(e("./connection-channel")),b=n(e("./pool")),d=n(e("./pool-config")),v=n(e("./connection-error-handler")),y=e("../error"),a=function(e){function a(e){var t,r=e.id,n=e.config,i=e.log,o=e.userAgent,s=e.authToken,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return(0,c.default)(this,a),(t=(0,l.default)(this,(0,h.default)(a).call(this)))._id=r,t._config=n,t._log=i,t._userAgent=o,t._authToken=s,t._createChannelConnection=u||function(e){return p.default.create(e,t._config,t._createConnectionErrorHandler(),t._log)},t._connectionPool=new b.default({create:t._createConnection.bind((0,f.default)(t)),destroy:t._destroyConnection.bind((0,f.default)(t)),validate:t._validateConnection.bind((0,f.default)(t)),installIdleObserver:a._installIdleObserverOnConnection.bind((0,f.default)(t)),removeIdleObserver:a._removeIdleObserverOnConnection.bind((0,f.default)(t)),config:d.default.fromDriverConfig(n),log:t._log}),t._openConnections={},t}var t;return(0,u.default)(a,e),(0,s.default)(a,[{key:"_createConnectionErrorHandler",value:function(){return new v.default(y.SERVICE_UNAVAILABLE)}},{key:"_createConnection",value:function(e,t){var r=this,n=this._createChannelConnection(e);return n._release=function(){return t(e,n)},(this._openConnections[n.id]=n).connect(this._userAgent,this._authToken).catch(function(e){throw r._destroyConnection(n),e})}},{key:"_validateConnection",value:function(e){if(!e.isOpen())return!1;var t=this._config.maxConnectionLifetime;return Date.now()-e.creationTimestamp<=t}},{key:"_destroyConnection",value:function(e){return delete this._openConnections[e.id],e.close()}},{key:"close",value:(t=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._connectionPool.close();case 2:return e.next=4,Promise.all(Object.values(this._openConnections).map(function(e){return e.close()}));case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}],[{key:"_installIdleObserverOnConnection",value:function(e,t){e._queueObserver(t)}},{key:"_removeIdleObserverOnConnection",value:function(e){e._updateCurrentObserver()}}]),a}(n(e("./connection-provider")).default);r.default=a},{"../error":231,"./connection-channel":252,"./connection-error-handler":254,"./connection-provider":261,"./pool":271,"./pool-config":270,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19,"@babel/runtime/regenerator":27}],259:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var b=n(e("@babel/runtime/regenerator")),d=n(e("@babel/runtime/helpers/asyncToGenerator")),v=n(e("@babel/runtime/helpers/classCallCheck")),y=n(e("@babel/runtime/helpers/createClass")),_=n(e("@babel/runtime/helpers/possibleConstructorReturn")),m=n(e("@babel/runtime/helpers/getPrototypeOf")),g=n(e("@babel/runtime/helpers/inherits")),w=e("../error"),O=e("../driver"),S=n(e("../session")),k=n(e("./routing-table")),E=n(e("./rediscovery")),C=n(e("./routing-util")),x=e("./browser"),P=n(e("./connection-provider-single")),i=n(e("./connection-provider-pooled")),T=n(e("./connection-error-handler")),I=n(e("./connection-delegate")),R=n(e("./least-connected-load-balancing-strategy")),j=n(e("./bookmark")),A=n(e("./connection-channel")),N=e("../integer"),M=e("./constants"),D=(0,N.int)(3e4),o=function(e){function h(e){var t,r=e.id,n=e.address,i=e.routingContext,o=e.hostNameResolver,s=e.config,u=e.log,a=e.userAgent,c=e.authToken,l=e.routingTablePurgeDelay;return(0,v.default)(this,h),(t=(0,_.default)(this,(0,m.default)(h).call(this,{id:r,config:s,log:u,userAgent:a,authToken:c},function(e){return A.default.create(e,t._config,t._createConnectionErrorHandler(),t._log,i||{})})))._seedRouter=n,t._routingTables={},t._rediscovery=new E.default(new C.default(i,n.toString())),t._loadBalancingStrategy=new R.default(t._connectionPool),t._hostNameResolver=o,t._dnsResolver=new x.HostNameResolver,t._log=u,t._useSeedRouter=!0,t._routingTablePurgeDelay=l?(0,N.int)(l):D,t}var t,r,n,i,o,s,u,a,c,l,f,p;return(0,g.default)(h,e),(0,y.default)(h,[{key:"_createConnectionErrorHandler",value:function(){return new T.default(w.SESSION_EXPIRED)}},{key:"_handleUnavailability",value:function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forget(t,r||""),e}},{key:"_handleWriteFailure",value:function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forgetWriter(t,r||""),(0,w.newError)("No longer possible to write to server at "+t,w.SESSION_EXPIRED)}},{key:"acquireConnection",value:(p=(0,d.default)(b.default.mark(function e(){var t,r,n,i,o,s,u,a,c,l=this,h=arguments;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<h.length&&void 0!==h[0]?h[0]:{},r=t.accessMode,n=t.database,i=t.bookmark,u=new T.default(w.SESSION_EXPIRED,function(e,t){return l._handleUnavailability(e,t,n)},function(e,t){return l._handleWriteFailure(e,t,n)}),e.next=4,this._freshRoutingTable({accessMode:r,database:n||"",bookmark:i});case 4:if(a=e.sent,r!==O.READ){e.next=10;break}s=this._loadBalancingStrategy.selectReader(a.readers),o="read",e.next=16;break;case 10:if(r!==O.WRITE){e.next=15;break}s=this._loadBalancingStrategy.selectWriter(a.writers),o="write",e.next=16;break;case 15:throw(0,w.newError)("Illegal mode "+r);case 16:if(s){e.next=18;break}throw(0,w.newError)("Failed to obtain connection towards ".concat(o," server. Known routing table is: ").concat(a),w.SESSION_EXPIRED);case 18:return e.prev=18,e.next=21,this._acquireConnectionToServer(s,o,a);case 21:return c=e.sent,e.abrupt("return",new I.default(c,u));case 25:throw e.prev=25,e.t0=e.catch(18),u.handleAndTransformError(e.t0,s);case 29:case"end":return e.stop()}},e,this,[[18,25]])})),function(){return p.apply(this,arguments)})},{key:"_hasProtocolVersion",value:(f=(0,d.default)(b.default.mark(function e(t){var r,n,i,o,s;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._resolveSeedRouter(this._seedRouter);case 2:r=e.sent,i=0;case 4:if(i<r.length)return o=A.default.create(r[i],this._config,this._createConnectionErrorHandler(),this._log),e.prev=6,e.next=9,o._negotiateProtocol();e.next=25;break;case 9:if(s=o.protocol())return e.abrupt("return",t(s.version));e.next=12;break;case 12:return e.abrupt("return",!1);case 15:e.prev=15,e.t0=e.catch(6),n=e.t0;case 18:return e.prev=18,e.next=21,o.close();case 21:return e.finish(18);case 22:i++,e.next=4;break;case 25:if(n)throw n;e.next=27;break;case 27:return e.abrupt("return",!1);case 28:case"end":return e.stop()}},e,this,[[6,15,18,22]])})),function(e){return f.apply(this,arguments)})},{key:"supportsMultiDb",value:(l=(0,d.default)(b.default.mark(function e(){return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._hasProtocolVersion(function(e){return e>=M.BOLT_PROTOCOL_V4_0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"supportsTransactionConfig",value:(c=(0,d.default)(b.default.mark(function e(){return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._hasProtocolVersion(function(e){return e>=M.BOLT_PROTOCOL_V3});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"forget",value:function(t,e){e||""===e?this._routingTables[e].forget(t):Object.values(this._routingTables).forEach(function(e){return e.forget(t)}),this._connectionPool.purge(t).catch(function(){})}},{key:"forgetWriter",value:function(t,e){e||""===e?this._routingTables[e].forgetWriter(t):Object.values(this._routingTables).forEach(function(e){return e.forgetWriter(t)})}},{key:"_acquireConnectionToServer",value:function(e,t,r){return this._connectionPool.acquire(e)}},{key:"_freshRoutingTable",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.accessMode,r=e.database,n=e.bookmark,i=this._routingTables[r]||new k.default({database:r});return i.isStaleFor(t)?(this._log.info('Routing table is stale for database: "'.concat(r,'" and access mode: "').concat(t,'": ').concat(i)),this._refreshRoutingTable(i,n)):i}},{key:"_refreshRoutingTable",value:function(e,t){var r=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(r,e,t):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(r,e,t)}},{key:"_fetchRoutingTableFromSeedRouterFallbackToKnownRouters",value:(a=(0,d.default)(b.default.mark(function e(t,r,n){var i,o;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],e.next=3,this._fetchRoutingTableUsingSeedRouter(i,this._seedRouter,r,n);case 3:if(!(o=e.sent)){e.next=8;break}this._useSeedRouter=!1,e.next=11;break;case 8:return e.next=10,this._fetchRoutingTableUsingKnownRouters(t,r,n);case 10:o=e.sent;case 11:return e.next=13,this._applyRoutingTableIfPossible(r,o);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}},e,this)})),function(e,t,r){return a.apply(this,arguments)})},{key:"_fetchRoutingTableFromKnownRoutersFallbackToSeedRouter",value:(u=(0,d.default)(b.default.mark(function e(t,r,n){var i;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchRoutingTableUsingKnownRouters(t,r,n);case 2:if(i=e.sent){e.next=7;break}return e.next=6,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,r,n);case 6:i=e.sent;case 7:return e.next=9,this._applyRoutingTableIfPossible(r,i);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)})),function(e,t,r){return u.apply(this,arguments)})},{key:"_fetchRoutingTableUsingKnownRouters",value:(s=(0,d.default)(b.default.mark(function e(t,r,n){var i,o;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchRoutingTable(t,r,n);case 2:if(i=e.sent)return e.abrupt("return",i);e.next=5;break;case 5:return o=t.length-1,h._forgetRouter(r,t,o),e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)})),function(e,t,r){return s.apply(this,arguments)})},{key:"_fetchRoutingTableUsingSeedRouter",value:(o=(0,d.default)(b.default.mark(function e(t,r,n,i){var o,s;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._resolveSeedRouter(r);case 2:return o=e.sent,s=o.filter(function(e){return t.indexOf(e)<0}),e.next=6,this._fetchRoutingTable(s,n,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e,t,r,n){return o.apply(this,arguments)})},{key:"_resolveSeedRouter",value:(i=(0,d.default)(b.default.mark(function e(t){var r,n,i=this;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._hostNameResolver.resolve(t);case 2:return r=e.sent,e.next=5,Promise.all(r.map(function(e){return i._dnsResolver.resolve(e)}));case 5:return n=e.sent,e.abrupt("return",[].concat.apply([],n));case 7:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"_fetchRoutingTable",value:function(s,u,a){var c=this;return s.reduce(function(){var n=(0,d.default)(b.default.mark(function e(t,r,n){var i,o;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(i=e.sent)return e.abrupt("return",i);e.next=7;break;case 7:h._forgetRouter(u,s,n-1);case 9:return e.next=11,c._createSessionForRediscovery(r,a);case 11:if(o=e.sent)return e.prev=13,e.next=16,c._rediscovery.lookupRoutingTableOnRouter(o,u.database,r);e.next=27;break;case 16:return e.abrupt("return",e.sent);case 19:if(e.prev=19,e.t0=e.catch(13),e.t0&&"Neo.ClientError.Database.DatabaseNotFound"===e.t0.code)throw e.t0;e.next=23;break;case 23:return c._log.warn("unable to fetch routing table because of an error ".concat(e.t0)),e.abrupt("return",null);case 25:e.next=28;break;case 27:return e.abrupt("return",null);case 28:case"end":return e.stop()}},e,null,[[13,19]])}));return function(e,t,r){return n.apply(this,arguments)}}(),Promise.resolve(null))}},{key:"_createSessionForRediscovery",value:(n=(0,d.default)(b.default.mark(function e(t,r){var n,i;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._connectionPool.acquire(t);case 3:if(n=e.sent,i=new P.default(n),n.protocol().version<4)return e.abrupt("return",new S.default({mode:O.WRITE,bookmark:j.default.empty(),connectionProvider:i}));e.next=8;break;case 8:return e.abrupt("return",new S.default({mode:O.READ,database:"system",bookmark:r,connectionProvider:i}));case 11:if(e.prev=11,e.t0=e.catch(0),e.t0&&"Neo.ClientError.Security.Unauthorized"===e.t0.code)throw e.t0;e.next=15;break;case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this,[[0,11]])})),function(e,t){return n.apply(this,arguments)})},{key:"_applyRoutingTableIfPossible",value:(r=(0,d.default)(b.default.mark(function e(t,r){return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw(0,w.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),w.SERVICE_UNAVAILABLE);case 2:return 0===r.writers.length&&(this._useSeedRouter=!0),e.next=5,this._updateRoutingTable(r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"_updateRoutingTable",value:(t=(0,d.default)(b.default.mark(function e(t){var r=this;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._connectionPool.keepAll(t.allServers());case 2:Object.values(this._routingTables).forEach(function(e){e.isExpiredFor(r._routingTablePurgeDelay)&&delete r._routingTables[e.database]}),this._routingTables[t.database]=t,this._log.info("Updated routing table ".concat(t));case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}],[{key:"_forgetRouter",value:function(e,t,r){var n=t[r];e&&n&&e.forgetRouter(n)}}]),h}(i.default);r.default=o},{"../driver":230,"../error":231,"../integer":234,"../session":295,"./bookmark":242,"./browser":247,"./connection-channel":252,"./connection-delegate":253,"./connection-error-handler":254,"./connection-provider-pooled":258,"./connection-provider-single":260,"./constants":264,"./least-connected-load-balancing-strategy":265,"./rediscovery":273,"./routing-table":279,"./routing-util":280,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19,"@babel/runtime/regenerator":27}],260:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/inherits")),c=function(e){function r(e){var t;return(0,i.default)(this,r),(t=(0,s.default)(this,(0,u.default)(r).call(this)))._connection=e,t}return(0,a.default)(r,e),(0,o.default)(r,[{key:"acquireConnection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(e.accessMode,e.database,e.bookmarks,this._connection);return this._connection=null,Promise.resolve(t)}}]),r}(n(e("./connection-provider")).default);r.default=c},{"./connection-provider":261,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],261:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=(n(e("./bookmark")),function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"acquireConnection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.accessMode,e.database,e.bookmarks;throw new Error("not implemented")}},{key:"supportsMultiDb",value:function(){throw new Error("not implemented")}},{key:"supportsTransactionConfig",value:function(){throw new Error("not implemented")}},{key:"close",value:function(){throw new Error("not implemented")}}]),e}());r.default=s},{"./bookmark":242,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],262:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=(e("./stream-observers"),n(e("./bolt-protocol-v1")),function(){function t(e){(0,i.default)(this,t),this._errorHandler=e}return(0,o.default)(t,[{key:"isOpen",value:function(){throw new Error("not implemented")}},{key:"protocol",value:function(){throw new Error("not implemented")}},{key:"connect",value:function(e,t){throw new Error("not implemented")}},{key:"write",value:function(e,t,r){throw new Error("not implemented")}},{key:"resetAndFlush",value:function(){throw new Error("not implemented")}},{key:"close",value:function(){throw new Error("not implemented")}},{key:"handleAndTransformError",value:function(e,t){return this._errorHandler?this._errorHandler.handleAndTransformError(e,t):e}},{key:"id",get:function(){throw new Error("not implemented")}},{key:"databaseId",get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")}},{key:"address",get:function(){throw new Error("not implemented")}},{key:"version",get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")}},{key:"server",get:function(){throw new Error("not implemented")}}]),t}());r.default=s},{"./bolt-protocol-v1":236,"./stream-observers":283,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],263:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("./connection-holder")),u=e("../driver"),a=(e("./stream-observers"),function(){function t(e){(0,i.default)(this,t),this._connectionProvider=e}return(0,o.default)(t,[{key:"verify",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).database,t=void 0===e?"":e;return function(e,t){var r=new s.default({mode:u.READ,database:t,connectionProvider:e});return r.initializeConnection(),r.getConnection().then(function(e){return r.close().then(function(){return e.server})}).catch(function(e){return r.close().catch(function(e){}).then(function(){return Promise.reject(e)})})}(this._connectionProvider,t)}}]),t}());r.default=a},{"../driver":230,"./connection-holder":256,"./stream-observers":283,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],264:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BOLT_PROTOCOL_V4_2=r.BOLT_PROTOCOL_V4_1=r.BOLT_PROTOCOL_V4_0=r.BOLT_PROTOCOL_V3=r.BOLT_PROTOCOL_V2=r.BOLT_PROTOCOL_V1=r.ACCESS_MODE_WRITE=r.ACCESS_MODE_READ=void 0;r.ACCESS_MODE_READ="READ";r.ACCESS_MODE_WRITE="WRITE";r.BOLT_PROTOCOL_V1=1;r.BOLT_PROTOCOL_V2=2;r.BOLT_PROTOCOL_V3=3;r.BOLT_PROTOCOL_V4_0=4;r.BOLT_PROTOCOL_V4_1=4.1;r.BOLT_PROTOCOL_V4_2=4.2},{}],265:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/inherits")),c=n(e("./round-robin-array-index")),l=function(e){function r(e){var t;return(0,i.default)(this,r),(t=(0,s.default)(this,(0,u.default)(r).call(this)))._readersIndex=new c.default,t._writersIndex=new c.default,t._connectionPool=e,t}return(0,a.default)(r,e),(0,o.default)(r,[{key:"selectReader",value:function(e){return this._select(e,this._readersIndex)}},{key:"selectWriter",value:function(e){return this._select(e,this._writersIndex)}},{key:"_select",value:function(e,t){var r=e.length;if(0===r)return null;var n=t.next(r),i=n,o=null,s=Number.MAX_SAFE_INTEGER;do{var u=e[i],a=this._connectionPool.activeResourceCount(u);a<s&&(o=u,s=a),i===r-1?i=0:i++}while(i!==n);return o}}]),r}(n(e("./load-balancing-strategy")).default);r.default=l},{"./load-balancing-strategy":266,"./round-robin-array-index":278,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],266:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"selectReader",value:function(e){throw new Error("Abstract function")}},{key:"selectWriter",value:function(e){throw new Error("Abstract function")}}]),e}();r.default=s},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],267:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),a=n(e("@babel/runtime/helpers/classCallCheck")),c=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/defineProperty")),h=e("../error"),f="info",p=(i={},(0,l.default)(i,"error",0),(0,l.default)(i,"warn",1),(0,l.default)(i,f,2),(0,l.default)(i,"debug",3),i),b=function(){function r(e,t){(0,a.default)(this,r),this._level=e,this._loggerFunction=t}return(0,c.default)(r,[{key:"isErrorEnabled",value:function(){return v(this._level,"error")}},{key:"error",value:function(e){this.isErrorEnabled()&&this._loggerFunction("error",e)}},{key:"isWarnEnabled",value:function(){return v(this._level,"warn")}},{key:"warn",value:function(e){this.isWarnEnabled()&&this._loggerFunction("warn",e)}},{key:"isInfoEnabled",value:function(){return v(this._level,f)}},{key:"info",value:function(e){this.isInfoEnabled()&&this._loggerFunction(f,e)}},{key:"isDebugEnabled",value:function(){return v(this._level,"debug")}},{key:"debug",value:function(e){this.isDebugEnabled()&&this._loggerFunction("debug",e)}}],[{key:"create",value:function(e){if(e&&e.logging){var t=e.logging;return new r(function(e){if(e&&e.level){var t=e.level,r=p[t];if(!r&&0!==r)throw(0,h.newError)("Illegal logging level: ".concat(t,". Supported levels are: ").concat(Object.keys(p)));return t}return"info"}(t),function(e){if(e&&e.logger){var t=e.logger;if(t&&"function"==typeof t)return t}throw(0,h.newError)("Illegal logger function: ".concat(e.logger))}(t))}return this.noOp()}},{key:"noOp",value:function(){return d}}]),r}(),d=new(function(e){function t(){return(0,a.default)(this,t),(0,o.default)(this,(0,s.default)(t).call(this,null,null))}return(0,u.default)(t,e),(0,c.default)(t,[{key:"isErrorEnabled",value:function(){return!1}},{key:"error",value:function(e){}},{key:"isWarnEnabled",value:function(){return!1}},{key:"warn",value:function(e){}},{key:"isInfoEnabled",value:function(){return!1}},{key:"info",value:function(e){}},{key:"isDebugEnabled",value:function(){return!1}},{key:"debug",value:function(e){}}]),t}(b));function v(e,t){return p[t]<=p[e]}var y=b;r.default=y},{"../error":231,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],268:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.Structure=r.Unpacker=r.Packer=void 0;var u=i(e("@babel/runtime/helpers/typeof")),o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),a=e("./browser"),h=n(e("../integer")),f=e("../error"),p=e("../graph-types"),c=function(){function r(e,t){(0,o.default)(this,r),this.signature=e,this.fields=t}return(0,s.default)(r,[{key:"toString",value:function(){for(var e="",t=0;t<this.fields.length;t++)0<t&&(e+=", "),e+=this.fields[t];return"Structure("+this.signature+", ["+e+"])"}}]),r}();r.Structure=c;var l=function(){function t(e){(0,o.default)(this,t),this._ch=e,this._byteArraysSupported=!0}return(0,s.default)(t,[{key:"packable",value:function(o){var s=this;if(null===o)return function(){return s._ch.writeUInt8(192)};if(!0===o)return function(){return s._ch.writeUInt8(195)};if(!1===o)return function(){return s._ch.writeUInt8(194)};if("number"==typeof o)return function(){return s.packFloat(o)};if("string"==typeof o)return function(){return s.packString(o)};if((0,h.isInt)(o))return function(){return s.packInteger(o)};if(o instanceof Int8Array)return function(){return s.packBytes(o)};if(o instanceof Array)return function(){s.packListHeader(o.length);for(var e=0;e<o.length;e++)s.packable(void 0===o[e]?null:o[e])()};if(function(e){return null!=e&&"function"==typeof e[Symbol.iterator]}(o))return this.packableIterable(o);if(o instanceof p.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: ".concat(o));if(o instanceof p.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: ".concat(o));if(o instanceof p.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: ".concat(o));if(o instanceof c){for(var e=[],t=0;t<o.fields.length;t++)e[t]=this.packable(o.fields[t]);return function(){return s.packStruct(o.signature,e)}}return"object"===(0,u.default)(o)?function(){for(var e=Object.keys(o),t=0,r=0;r<e.length;r++)void 0!==o[e[r]]&&t++;s.packMapHeader(t);for(var n=0;n<e.length;n++){var i=e[n];void 0!==o[i]&&(s.packString(i),s.packable(o[i])())}}:this._nonPackableValue("Unable to pack the given value: ".concat(o))}},{key:"packableIterable",value:function(t){try{var e=Array.from(t);return this.packable(e)}catch(e){throw(0,f.newError)("Cannot pack given iterable, ".concat(e.message,": ").concat(t))}}},{key:"packStruct",value:function(e,t){t=t||[],this.packStructHeader(t.length,e);for(var r=0;r<t.length;r++)t[r]()}},{key:"packInteger",value:function(e){var t=e.high,r=e.low;e.greaterThanOrEqual(-16)&&e.lessThan(128)?this._ch.writeInt8(r):e.greaterThanOrEqual(-128)&&e.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(r)):e.greaterThanOrEqual(-32768)&&e.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(r)):(e.greaterThanOrEqual(-2147483648)&&e.lessThan(2147483648)?this._ch.writeUInt8(202):(this._ch.writeUInt8(203),this._ch.writeInt32(t)),this._ch.writeInt32(r))}},{key:"packFloat",value:function(e){this._ch.writeUInt8(193),this._ch.writeFloat64(e)}},{key:"packString",value:function(e){var t=a.utf8.encode(e),r=t.length;if(r<16)this._ch.writeUInt8(128|r),this._ch.writeBytes(t);else if(r<256)this._ch.writeUInt8(208),this._ch.writeUInt8(r),this._ch.writeBytes(t);else if(r<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256),this._ch.writeBytes(t);else{if(!(r<4294967296))throw(0,f.newError)("UTF-8 strings of size "+r+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256),this._ch.writeBytes(t)}}},{key:"packListHeader",value:function(e){if(e<16)this._ch.writeUInt8(144|e);else if(e<256)this._ch.writeUInt8(212),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,f.newError)("Lists of size "+e+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}}},{key:"packBytes",value:function(e){if(!this._byteArraysSupported)throw(0,f.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(e.length);for(var t=0;t<e.length;t++)this._ch.writeInt8(e[t])}},{key:"packBytesHeader",value:function(e){if(e<256)this._ch.writeUInt8(204),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,f.newError)("Byte arrays of size "+e+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}}},{key:"packMapHeader",value:function(e){if(e<16)this._ch.writeUInt8(160|e);else if(e<256)this._ch.writeUInt8(216),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,f.newError)("Maps of size "+e+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}}},{key:"packStructHeader",value:function(e,t){if(e<16)this._ch.writeUInt8(176|e),this._ch.writeUInt8(t);else if(e<256)this._ch.writeUInt8(220),this._ch.writeUInt8(e),this._ch.writeUInt8(t);else{if(!(e<65536))throw(0,f.newError)("Structures of size "+e+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256)}}},{key:"disableByteArrays",value:function(){this._byteArraysSupported=!1}},{key:"_nonPackableValue",value:function(e){return function(){throw(0,f.newError)(e,f.PROTOCOL_ERROR)}}}]),t}();r.Packer=l;var b=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];(0,o.default)(this,t),this._disableLosslessIntegers=e}return(0,s.default)(t,[{key:"unpack",value:function(e){var t=e.readUInt8(),r=240&t,n=15&t;if(192===t)return null;var i=this._unpackBoolean(t);if(null!==i)return i;var o=this._unpackNumberOrInteger(t,e);if(null!==o)return this._disableLosslessIntegers&&(0,h.isInt)(o)?o.toNumberOrInfinity():o;var s=this._unpackString(t,r,n,e);if(null!==s)return s;var u=this._unpackList(t,r,n,e);if(null!==u)return u;var a=this._unpackByteArray(t,e);if(null!==a)return a;var c=this._unpackMap(t,r,n,e);if(null!==c)return c;var l=this._unpackStruct(t,r,n,e);if(null!==l)return l;throw(0,f.newError)("Unknown packed value with marker "+t.toString(16))}},{key:"unpackInteger",value:function(e){var t=e.readUInt8(),r=this._unpackInteger(t,e);if(null==r)throw(0,f.newError)("Unable to unpack integer value with marker "+t.toString(16));return r}},{key:"_unpackBoolean",value:function(e){return 195===e||194!==e&&null}},{key:"_unpackNumberOrInteger",value:function(e,t){return 193===e?t.readFloat64():this._unpackInteger(e,t)}},{key:"_unpackInteger",value:function(e,t){if(0<=e&&e<128)return(0,h.int)(e);if(240<=e&&e<256)return(0,h.int)(e-256);if(200===e)return(0,h.int)(t.readInt8());if(201===e)return(0,h.int)(t.readInt16());if(202===e){var r=t.readInt32();return(0,h.int)(r)}if(203!==e)return null;var n=t.readInt32(),i=t.readInt32();return new h.default(i,n)}},{key:"_unpackString",value:function(e,t,r,n){return 128===t?a.utf8.decode(n,r):208===e?a.utf8.decode(n,n.readUInt8()):209===e?a.utf8.decode(n,n.readUInt16()):210===e?a.utf8.decode(n,n.readUInt32()):null}},{key:"_unpackList",value:function(e,t,r,n){return 144===t?this._unpackListWithSize(r,n):212===e?this._unpackListWithSize(n.readUInt8(),n):213===e?this._unpackListWithSize(n.readUInt16(),n):214===e?this._unpackListWithSize(n.readUInt32(),n):null}},{key:"_unpackListWithSize",value:function(e,t){for(var r=[],n=0;n<e;n++)r.push(this.unpack(t));return r}},{key:"_unpackByteArray",value:function(e,t){return 204===e?this._unpackByteArrayWithSize(t.readUInt8(),t):205===e?this._unpackByteArrayWithSize(t.readUInt16(),t):206===e?this._unpackByteArrayWithSize(t.readUInt32(),t):null}},{key:"_unpackByteArrayWithSize",value:function(e,t){for(var r=new Int8Array(e),n=0;n<e;n++)r[n]=t.readInt8();return r}},{key:"_unpackMap",value:function(e,t,r,n){return 160===t?this._unpackMapWithSize(r,n):216===e?this._unpackMapWithSize(n.readUInt8(),n):217===e?this._unpackMapWithSize(n.readUInt16(),n):218===e?this._unpackMapWithSize(n.readUInt32(),n):null}},{key:"_unpackMapWithSize",value:function(e,t){for(var r={},n=0;n<e;n++){r[this.unpack(t)]=this.unpack(t)}return r}},{key:"_unpackStruct",value:function(e,t,r,n){return 176===t?this._unpackStructWithSize(r,n):220===e?this._unpackStructWithSize(n.readUInt8(),n):221===e?this._unpackStructWithSize(n.readUInt16(),n):null}},{key:"_unpackStructWithSize",value:function(e,t){var r=t.readUInt8();return 78===r?this._unpackNode(e,t):82===r?this._unpackRelationship(e,t):114===r?this._unpackUnboundRelationship(e,t):80===r?this._unpackPath(e,t):this._unpackUnknownStruct(r,e,t)}},{key:"_unpackNode",value:function(e,t){return this._verifyStructSize("Node",3,e),new p.Node(this.unpack(t),this.unpack(t),this.unpack(t))}},{key:"_unpackRelationship",value:function(e,t){return this._verifyStructSize("Relationship",5,e),new p.Relationship(this.unpack(t),this.unpack(t),this.unpack(t),this.unpack(t),this.unpack(t))}},{key:"_unpackUnboundRelationship",value:function(e,t){return this._verifyStructSize("UnboundRelationship",3,e),new p.UnboundRelationship(this.unpack(t),this.unpack(t),this.unpack(t))}},{key:"_unpackPath",value:function(e,t){this._verifyStructSize("Path",3,e);for(var r=this.unpack(t),n=this.unpack(t),i=this.unpack(t),o=[],s=r[0],u=0;u<i.length;u+=2){var a=r[i[u+1]],c=i[u],l=void 0;0<c?(l=n[c-1])instanceof p.UnboundRelationship&&(n[c-1]=l=l.bind(s.identity,a.identity)):(l=n[-c-1])instanceof p.UnboundRelationship&&(n[-c-1]=l=l.bind(a.identity,s.identity)),o.push(new p.PathSegment(s,l,a)),s=a}return new p.Path(r[0],r[r.length-1],o)}},{key:"_unpackUnknownStruct",value:function(e,t,r){for(var n=new c(e,[]),i=0;i<t;i++)n.fields.push(this.unpack(r));return n}},{key:"_verifyStructSize",value:function(e,t,r){if(t!==r)throw(0,f.newError)("Wrong struct size for ".concat(e,", expected ").concat(t," but was ").concat(r),f.PROTOCOL_ERROR)}}]),t}();r.Unpacker=b},{"../error":231,"../graph-types":232,"../integer":234,"./browser":247,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/typeof":24}],269:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.Unpacker=r.Packer=void 0;var o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),a=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/get")),l=i(e("@babel/runtime/helpers/inherits")),h=n(e("./packstream-v1")),f=e("../spatial-types"),p=e("../temporal-types"),b=e("../integer"),d=e("./temporal-util"),v=88,y=89,_=70,m=102,g=function(e){function r(){return(0,o.default)(this,r),(0,u.default)(this,(0,a.default)(r).apply(this,arguments))}return(0,l.default)(r,e),(0,s.default)(r,[{key:"disableByteArrays",value:function(){throw new Error("Bolt V2 should always support byte arrays")}},{key:"packable",value:function(e){var t=this;return(0,f.isPoint)(e)?function(){return function(e,t){null===e.z||void 0===e.z?function(e,t){var r=[t.packable((0,b.int)(e.srid)),t.packable(e.x),t.packable(e.y)];t.packStruct(v,r)}(e,t):function(e,t){var r=[t.packable((0,b.int)(e.srid)),t.packable(e.x),t.packable(e.y),t.packable(e.z)];t.packStruct(y,r)}(e,t)}(e,t)}:(0,p.isDuration)(e)?function(){return function(e,t){var r=(0,b.int)(e.months),n=(0,b.int)(e.days),i=(0,b.int)(e.seconds),o=(0,b.int)(e.nanoseconds),s=[t.packable(r),t.packable(n),t.packable(i),t.packable(o)];t.packStruct(69,s)}(e,t)}:(0,p.isLocalTime)(e)?function(){return function(e,t){var r=(0,d.localTimeToNanoOfDay)(e.hour,e.minute,e.second,e.nanosecond),n=[t.packable(r)];t.packStruct(116,n)}(e,t)}:(0,p.isTime)(e)?function(){return function(e,t){var r=(0,d.localTimeToNanoOfDay)(e.hour,e.minute,e.second,e.nanosecond),n=(0,b.int)(e.timeZoneOffsetSeconds),i=[t.packable(r),t.packable(n)];t.packStruct(84,i)}(e,t)}:(0,p.isDate)(e)?function(){return function(e,t){var r=(0,d.dateToEpochDay)(e.year,e.month,e.day),n=[t.packable(r)];t.packStruct(68,n)}(e,t)}:(0,p.isLocalDateTime)(e)?function(){return function(e,t){var r=(0,d.localDateTimeToEpochSecond)(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),n=(0,b.int)(e.nanosecond),i=[t.packable(r),t.packable(n)];t.packStruct(100,i)}(e,t)}:(0,p.isDateTime)(e)?function(){return function(e,t){e.timeZoneId?function(e,t){var r=(0,d.localDateTimeToEpochSecond)(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),n=(0,b.int)(e.nanosecond),i=e.timeZoneId,o=[t.packable(r),t.packable(n),t.packable(i)];t.packStruct(m,o)}(e,t):function(e,t){var r=(0,d.localDateTimeToEpochSecond)(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),n=(0,b.int)(e.nanosecond),i=(0,b.int)(e.timeZoneOffsetSeconds),o=[t.packable(r),t.packable(n),t.packable(i)];t.packStruct(_,o)}(e,t)}(e,t)}:(0,c.default)((0,a.default)(r.prototype),"packable",this).call(this,e)}}]),r}(h.Packer);r.Packer=g;var w=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return(0,o.default)(this,n),(0,u.default)(this,(0,a.default)(n).call(this,e))}return(0,l.default)(n,e),(0,s.default)(n,[{key:"_unpackUnknownStruct",value:function(e,t,r){return e===v?function(e,t,r){return e._verifyStructSize("Point2D",3,t),new f.Point(e.unpack(r),e.unpack(r),e.unpack(r),void 0)}(this,t,r):e===y?function(e,t,r){return e._verifyStructSize("Point3D",4,t),new f.Point(e.unpack(r),e.unpack(r),e.unpack(r),e.unpack(r))}(this,t,r):69===e?function(e,t,r){e._verifyStructSize("Duration",4,t);var n=e.unpack(r),i=e.unpack(r),o=e.unpack(r),s=e.unpack(r);return new p.Duration(n,i,o,s)}(this,t,r):116===e?function(e,t,r,n){e._verifyStructSize("LocalTime",1,t);var i=e.unpackInteger(r);return O((0,d.nanoOfDayToLocalTime)(i),n)}(this,t,r,this._disableLosslessIntegers):84===e?function(e,t,r,n){e._verifyStructSize("Time",2,t);var i=e.unpackInteger(r),o=e.unpackInteger(r),s=(0,d.nanoOfDayToLocalTime)(i);return O(new p.Time(s.hour,s.minute,s.second,s.nanosecond,o),n)}(this,t,r,this._disableLosslessIntegers):68===e?function(e,t,r,n){e._verifyStructSize("Date",1,t);var i=e.unpackInteger(r);return O((0,d.epochDayToDate)(i),n)}(this,t,r,this._disableLosslessIntegers):100===e?function(e,t,r,n){e._verifyStructSize("LocalDateTime",2,t);var i=e.unpackInteger(r),o=e.unpackInteger(r);return O((0,d.epochSecondAndNanoToLocalDateTime)(i,o),n)}(this,t,r,this._disableLosslessIntegers):e===_?function(e,t,r,n){e._verifyStructSize("DateTimeWithZoneOffset",3,t);var i=e.unpackInteger(r),o=e.unpackInteger(r),s=e.unpackInteger(r),u=(0,d.epochSecondAndNanoToLocalDateTime)(i,o);return O(new p.DateTime(u.year,u.month,u.day,u.hour,u.minute,u.second,u.nanosecond,s,null),n)}(this,t,r,this._disableLosslessIntegers):e===m?function(e,t,r,n){e._verifyStructSize("DateTimeWithZoneId",3,t);var i=e.unpackInteger(r),o=e.unpackInteger(r),s=e.unpack(r),u=(0,d.epochSecondAndNanoToLocalDateTime)(i,o);return O(new p.DateTime(u.year,u.month,u.day,u.hour,u.minute,u.second,u.nanosecond,null,s),n)}(this,t,r,this._disableLosslessIntegers):(0,c.default)((0,a.default)(n.prototype),"_unpackUnknownStruct",this).call(this,e,t,r,this._disableLosslessIntegers)}}]),n}(h.Unpacker);function O(e,t){if(!t)return e;var r=Object.create(Object.getPrototypeOf(e));for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r[n]=(0,b.isInt)(i)?i.toNumberOrInfinity():i}return Object.freeze(r),r}r.Unpacker=w},{"../integer":234,"../spatial-types":296,"../temporal-types":297,"./packstream-v1":268,"./temporal-util":284,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":19}],270:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ACQUISITION_TIMEOUT=r.DEFAULT_MAX_SIZE=r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass"));r.DEFAULT_MAX_SIZE=100;r.DEFAULT_ACQUISITION_TIMEOUT=6e4;var s=function(){function r(e,t){(0,i.default)(this,r),this.maxSize=u(e,100),this.acquisitionTimeout=u(t,6e4)}return(0,o.default)(r,null,[{key:"defaultConfig",value:function(){return new r(100,6e4)}},{key:"fromDriverConfig",value:function(e){return new r(a(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:100,a(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:6e4)}}]),r}();function u(e,t){return 0===e||e?e:t}function a(e){return 0===e||e}r.default=s},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],271:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),v=n(e("@babel/runtime/helpers/classCallCheck")),u=n(e("@babel/runtime/helpers/createClass")),y=n(e("./pool-config")),a=e("../error"),_=n(e("./logger")),o=function(){function d(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.create,r=void 0===t?function(e,t){return Promise.resolve()}:t,n=e.destroy,i=void 0===n?function(e){return Promise.resolve()}:n,o=e.validate,s=void 0===o?function(e){return!0}:o,u=e.installIdleObserver,a=void 0===u?function(e,t){}:u,c=e.removeIdleObserver,l=void 0===c?function(e){}:c,h=e.config,f=void 0===h?y.default.defaultConfig():h,p=e.log,b=void 0===p?_.default.noOp():p;(0,v.default)(this,d),this._create=r,this._destroy=i,this._validate=s,this._installIdleObserver=a,this._removeIdleObserver=l,this._maxSize=f.maxSize,this._acquisitionTimeout=f.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=b,this._closed=!1}var t,r,n;return(0,u.default)(d,[{key:"acquire",value:function(s){var u=this;return this._acquire(s).then(function(e){var i=s.asKey();if(e)return e;var o=u._acquireRequests;return o[i]||(o[i]=[]),new Promise(function(e,t){var n,r=setTimeout(function(){var e=o[i];if(e&&(o[i]=e.filter(function(e){return e!==n})),n.isCompleted());else{var t=u.activeResourceCount(s),r=u.has(s)?u._pools[i].length:0;n.reject((0,a.newError)("Connection acquisition timed out in ".concat(u._acquisitionTimeout," ms. Poos status: Active conn count = ").concat(t,", Idle conn count = ").concat(r,".")))}},u._acquisitionTimeout);n=new h(i,e,t,r,u._log),o[i].push(n)})})}},{key:"purge",value:function(e){return this._purgeKey(e.asKey())}},{key:"close",value:function(){var t=this;return this._closed=!0,Promise.all(Object.keys(this._pools).map(function(e){return t._purgeKey(e)}))}},{key:"keepAll",value:function(e){var t=this,r=e.map(function(e){return e.asKey()}),n=Object.keys(this._pools).filter(function(e){return-1===r.indexOf(e)});return Promise.all(n.map(function(e){return t._purgeKey(e)}))}},{key:"has",value:function(e){return e.asKey()in this._pools}},{key:"activeResourceCount",value:function(e){return this._activeResourceCounts[e.asKey()]||0}},{key:"_acquire",value:(n=(0,i.default)(s.default.mark(function e(t){var r,n,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._closed)throw(0,a.newError)("Pool is closed, it is no more able to serve requests.");e.next=2;break;case 2:r=t.asKey(),(n=this._pools[r])||(n=[],this._pools[r]=n,this._pendingCreates[r]=0);case 5:if(!n.length){e.next=18;break}if(i=n.pop(),this._validate(i))return this._removeIdleObserver&&this._removeIdleObserver(i),c(r,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(i," acquired from the pool ").concat(r)),e.abrupt("return",i);e.next=14;break;case 14:return e.next=16,this._destroy(i);case 16:e.next=5;break;case 18:if(!(0<this._maxSize)){e.next=22;break}if(this.activeResourceCount(t)+this._pendingCreates[r]>=this._maxSize)return e.abrupt("return",null);e.next=22;break;case 22:return this._pendingCreates[r]=this._pendingCreates[r]+1,e.prev=23,e.next=26,this._create(t,this._release);case 26:o=e.sent,c(r,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(o," created for the pool ").concat(r));case 29:return e.prev=29,this._pendingCreates[r]=this._pendingCreates[r]-1,e.finish(29);case 32:return e.abrupt("return",o);case 33:case"end":return e.stop()}},e,this,[[23,,29,32]])})),function(e){return n.apply(this,arguments)})},{key:"_release",value:(r=(0,i.default)(s.default.mark(function e(t,r){var n,i,o=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.asKey(),!(i=this._pools[n])){e.next=14;break}if(this._validate(r)){e.next=9;break}return this._log.isDebugEnabled()&&this._log.debug("".concat(r," destroyed and can't be released to the pool ").concat(n," because it is not functional")),e.next=7,this._destroy(r);case 7:e.next=12;break;case 9:this._installIdleObserver&&this._installIdleObserver(r,{onError:function(e){o._log.debug("Idle connection ".concat(r," destroyed because of error: ").concat(e));var t=o._pools[n];t&&(o._pools[n]=t.filter(function(e){return e!==r})),o._destroy(r).catch(function(){})}}),i.push(r),this._log.isDebugEnabled()&&this._log.debug("".concat(r," released to the pool ").concat(n));case 12:e.next=17;break;case 14:return this._log.isDebugEnabled()&&this._log.debug("".concat(r," destroyed and can't be released to the pool ").concat(n," because pool has been purged")),e.next=17,this._destroy(r);case 17:l(n,this._activeResourceCounts),this._processPendingAcquireRequests(t);case 19:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"_purgeKey",value:(t=(0,i.default)(s.default.mark(function e(t){var r,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this._pools[t]||[];case 1:if(r.length)return n=r.pop(),this._removeIdleObserver&&this._removeIdleObserver(n),e.next=6,this._destroy(n);e.next=8;break;case 6:e.next=1;break;case 8:delete this._pools[t];case 9:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_processPendingAcquireRequests",value:function(t){var r=this,e=t.asKey(),n=this._acquireRequests[e];if(n){var i=n.shift();i?this._acquire(t).catch(function(e){return i.reject(e),null}).then(function(e){e&&(i.isCompleted()?r._release(t,e):i.resolve(e))}):delete this._acquireRequests[e]}}}]),d}();function c(e,t){var r=t[e]||0;t[e]=r+1}function l(e,t){var r=(t[e]||0)-1;0<r?t[e]=r:delete t[e]}var h=function(){function o(e,t,r,n,i){(0,v.default)(this,o),this._key=e,this._resolve=t,this._reject=r,this._timeoutId=n,this._log=i,this._completed=!1}return(0,u.default)(o,[{key:"isCompleted",value:function(){return this._completed}},{key:"resolve",value:function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(e," acquired from the pool ").concat(this._key)),this._resolve(e))}},{key:"reject",value:function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(e))}}]),o}(),f=o;r.default=f},{"../error":231,"./logger":267,"./pool-config":270,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":27}],272:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),o=e("./browser"),a=e("../error"),c=n(e("./bolt-protocol-v1")),l=n(e("./bolt-protocol-v2")),h=n(e("./bolt-protocol-v3")),f=n(e("./bolt-protocol-v4x0")),p=n(e("./bolt-protocol-v4x1")),b=n(e("./bolt-protocol-v4x2")),s=function(){function s(e,t,r,n,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;(0,u.default)(this,s),this._connection=e,this._channel=t,this._chunker=r,this._disableLosslessIntegers=n,this._log=i,this._serversideRouting=o}return(0,i.default)(s,[{key:"writeHandshakeRequest",value:function(){this._channel.write(function(){var e=(0,o.alloc)(20);return e.writeInt32(1616949271),e.writeInt32(516),e.writeInt32(260),e.writeInt32(4),e.writeInt32(3),e.reset(),e}())}},{key:"createNegotiatedProtocol",value:function(e){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(72===t[0]&&84===t[1]&&84===t[2]&&80===t[3])throw(0,a.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");var r=Number(t[3]+"."+t[2]);return this._log.isDebugEnabled()&&this._log.debug("".concat(this._connection," negotiated protocol version ").concat(r)),this._createProtocolWithVersion(r)}},{key:"_createProtocolWithVersion",value:function(e){switch(e){case 1:return new c.default(this._connection,this._chunker,this._disableLosslessIntegers);case 2:return new l.default(this._connection,this._chunker,this._disableLosslessIntegers);case 3:return new h.default(this._connection,this._chunker,this._disableLosslessIntegers);case 4:return new f.default(this._connection,this._chunker,this._disableLosslessIntegers);case 4.1:return new p.default(this._connection,this._chunker,this._disableLosslessIntegers,this._serversideRouting);case 4.2:return new b.default(this._connection,this._chunker,this._disableLosslessIntegers,this._serversideRouting);default:throw(0,a.newError)("Unknown Bolt protocol version: "+e)}}}]),s}();r.default=s},{"../error":231,"./bolt-protocol-v1":236,"./bolt-protocol-v2":237,"./bolt-protocol-v3":238,"./bolt-protocol-v4x0":239,"./bolt-protocol-v4x1":240,"./bolt-protocol-v4x2":241,"./browser":247,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],273:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),p=n(e("./routing-table")),b=(n(e("./routing-util")),e("../error")),u=function(){function h(e){(0,o.default)(this,h),this._routingUtil=e}var n;return(0,s.default)(h,[{key:"lookupRoutingTableOnRouter",value:(n=(0,i.default)(f.default.mark(function e(t,r,n){var i,o,s,u,a,c,l;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._routingUtil.callRoutingProcedure(t,r,n);case 2:if(null===(i=e.sent))return e.abrupt("return",null);e.next=5;break;case 5:if(1!==i.length)throw(0,b.newError)('Illegal response from router "'+n+'". Received '+i.length+" records but expected only one.\n"+JSON.stringify(i),b.PROTOCOL_ERROR);e.next=7;break;case 7:return o=i[0],s=this._routingUtil.parseTtl(o,n),u=this._routingUtil.parseServers(o,n),a=u.routers,c=u.readers,l=u.writers,h._assertNonEmpty(a,"routers",n),h._assertNonEmpty(c,"readers",n),e.abrupt("return",new p.default({database:r,routers:a,readers:c,writers:l,expirationTime:s}));case 13:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})}],[{key:"_assertNonEmpty",value:function(e,t,r){if(0===e.length)throw(0,b.newError)("Received no "+t+" from router "+r,b.PROTOCOL_ERROR)}}]),h}();r.default=u},{"../error":231,"./routing-table":279,"./routing-util":280,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":27}],274:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ALL=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=e("./constants"),u=e("../integer"),a=e("./util");r.ALL=-1;var c=function(){function o(e,t,r){(0,i.default)(this,o),this.signature=e,this.fields=t,this.toString=r}return(0,s.default)(o,null,[{key:"init",value:function(e,t){return new o(1,[e,t],function(){return"INIT ".concat(e," {...}")})}},{key:"run",value:function(e,t){return new o(16,[e,t],function(){return"RUN ".concat(e," ").concat(JSON.stringify(t))})}},{key:"pullAll",value:function(){return f}},{key:"reset",value:function(){return p}},{key:"hello",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=Object.assign({user_agent:e},t);return null!=r&&(n.routing=r),new o(1,[n],function(){return"HELLO {user_agent: '".concat(e,"', ...}")})}},{key:"begin",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=l(e.bookmark,e.txConfig,e.database,e.mode);return new o(17,[t],function(){return"BEGIN ".concat(JSON.stringify(t))})}},{key:"commit",value:function(){return b}},{key:"rollback",value:function(){return d}},{key:"runWithMetadata",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=l(r.bookmark,r.txConfig,r.database,r.mode);return new o(16,[e,t,n],function(){return"RUN ".concat(e," ").concat(JSON.stringify(t)," ").concat(JSON.stringify(n))})}},{key:"goodbye",value:function(){return v}},{key:"pull",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.stmtId,r=void 0===t?-1:t,n=e.n,i=h(r||-1,(void 0===n?-1:n)||-1);return new o(63,[i],function(){return"PULL ".concat(JSON.stringify(i))})}},{key:"discard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.stmtId,r=void 0===t?-1:t,n=e.n,i=h(r||-1,(void 0===n?-1:n)||-1);return new o(47,[i],function(){return"DISCARD ".concat(JSON.stringify(i))})}}]),o}();function l(e,t,r,n){var i={};return e.isEmpty()||(i.bookmarks=e.values()),t.timeout&&(i.tx_timeout=t.timeout),t.metadata&&(i.tx_metadata=t.metadata),r&&(i.db=(0,a.assertString)(r,"database")),n===o.ACCESS_MODE_READ&&(i.mode="r"),i}function h(e,t){var r={n:(0,u.int)(t)};return-1!==e&&(r.qid=(0,u.int)(e)),r}var f=new(r.default=c)(63,[],function(){return"PULL_ALL"}),p=new c(15,[],function(){return"RESET"}),b=new c(18,[],function(){return"COMMIT"}),d=new c(19,[],function(){return"ROLLBACK"}),v=new c(2,[],function(){return"GOODBYE"})},{"../integer":234,"./constants":264,"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],275:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"resolve",value:function(){throw new Error("Abstract function")}},{key:"_resolveToItself",value:function(e){return Promise.resolve([e])}}]),e}();r.default=s},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],276:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("../server-address"));function u(e){return Promise.resolve([e])}var a=function(){function t(e){(0,i.default)(this,t),this._resolverFunction=e||u}return(0,o.default)(t,[{key:"resolve",value:function(t){var r=this;return new Promise(function(e){return e(r._resolverFunction(t.asHostPort()))}).then(function(e){if(!Array.isArray(e))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(e));return e.map(function(e){return s.default.fromUrl(e)})})}}]),t}();r.default=a},{"../server-address":281,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],277:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=e("../error"),c=e("rxjs"),l=e("rxjs/operators"),o=(n(e("./logger")),function(){function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.maxRetryTimeout,r=void 0===t?3e4:t,n=e.initialDelay,i=void 0===n?1e3:n,o=e.delayMultiplier,s=void 0===o?2:o,u=e.delayJitter,a=void 0===u?.2:u,c=e.logger,l=void 0===c?null:c;(0,f.default)(this,h),this._maxRetryTimeout=p(r,3e4),this._initialDelay=p(i,1e3),this._delayMultiplier=p(s,2),this._delayJitter=p(a,.2),this._logger=l}return(0,i.default)(h,[{key:"retry",value:function(e){var u=this;return e.pipe((0,l.retryWhen)(function(e){var n=[],i=Date.now(),o=1,s=u._initialDelay;return e.pipe((0,l.flatMap)(function(e){if(!h._canRetryOn(e))return(0,c.throwError)(e);if(n.push(e),2<=o&&Date.now()-i>=u._maxRetryTimeout){var t=(0,a.newError)("Failed after retried for ".concat(o," times in ").concat(u._maxRetryTimeout," ms. Make sure that your database is online and retry again."),a.SERVICE_UNAVAILABLE);return t.seenErrors=n,(0,c.throwError)(t)}var r=u._computeNextDelay(s);return s*=u._delayMultiplier,o++,u._logger&&u._logger.warn("Transaction failed and will be retried in ".concat(r)),(0,c.of)(1).pipe((0,l.delay)(r))}))}))}},{key:"_computeNextDelay",value:function(e){var t=e*this._delayJitter;return e-t+2*t*Math.random()}}],[{key:"_canRetryOn",value:function(e){return e&&e.code&&(e.code===a.SERVICE_UNAVAILABLE||e.code===a.SESSION_EXPIRED||this._isTransientError(e))}},{key:"_isTransientError",value:function(e){var t=e.code;return 0<=t.indexOf("TransientError")&&("Neo.TransientError.Transaction.Terminated"!==t&&"Neo.TransientError.Transaction.LockClientStopped"!==t)}}]),h}());function p(e,t){return e||0===e?e:t}r.default=o},{"../error":231,"./logger":267,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,rxjs:28,"rxjs/operators":227}],278:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=function(){function t(e){(0,i.default)(this,t),this._offset=e||0}return(0,o.default)(t,[{key:"next",value:function(e){if(0===e)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%e}}]),t}();r.default=s},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],279:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/toConsumableArray")),u=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=e("../integer"),c=e("../driver"),s=function(){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.database,r=e.routers,n=e.readers,i=e.writers,o=e.expirationTime;(0,u.default)(this,s),this.database=t,this.databaseName=t||"default database",this.routers=r||[],this.readers=n||[],this.writers=i||[],this.expirationTime=o||(0,a.int)(0)}return(0,o.default)(s,[{key:"forget",value:function(e){this.readers=l(this.readers,e),this.writers=l(this.writers,e)}},{key:"forgetRouter",value:function(e){this.routers=l(this.routers,e)}},{key:"forgetWriter",value:function(e){this.writers=l(this.writers,e)}},{key:"isStaleFor",value:function(e){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||e===c.READ&&0===this.readers.length||e===c.WRITE&&0===this.writers.length}},{key:"isExpiredFor",value:function(e){return this.expirationTime.add(e).lessThan(Date.now())}},{key:"allServers",value:function(){return[].concat((0,i.default)(this.routers),(0,i.default)(this.readers),(0,i.default)(this.writers))}},{key:"toString",value:function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")}}]),s}();function l(e,t){return e.filter(function(e){return e.asKey()!==t.asKey()})}r.default=s},{"../driver":230,"../integer":234,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/toConsumableArray":23}],280:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/regenerator")),s=i(e("@babel/runtime/helpers/asyncToGenerator")),u=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),c=e("../error"),l=n(e("../integer")),h=(e("./server-version"),i(e("./bookmark")),i(e("../session")),i(e("./tx-config"))),f=i(e("./server-address")),p="CALL dbms.cluster.routing.getRoutingTable($".concat("context",")"),b="CALL dbms.routing.getRoutingTable($".concat("context",", $").concat("database",")"),d=function(){function r(e,t){(0,u.default)(this,r),this._routingContext=e,this._initialAddress=t}var n;return(0,a.default)(r,[{key:"callRoutingProcedure",value:(n=(0,s.default)(o.default.mark(function e(t,r,n){var i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._callAvailableRoutingProcedure(t,r);case 3:return i=e.sent,e.next=6,t.close();case 6:return e.abrupt("return",i.records);case 9:if(e.prev=9,e.t0=e.catch(0),"Neo.ClientError.Database.DatabaseNotFound"===e.t0.code)throw e.t0;e.next=15;break;case 15:if("Neo.ClientError.Procedure.ProcedureNotFound"===e.t0.code)throw(0,c.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),c.SERVICE_UNAVAILABLE);e.next=19;break;case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}},e,this,[[0,9]])})),function(e,t,r){return n.apply(this,arguments)})},{key:"parseTtl",value:function(t,r){try{var e=(0,l.int)(Date.now()),n=(0,l.int)(t.get("ttl")).multiply(1e3).add(e);return n.lessThan(e)?l.default.MAX_VALUE:n}catch(e){throw(0,c.newError)("Unable to parse TTL entry from router ".concat(r," from record:\n").concat(JSON.stringify(t),"\nError message: ").concat(e.message),c.PROTOCOL_ERROR)}}},{key:"parseServers",value:function(t,r){try{var e=t.get("servers"),n=[],i=[],o=[];return e.forEach(function(e){var t=e.role,r=e.addresses;if("ROUTE"===t)n=v(r).map(function(e){return f.default.fromUrl(e)});else if("WRITE"===t)o=v(r).map(function(e){return f.default.fromUrl(e)});else{if("READ"!==t)throw(0,c.newError)('Unknown server role "'+t+'"',c.PROTOCOL_ERROR);i=v(r).map(function(e){return f.default.fromUrl(e)})}}),{routers:n,readers:i,writers:o}}catch(e){throw(0,c.newError)("Unable to parse servers entry from router ".concat(r," from record:\n").concat(JSON.stringify(t),"\nError message: ").concat(e.message),c.PROTOCOL_ERROR)}}},{key:"_callAvailableRoutingProcedure",value:function(n,i){var o=this;return n._run(null,null,function(e){var t,r;return 4<=e.protocol().version?(t=b,(r={context:o._routingContext||{},database:i||null}).context.address=o._initialAddress):(t=p,r={context:o._routingContext}),e.protocol().run(t,r,{bookmark:n._lastBookmark,txConfig:h.default.empty(),mode:n._mode,database:n._database,afterComplete:n._onComplete})})}}]),r}();function v(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}r.default=d},{"../error":231,"../integer":234,"../session":295,"./bookmark":242,"./server-address":281,"./server-version":282,"./tx-config":286,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/regenerator":27}],281:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),u=e("./util"),a=n(e("./url-util")),i=function(){function i(e,t,r,n){(0,o.default)(this,i),this._host=(0,u.assertString)(e,"host"),this._resolved=t?(0,u.assertString)(t,"resolved"):null,this._port=(0,u.assertNumber)(r,"port"),this._hostPort=n,this._stringValue=t?"".concat(n,"(").concat(t,")"):"".concat(n)}return(0,s.default)(i,[{key:"host",value:function(){return this._host}},{key:"resolvedHost",value:function(){return this._resolved?this._resolved:this._host}},{key:"port",value:function(){return this._port}},{key:"resolveWith",value:function(e){return new i(this._host,e,this._port,this._hostPort)}},{key:"asHostPort",value:function(){return this._hostPort}},{key:"asKey",value:function(){return this._hostPort}},{key:"toString",value:function(){return this._stringValue}}],[{key:"fromUrl",value:function(e){var t=a.default.parseDatabaseUrl(e);return new i(t.host,null,t.port,t.hostAndPort)}}]),i}();r.default=i},{"./url-util":287,"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],282:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION_IN_DEV=r.VERSION_4_0_0=r.VERSION_3_5_0=r.VERSION_3_4_0=r.VERSION_3_2_0=r.ServerVersion=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),u=e("./util"),a=new RegExp("^(Neo4j/)?(\\d+)\\.(\\d+)(?:\\.)?(\\d*)(\\.|-|\\+)?([0-9A-Za-z-.]*)?$"),i=function(){function i(e,t,r,n){(0,o.default)(this,i),this.major=e,this.minor=t,this.patch=r,this._originalVersionString=n}return(0,s.default)(i,[{key:"compareTo",value:function(e){var t=l(this.major,e.major);return 0===t&&0===(t=l(this.minor,e.minor))&&(t=l(this.patch,e.patch)),t}},{key:"toString",value:function(){return this._originalVersionString?this._originalVersionString:"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"fromDriver",value:function(e){var t=e.session();return t.run("RETURN 1").then(function(e){return t.close().then(function(){return i.fromString(e.summary.server.version)})})}},{key:"fromString",value:function(e){if(!e)return new i(3,0,0);if((0,u.assertString)(e,"Neo4j version string"),e.toLowerCase()==="Neo4j/dev".toLowerCase())return v;var t=e.match(a);if(!t)throw new Error("Unparsable Neo4j version: ".concat(e));return new i(c(t[2]),c(t[3]),c(t[4]||0),e)}}]),i}();function c(e,t){var r=parseInt(e,10);if(!r&&0!==r)throw new Error("Unparsable number ".concat(t,": '").concat(e,"'"));return r}function l(e,t){return e<t?-1:e===t?0:1}var h=(r.ServerVersion=i).fromString("Neo4j/3.2.0");r.VERSION_3_2_0=h;var f=i.fromString("Neo4j/3.4.0");r.VERSION_3_4_0=f;var p=i.fromString("Neo4j/3.5.0");r.VERSION_3_5_0=p;var b=i.fromString("Neo4j/4.0.0");r.VERSION_4_0_0=b;var d=Number.MAX_SAFE_INTEGER,v=new i(d,d,d,"Neo4j/dev");r.VERSION_IN_DEV=v},{"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],283:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.CompletedObserver=r.FailedObserver=r.ResetObserver=r.LoginObserver=r.ResultStreamObserver=r.StreamObserver=void 0;var i=n(e("@babel/runtime/helpers/assertThisInitialized")),o=n(e("@babel/runtime/helpers/get")),v=n(e("@babel/runtime/helpers/possibleConstructorReturn")),y=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),_=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),u=n(e("../record")),c=(n(e("./connection")),e("../error")),m=(n(e("../integer")),e("./request-message")),l=function(){function e(){(0,_.default)(this,e)}return(0,a.default)(e,[{key:"onNext",value:function(e){}},{key:"onError",value:function(e){}},{key:"onCompleted",value:function(e){}}]),e}(),h=function(e){function d(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.connection,n=t.reactive,i=void 0!==n&&n,o=t.moreFunction,s=t.discardFunction,u=t.fetchSize,a=void 0===u?m.ALL:u,c=t.beforeError,l=t.afterError,h=t.beforeKeys,f=t.afterKeys,p=t.beforeComplete,b=t.afterComplete;return(0,_.default)(this,d),(e=(0,v.default)(this,(0,y.default)(d).call(this)))._connection=r,e._fieldKeys=null,e._fieldLookup=null,e._head=null,e._queuedRecords=[],e._tail=null,e._error=null,e._observers=[],e._meta={},e._beforeError=c,e._afterError=l,e._beforeKeys=h,e._afterKeys=f,e._beforeComplete=p,e._afterComplete=b,e._queryId=null,e._moreFunction=o,e._discardFunction=s,e._discard=!1,e._fetchSize=a,e._setState(i?g.READY:g.READY_STREAMING),e._setupAuoPull(a),e}return(0,s.default)(d,e),(0,a.default)(d,[{key:"onNext",value:function(e){var t=new u.default(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(e){return e.onNext})?this._observers.forEach(function(e){e.onNext&&e.onNext(t)}):(this._queuedRecords.push(t),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))}},{key:"onCompleted",value:function(e){this._state.onSuccess(this,e)}},{key:"onError",value:function(e){this._state.onError(this,e)}},{key:"cancel",value:function(){this._discard=!0}},{key:"prepareToHandleSingleResponse",value:function(){this._head=[],this._fieldKeys=[],this._setState(g.STREAMING)}},{key:"markCompleted",value:function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(g.SUCCEEDED)}},{key:"subscribe",value:function(e){if(this._error)e.onError(this._error);else{if(this._head&&e.onKeys&&e.onKeys(this._head),0<this._queuedRecords.length&&e.onNext)for(var t=0;t<this._queuedRecords.length;t++)e.onNext(this._queuedRecords[t]),this._queuedRecords.length-t-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===g.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._observers.push(e),this._state===g.READY&&this._handleStreaming()}}},{key:"_handleHasMore",value:function(e){this._setState(g.READY),this._handleStreaming(),delete e.has_more}},{key:"_handlePullSuccess",value:function(e){var t=this;this._setState(g.SUCCEEDED);var r=Object.assign(this._connection?{server:this._connection.server}:{},this._meta,e),n=null;this._beforeComplete&&(n=this._beforeComplete(r));function i(){t._tail=r,t._observers.some(function(e){return e.onCompleted})&&t._observers.forEach(function(e){e.onCompleted&&e.onCompleted(r)}),t._afterComplete&&t._afterComplete(r)}n?Promise.resolve(n).then(function(){return i()}):i()}},{key:"_handleRunSuccess",value:function(e,t){var r=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&0<e.fields.length){this._fieldKeys=e.fields;for(var n=0;n<e.fields.length;n++)this._fieldLookup[e.fields[n]]=n;delete e.fields}e.qid&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var i=null;this._beforeKeys&&(i=this._beforeKeys(this._fieldKeys));var o=function(){r._head=r._fieldKeys,r._observers.some(function(e){return e.onKeys})&&r._observers.forEach(function(e){e.onKeys&&e.onKeys(r._fieldKeys)}),r._afterKeys&&r._afterKeys(r._fieldKeys),t()};i?Promise.resolve(i).then(function(){return o()}):o()}}},{key:"_handleError",value:function(t){var e=this;this._setState(g.FAILED),this._error=t;var r=null;this._beforeError&&(r=this._beforeError(t));function n(){e._observers.some(function(e){return e.onError})&&e._observers.forEach(function(e){e.onError&&e.onError(t)}),e._afterError&&e._afterError(t)}r?Promise.resolve(r).then(function(){return n()}):n()}},{key:"_handleStreaming",value:function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._discard?(this._discardFunction(this._connection,this._queryId,this),this._setState(g.STREAMING)):this._autoPull&&(this._moreFunction(this._connection,this._queryId,this._fetchSize,this),this._setState(g.STREAMING)))}},{key:"_storeMetadataForCompletion",value:function(e){for(var t=Object.keys(e),r=t.length,n="";r--;)n=t[r],this._meta[n]=e[n]}},{key:"_setState",value:function(e){this._state=e}},{key:"_setupAuoPull",value:function(e){this._autoPull=!0,e===m.ALL?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*e,this._highRecordWatermark=.7*e)}}]),d}(r.StreamObserver=l);r.ResultStreamObserver=h;var f=function(e){function u(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.connection,n=t.beforeError,i=t.afterError,o=t.beforeComplete,s=t.afterComplete;return(0,_.default)(this,u),(e=(0,v.default)(this,(0,y.default)(u).call(this)))._connection=r,e._beforeError=n,e._afterError=i,e._beforeComplete=o,e._afterComplete=s,e}return(0,s.default)(u,e),(0,a.default)(u,[{key:"onNext",value:function(e){this.onError((0,c.newError)("Received RECORD when initializing "+JSON.stringify(e)))}},{key:"onError",value:function(e){this._beforeError&&this._beforeError(e),this._connection._updateCurrentObserver(),this._connection._handleFatalError(e),this._afterError&&this._afterError(e)}},{key:"onCompleted",value:function(e){if(this._beforeComplete&&this._beforeComplete(e),e){var t=e.server;this._connection.version||(this._connection.version=t);var r=e.connection_id;this._connection.databaseId||(this._connection.databaseId=r)}this._afterComplete&&this._afterComplete(e)}}]),u}(l);r.LoginObserver=f;var p=function(e){function o(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.connection,n=t.onError,i=t.onComplete;return(0,_.default)(this,o),(e=(0,v.default)(this,(0,y.default)(o).call(this)))._connection=r,e._onError=n,e._onComplete=i,e}return(0,s.default)(o,e),(0,a.default)(o,[{key:"onNext",value:function(e){this.onError((0,c.newError)("Received RECORD when resetting: received record is: "+JSON.stringify(e),c.PROTOCOL_ERROR))}},{key:"onError",value:function(e){e.code===c.PROTOCOL_ERROR&&this._connection._handleProtocolError(e.message),this._onError&&this._onError(e)}},{key:"onCompleted",value:function(e){this._onComplete&&this._onComplete(e)}}]),o}(l);r.ResetObserver=p;var b=function(e){function i(e){var t,r=e.error,n=e.onError;return(0,_.default)(this,i),(t=(0,v.default)(this,(0,y.default)(i).call(this,{beforeError:n}))).onError(r),t}return(0,s.default)(i,e),i}(h);r.FailedObserver=b;var d=function(e){function t(){var e;return(0,_.default)(this,t),e=(0,v.default)(this,(0,y.default)(t).call(this)),(0,o.default)((0,y.default)(t.prototype),"markCompleted",(0,i.default)(e)).call((0,i.default)(e)),e}return(0,s.default)(t,e),t}(h);r.CompletedObserver=d;var g={READY_STREAMING:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){e._setState(g.STREAMING)})},onError:function(e,t){e._handleError(t)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){return e._handleStreaming()})},onError:function(e,t){e._handleError(t)},name:function(){return"READY"}},STREAMING:{onSuccess:function(e,t){t.has_more?e._handleHasMore(t):e._handlePullSuccess(t)},onError:function(e,t){e._handleError(t)},name:function(){return"STREAMING"}},FAILED:{onError:function(e){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}},{"../error":231,"../integer":234,"../record":289,"./connection":262,"./request-message":274,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],284:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeSecondsForDuration=function(e,t){return(0,l.int)(e).add(j(t,w))},r.normalizeNanosecondsForDuration=function(e){return A(e,w)},r.localTimeToNanoOfDay=function(e,t,r,n){e=(0,l.int)(e),t=(0,l.int)(t),r=(0,l.int)(r),n=(0,l.int)(n);var i=e.multiply(k);return(i=(i=i.add(t.multiply(S))).add(r.multiply(w))).add(n)},r.nanoOfDayToLocalTime=P,r.localDateTimeToEpochSecond=function(e,t,r,n,i,o,s){var u=T(e,t,r),a=function(e,t,r){e=(0,l.int)(e),t=(0,l.int)(t),r=(0,l.int)(r);var n=e.multiply(g);return(n=n.add(t.multiply(m))).add(r)}(n,i,o);return u.multiply(x).add(a)},r.epochSecondAndNanoToLocalDateTime=function(e,t){var r=j(e,x),n=A(e,x).multiply(w).add(t),i=I(r),o=P(n);return new h.LocalDateTime(i.year,i.month,i.day,o.hour,o.minute,o.second,o.nanosecond)},r.dateToEpochDay=T,r.epochDayToDate=I,r.durationToIsoString=function(e,t,r,n){var i=M(e),o=M(t),s=function(e,t){var r,n;e=(0,l.int)(e),t=(0,l.int)(t);var i=e.isNegative(),o=t.greaterThan(0);r=i&&o?e.equals(-1)?"-0":e.add(1).toString():e.toString();o&&(n=N(i?t.negate().add(2*w).modulo(w):t.add(w).modulo(w)));return n?r+n:r}(r,n);return"P".concat(i,"M").concat(o,"DT").concat(s,"S")},r.timeToIsoString=function(e,t,r,n){var i=M(e,2),o=M(t,2),s=M(r,2),u=N(n);return"".concat(i,":").concat(o,":").concat(s).concat(u)},r.timeZoneOffsetToIsoString=function(e){if((e=(0,l.int)(e)).equals(0))return"Z";var t=e.isNegative();t&&(e=e.multiply(-1));var r=t?"-":"+",n=M(e.div(g),2),i=M(e.div(m).modulo(_),2),o=e.modulo(m),s=o.equals(0)?null:M(o,2);return s?"".concat(r).concat(n,":").concat(i,":").concat(s):"".concat(r).concat(n,":").concat(i)},r.dateToIsoString=function(e,t,r){var n=(e=(0,l.int)(e)).isNegative();n&&(e=e.multiply(-1));var i=M(e,4);n&&(i="-"+i);var o=M(t,2),s=M(r,2);return"".concat(i,"-").concat(o,"-").concat(s)},r.totalNanoseconds=function(e,t){t=t||0;var r=e.getMilliseconds()*O;return(0,l.isInt)(t)?t.add(r):t+r},r.timeZoneOffsetInSeconds=function(e){var t=e.getTimezoneOffset();return 0!==t?-1*t*m:0},r.assertValidYear=function(e){return R(e,c,"Year")},r.assertValidMonth=function(e){return R(e,f,"Month")},r.assertValidDay=function(e){return R(e,p,"Day")},r.assertValidHour=function(e){return R(e,b,"Hour")},r.assertValidMinute=function(e){return R(e,d,"Minute")},r.assertValidSecond=function(e){return R(e,v,"Second")},r.assertValidNanosecond=function(e){return R(e,y,"Nanosecond")};var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),l=e("../integer"),h=e("../temporal-types"),s=e("./util"),u=e("../error"),a=function(){function r(e,t){(0,i.default)(this,r),this._minNumber=e,this._maxNumber=t,this._minInteger=(0,l.int)(e),this._maxInteger=(0,l.int)(t)}return(0,o.default)(r,[{key:"contains",value:function(e){return(0,l.isInt)(e)?e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger):e>=this._minNumber&&e<=this._maxNumber}},{key:"toString",value:function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")}}]),r}(),c=new a(-999999999,999999999),f=new a(1,12),p=new a(1,31),b=new a(0,23),d=new a(0,59),v=new a(0,59),y=new a(0,999999999),_=60,m=60,g=m*_,w=1e9,O=1e6,S=w*m,k=S*_,E=719528,C=146097,x=86400;function P(e){var t=(e=(0,l.int)(e)).div(k),r=(e=e.subtract(t.multiply(k))).div(S),n=(e=e.subtract(r.multiply(S))).div(w),i=e.subtract(n.multiply(w));return new h.LocalTime(t,r,n,i)}function T(e,t,r){e=(0,l.int)(e),t=(0,l.int)(t),r=(0,l.int)(r);var n=e.multiply(365);return n=(n=(n=e.greaterThanOrEqual(0)?n.add(e.add(3).div(4).subtract(e.add(99).div(100)).add(e.add(399).div(400))):n.subtract(e.div(-4).subtract(e.div(-100)).add(e.div(-400)))).add(t.multiply(367).subtract(362).div(12))).add(r.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),function(e){return!!(e=(0,l.int)(e)).modulo(4).equals(0)&&(!e.modulo(100).equals(0)||!!e.modulo(400).equals(0))}(e)||(n=n.subtract(1))),n.subtract(E)}function I(e){var t=(e=(0,l.int)(e)).add(E).subtract(60),r=(0,l.int)(0);if(t.lessThan(0)){var n=t.add(1).div(C).subtract(1);r=n.multiply(400),t=t.add(n.multiply(-C))}var i=t.multiply(400).add(591).div(C),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(r);var s=o,u=s.multiply(5).add(2).div(153),a=u.add(2).modulo(12).add(1),c=s.subtract(u.multiply(306).add(5).div(10)).add(1);return i=i.add(u.div(10)),new h.Date(i,a,c)}function R(e,t,r){if((0,s.assertNumberOrInteger)(e,r),!t.contains(e))throw(0,u.newError)("".concat(r," is expected to be in range ").concat(t," but was: ").concat(e));return e}function j(e,t){e=(0,l.int)(e),t=(0,l.int)(t);var r=e.div(t);return e.isPositive()!==t.isPositive()&&r.multiply(t).notEquals(e)&&(r=r.subtract(1)),r}function A(e,t){return e=(0,l.int)(e),t=(0,l.int)(t),e.subtract(j(e,t).multiply(t))}function N(e){return(e=(0,l.int)(e)).equals(0)?"":"."+M(e,9)}function M(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,r=(e=(0,l.int)(e)).isNegative();r&&(e=e.negate());var n=e.toString();if(t)for(;n.length<t;)n="0"+n;return r?"-"+n:n}},{"../error":231,"../integer":234,"../temporal-types":297,"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],285:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("../error"),u=function(){function a(e,t,r,n){(0,i.default)(this,a),this._maxRetryTimeMs=c(e,3e4),this._initialRetryDelayMs=c(t,1e3),this._multiplier=c(r,2),this._jitterFactor=c(n,.2),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return(0,o.default)(a,[{key:"execute",value:function(n,i){var o=this;return new Promise(function(e,t){o._executeTransactionInsidePromise(n,i,e,t)}).catch(function(e){var t=Date.now(),r=o._initialRetryDelayMs;return o._retryTransactionPromise(n,i,e,t,r)})}},{key:"close",value:function(){this._inFlightTimeoutIds.forEach(function(e){return clearTimeout(e)}),this._inFlightTimeoutIds=[]}},{key:"_retryTransactionPromise",value:function(i,o,e,r,s){var u=this;return Date.now()-r>this._maxRetryTimeMs||!a._canRetryOn(e)?Promise.reject(e):new Promise(function(e,t){var r=u._computeDelayWithJitter(s),n=setTimeout(function(){u._inFlightTimeoutIds=u._inFlightTimeoutIds.filter(function(e){return e!==n}),u._executeTransactionInsidePromise(i,o,e,t)},r);u._inFlightTimeoutIds.push(n)}).catch(function(e){var t=s*u._multiplier;return u._retryTransactionPromise(i,o,e,r,t)})}},{key:"_executeTransactionInsidePromise",value:function(e,t,r,n){var i,o=this;try{i=e()}catch(e){return void n(e)}this._safeExecuteTransactionWork(i,t).then(function(e){return o._handleTransactionWorkSuccess(e,i,r,n)}).catch(function(e){return o._handleTransactionWorkFailure(e,i,n)})}},{key:"_safeExecuteTransactionWork",value:function(e,t){try{var r=t(e);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}},{key:"_handleTransactionWorkSuccess",value:function(e,t,r,n){t.isOpen()?t.commit().then(function(){r(e)}).catch(function(e){n(e)}):r(e)}},{key:"_handleTransactionWorkFailure",value:function(e,t,r){t.isOpen()?t.rollback().catch(function(e){}).then(function(){return r(e)}):r(e)}},{key:"_computeDelayWithJitter",value:function(e){var t=e*this._jitterFactor,r=e-t,n=e+t;return Math.random()*(n-r)+r}},{key:"_verifyAfterConstruction",value:function(){if(this._maxRetryTimeMs<0)throw(0,s.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,s.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,s.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||1<this._jitterFactor)throw(0,s.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)}}],[{key:"_canRetryOn",value:function(e){return e&&e instanceof s.Neo4jError&&e.code&&(e.code===s.SERVICE_UNAVAILABLE||e.code===s.SESSION_EXPIRED||this._isTransientError(e))}},{key:"_isTransientError",value:function(e){var t=e.code;return 0<=t.indexOf("TransientError")&&("Neo.TransientError.Transaction.Terminated"!==t&&"Neo.TransientError.Transaction.LockClientStopped"!==t)}}]),a}();function c(e,t){return e||0===e?e:t}r.default=u},{"../error":231,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],286:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),u=n(e("./util")),a=e("../integer"),c=e("../error"),l=function(){function t(e){(0,o.default)(this,t),function(e){e&&u.assertObject(e,"Transaction config")}(e),this.timeout=function(e){if(!u.isObject(e)||!e.timeout&&0!==e.timeout)return null;u.assertNumberOrInteger(e.timeout,"Transaction timeout");var t=(0,a.int)(e.timeout);if(t.isZero())throw(0,c.newError)("Transaction timeout should not be zero");if(t.isNegative())throw(0,c.newError)("Transaction timeout should not be negative");return t}(e),this.metadata=function(e){if(u.isObject(e)&&e.metadata){var t=e.metadata;if(u.assertObject(t),0!==Object.keys(t).length)return t}return null}(e)}return(0,s.default)(t,[{key:"isEmpty",value:function(){return Object.values(this).every(function(e){return null==e})}}],[{key:"empty",value:function(){return h}}]),t}(),h=new(r.default=l)({})},{"../error":231,"../integer":234,"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13}],287:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;function c(e,t,r,n,i){(0,o.default)(this,c),this.scheme=e,this.host=t,this.port=r,this.hostAndPort=n,this.query=i}var l=n(e("@babel/runtime/helpers/slicedToArray")),o=n(e("@babel/runtime/helpers/classCallCheck")),h=e("uri-js"),f=e("./util"),i=7687,s=7474,u=7473;function p(e,t,r){if(!(e=(e||"").trim()))throw new Error("Illegal empty ".concat(t," in URL query '").concat(r,"'"));return e}function b(e){var t="["===e.charAt(0),r="]"===e.charAt(e.length-1);if(t||r){if(t&&r)return e;throw new Error("Illegal IPv6 address ".concat(e))}return"[".concat(e,"]")}function d(e){return"http"===e?s:"https"===e?u:i}var a={parseDatabaseUrl:function(e){(0,f.assertString)(e,"URL");var t=function(e){return-1!==(e=e.trim()).indexOf("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}(e),r=(0,h.parse)(t.url),n=t.schemeMissing?null:function(e){if(e)return":"===(e=e.trim()).charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e;return null}(r.scheme),i=function(e,t){if(e)return e.trim();throw new Error("Unable to extract host from ".concat(t))}(r.host),o=function(e){if(e)return 0<=e.indexOf(":")?b(e):e;throw new Error("Illegal host ".concat(e))}(i),s=function(e,t){var r=parseInt(e,10);return 0===r||r?r:d(t)}(r.port,n),u="".concat(o,":").concat(s),a=function(e,i){var t=function(e){(e=(e||"").trim())&&"?"===e.charAt(0)&&(e=e.substring(1,e.length));return e}(e),o={};t&&t.split("&").forEach(function(e){var t=e.split("=");if(2!==t.length)throw new Error("Invalid parameters: '".concat(t,"' in URL '").concat(i,"'."));var r=p(t[0],"key",i),n=p(t[1],"value",i);if(o[r])throw new Error("Duplicated query parameters with key '".concat(r,"' in URL '").concat(i,"'"));o[r]=n});return o}(r.query||function(e){if("string"!=typeof e)return null;var t=e.split("?"),r=(0,l.default)(t,2);r[0];return r[1]}(r.resourceName),e);return new c(n,i,s,u,a)},defaultPortForScheme:d,formatIPv4Address:function(e,t){return"".concat(e,":").concat(t)},formatIPv6Address:function(e,t){var r=b(e);return"".concat(r,":").concat(t)}};r.default=a},{"./util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/slicedToArray":21,"uri-js":229}],288:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.isEmptyObjectOrNull=function(e){if(null===e)return!0;if(!s(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},r.isObject=s,r.isString=a,r.assertObject=function(e,t){if(s(e))return e;throw new TypeError(t+" expected to be an object but was: "+JSON.stringify(e))},r.assertString=u,r.assertNumber=function(e,t){if("number"==typeof e)return e;throw new TypeError(t+" expected to be a number but was: "+JSON.stringify(e))},r.assertNumberOrInteger=function(e,t){if("number"==typeof e||(0,o.isInt)(e))return e;throw new TypeError(t+" expected to be either a number or an Integer object but was: "+JSON.stringify(e))},r.assertValidDate=function(e,t){if("[object Date]"!==Object.prototype.toString.call(e))throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+JSON.stringify(e));if(Number.isNaN(e.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+JSON.stringify(e));return e},r.validateQueryAndParameters=function(e,t){var r=e,n=t||{};"object"===(0,i.default)(e)&&e.text&&(r=e.text,n=e.parameters||{});return function(e){if(u(e,"Cypher query"),0===e.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}(r),function(e){if(!s(e)){var t=e.constructor?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(t," ").concat(e))}}(n),{validatedQuery:r,params:n}},r.ENCRYPTION_OFF=r.ENCRYPTION_ON=void 0;var i=n(e("@babel/runtime/helpers/typeof")),o=e("../integer");r.ENCRYPTION_ON="ENCRYPTION_ON";function s(e){return"object"===(0,i.default)(e)&&!Array.isArray(e)&&null!==e}function u(e,t){if(!a(e))throw new TypeError(t+" expected to be string but was: "+JSON.stringify(e));return e}function a(e){return"[object String]"===Object.prototype.toString.call(e)}r.ENCRYPTION_OFF="ENCRYPTION_OFF"},{"../integer":234,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/typeof":24}],289:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/regenerator")),l=n(e("@babel/runtime/helpers/slicedToArray")),o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),u=e("./error");var a=function(){function n(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;(0,o.default)(this,n),this.keys=e,this.length=e.length,this._fields=t,this._fieldLookup=r||function(e){var r={};return e.forEach(function(e,t){r[e]=t}),r}(e)}return(0,s.default)(n,[{key:"forEach",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=this.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=(0,l.default)(i.value,2),u=s[0];e(s[1],u,this)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"map",value:function(e){var t=[],r=!0,n=!1,i=void 0;try{for(var o,s=this.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=(0,l.default)(o.value,2),a=u[0],c=u[1];t.push(e(c,a,this))}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return t}},{key:"entries",value:i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(t<this.keys.length)return e.next=4,[this.keys[t],this._fields[t]];e.next=7;break;case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}},e,this)})},{key:"values",value:i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(t<this.keys.length)return e.next=4,this._fields[t];e.next=7;break;case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}},e,this)})},{key:Symbol.iterator,value:i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.values(),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"toObject",value:function(){var e={},t=!0,r=!1,n=void 0;try{for(var i,o=this.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=(0,l.default)(i.value,2),u=s[0],a=s[1];e[u]=a}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e}},{key:"get",value:function(e){var t;if("number"!=typeof e){if(void 0===(t=this._fieldLookup[e]))throw(0,u.newError)("This record has no field with key '"+e+"', available key are: ["+this.keys+"].")}else t=e;if(t>this._fields.length-1||t<0)throw(0,u.newError)("This record has no field with index '"+t+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]}},{key:"has",value:function(e){return"number"==typeof e?0<=e&&e<this._fields.length:void 0!==this._fieldLookup[e]}}]),n}();r.default=a},{"./error":231,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/slicedToArray":21,"@babel/runtime/regenerator":27}],290:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),a=e("./error"),s=(n(e("./result-summary")),e("rxjs")),u=e("rxjs/operators"),c=(n(e("./record")),0),l=1,h=2,f=function(){function r(e){(0,i.default)(this,r);var t=e.pipe((0,u.publishReplay)(1),(0,u.refCount)());this._result=t,this._keys=t.pipe((0,u.flatMap)(function(e){return(0,s.from)(e.keys())}),(0,u.publishReplay)(1),(0,u.refCount)()),this._records=new s.Subject,this._summary=new s.ReplaySubject,this._state=c}return(0,o.default)(r,[{key:"keys",value:function(){return this._keys}},{key:"records",value:function(){var r=this;return this._result.pipe((0,u.flatMap)(function(t){return new s.Observable(function(e){return r._startStreaming({result:t,recordsObserver:e})})}))}},{key:"consume",value:function(){var r=this;return this._result.pipe((0,u.flatMap)(function(t){return new s.Observable(function(e){return r._startStreaming({result:t,summaryObserver:e})})}))}},{key:"_startStreaming",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.result,n=e.recordsObserver,i=void 0===n?null:n,o=e.summaryObserver,s=void 0===o?null:o,u=[];return s&&u.push(this._summary.subscribe(s)),this._state<l?(this._state=l,i&&u.push(this._records.subscribe(i)),u.push({unsubscribe:function(){r._cancel&&r._cancel()}}),0===this._records.observers.length&&r._cancel(),r.subscribe({onNext:function(e){t._records.next(e)},onCompleted:function(e){t._records.complete(),t._summary.next(e),t._summary.complete(),t._state=h},onError:function(e){t._records.error(e),t._summary.error(e),t._state=h}})):i&&i.error((0,a.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){u.forEach(function(e){return e.unsubscribe()})}}}]),r}();r.default=f},{"./error":231,"./record":289,"./result-summary":291,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,rxjs:28,"rxjs/operators":227}],291:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.queryType=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),i=e("./integer"),u=function(){function i(e,t,r,n){(0,o.default)(this,i),this.query={text:e,parameters:t},this.queryType=r.type,this.counters=new l(r.stats||{}),this.updateStatistics=this.counters,this.plan=!(!r.plan&&!r.profile)&&new a(r.plan||r.profile),this.profile=!!r.profile&&new c(r.profile),this.notifications=this._buildNotifications(r.notifications),this.server=new f(r.server,n),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:r.db||null}}return(0,s.default)(i,[{key:"_buildNotifications",value:function(e){return e?e.map(function(e){return new h(e)}):[]}},{key:"hasPlan",value:function(){return this.plan instanceof a}},{key:"hasProfile",value:function(){return this.profile instanceof c}}]),i}(),a=function t(e){(0,o.default)(this,t),this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=e.children?e.children.map(function(e){return new t(e)}):[]},c=function(){function t(e){(0,o.default)(this,t),this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=b("dbHits",e),this.rows=b("rows",e),this.pageCacheMisses=b("pageCacheMisses",e),this.pageCacheHits=b("pageCacheHits",e),this.pageCacheHitRatio=b("pageCacheHitRatio",e),this.time=b("time",e),this.children=e.children?e.children.map(function(e){return new t(e)}):[]}return(0,s.default)(t,[{key:"hasPageCacheStats",value:function(){return 0<this.pageCacheMisses||0<this.pageCacheHits||0<this.pageCacheHitRatio}}]),t}(),l=function(){function e(r){var n=this;(0,o.default)(this,e),this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(e){var t=e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()});t in n._stats?n._stats[t]=p(r[e]):"systemUpdates"===t&&(n._systemUpdates=p(r[e]))}),this._stats=Object.freeze(this._stats)}return(0,s.default)(e,[{key:"containsUpdates",value:function(){var r=this;return 0<Object.keys(this._stats).reduce(function(e,t){return e+r._stats[t]},0)}},{key:"updates",value:function(){return this._stats}},{key:"containsSystemUpdates",value:function(){return 0<this._systemUpdates}},{key:"systemUpdates",value:function(){return this._systemUpdates}}]),e}(),h=function(){function t(e){(0,o.default)(this,t),this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=t._constructPosition(e.position)}return(0,s.default)(t,null,[{key:"_constructPosition",value:function(e){return e?{offset:p(e.offset),line:p(e.line),column:p(e.column)}:{}}}]),t}(),f=function e(t,r){(0,o.default)(this,e),t&&(this.address=t.address,this.version=t.version),this.protocolVersion=r};function p(e){return(0,i.isInt)(e)?e.toInt():e}function b(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(e in t){var n=t[e];return(0,i.isInt)(n)?n.toInt():n}return r}r.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};var d=u;r.default=d},{"./integer":234,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],292:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;function o(e){console.log("Uncaught error when processing result: "+e)}function c(e){}var s=n(e("@babel/runtime/helpers/classCallCheck")),u=n(e("@babel/runtime/helpers/createClass")),l=n(e("./result-summary")),a=e("./internal/connection-holder");e("./internal/stream-observers");var i=function(){function i(e,t,r,n){(0,s.default)(this,i),this._stack=function(){var e=new Error("");if(e.stack)return e.stack.replace(/^Error(\n\r)*/,"");return null}(),this._streamObserverPromise=e,this._p=null,this._query=t,this._parameters=r||{},this._connectionHolder=n||a.EMPTY_CONNECTION_HOLDER}return(0,u.default)(i,[{key:"keys",value:function(){var e=this;return new Promise(function(t,r){e._streamObserverPromise.then(function(e){return e.subscribe({onKeys:function(e){return t(e)},onError:function(e){return r(e)}})})})}},{key:"summary",value:function(){var e=this;return new Promise(function(t,r){e._streamObserverPromise.then(function(e){e.cancel(),e.subscribe({onCompleted:function(e){return t(e)},onError:function(e){return r(e)}})})})}},{key:"_getOrCreatePromise",value:function(){var i=this;return this._p||(this._p=new Promise(function(t,r){var n=[],e={onNext:function(e){n.push(e)},onCompleted:function(e){t({records:n,summary:e})},onError:function(e){r(e)}};i.subscribe(e)})),this._p}},{key:"then",value:function(e,t){return this._getOrCreatePromise().then(e,t)}},{key:"catch",value:function(e){return this._getOrCreatePromise().catch(e)}},{key:"subscribe",value:function(s){var u=this,a=s.onCompleted||c;s.onCompleted=function(t){var r=u._connectionHolder,n=u._query,i=u._parameters;function o(e){a.call(s,new l.default(n,i,t,e))}r.getConnection().then(function(e){r.releaseConnection().then(function(){return o(void 0!==e?e.protocol().version:void 0)})},function(e){o()})};var t=s.onError||o;s.onError=function(e){u._connectionHolder.releaseConnection().then(function(){!function(e,t){t&&(e.stack=e.toString()+"\n"+t)}(e,u._stack),t.call(s,e)})},this._streamObserverPromise.then(function(e){return e.subscribe(s)})}},{key:"_cancel",value:function(){this._streamObserverPromise.then(function(e){return e.cancel()})}}]),i}();r.default=i},{"./internal/connection-holder":256,"./internal/stream-observers":283,"./result-summary":291,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],293:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),c=n(e("@babel/runtime/helpers/getPrototypeOf")),o=n(e("@babel/runtime/helpers/inherits")),s=e("./driver"),l=(e("./error"),n(e("./internal/connection-provider-routing"))),h=(n(e("./internal/least-connected-load-balancing-strategy")),n(e("./internal/connection-error-handler")),n(e("./internal/resolver/configured-custom-resolver")));var f=function(e){function s(e,t,r){var n,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};return(0,u.default)(this,s),(n=(0,a.default)(this,(0,c.default)(s).call(this,e,r,i,function(e){var t=e.resolver;if(t&&"function"!=typeof t)throw new TypeError("Configured resolver should be a function. Got: ".concat(t));return e}(o))))._routingContext=t,n}return(0,o.default)(s,e),(0,i.default)(s,[{key:"_afterConstruction",value:function(){this._log.info("Routing driver ".concat(this._id," created for server address ").concat(this._address))}},{key:"_createConnectionProvider",value:function(e,t,r){return new l.default({id:this._id,address:e,routingContext:this._routingContext,hostNameResolver:function(e){return new h.default(e.resolver)}(this._config),config:this._config,log:this._log,userAgent:t,authToken:r})}},{key:"_supportsRouting",value:function(){return!0}}]),s}(s.Driver);r.default=f},{"./driver":230,"./error":231,"./internal/connection-error-handler":254,"./internal/connection-provider-routing":259,"./internal/least-connected-load-balancing-strategy":265,"./internal/resolver/configured-custom-resolver":276,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":19}],294:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("rxjs"),u=e("rxjs/operators"),a=n(e("./result-rx")),c=(n(e("./session")),n(e("./transaction-rx"))),l=e("./internal/constants"),h=n(e("./internal/tx-config")),f=n(e("./internal/retry-logic-rx")),p=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.session,r=e.config;(0,i.default)(this,n),this._session=t,this._retryLogic=function(e){var t=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new f.default({maxRetryTimeout:t})}(r)}return(0,o.default)(n,[{key:"run",value:function(e,r,n){var i=this;return new a.default(new s.Observable(function(t){try{t.next(i._session.run(e,r,n)),t.complete()}catch(e){t.error(e)}return function(){}}))}},{key:"beginTransaction",value:function(e){return this._beginTransaction(this._session._mode,e)}},{key:"readTransaction",value:function(e,t){return this._runTransaction(l.ACCESS_MODE_READ,e,t)}},{key:"writeTransaction",value:function(e,t){return this._runTransaction(l.ACCESS_MODE_WRITE,e,t)}},{key:"close",value:function(){var e=this;return new s.Observable(function(t){e._session.close().then(function(){t.complete()}).catch(function(e){return t.error(e)})})}},{key:"lastBookmark",value:function(){return this._session.lastBookmark()}},{key:"_beginTransaction",value:function(e,t){var r=this,n=h.default.empty();return t&&(n=new h.default(t)),new s.Observable(function(t){try{t.next(new c.default(r._session._beginTransaction(e,n))),t.complete()}catch(e){t.error(e)}return function(){}})}},{key:"_runTransaction",value:function(e,r,t){h.default.empty();return t&&new h.default(t),this._retryLogic.retry(this._beginTransaction(e,t).pipe((0,u.flatMap)(function(t){return(0,s.defer)(function(){try{return r(t)}catch(e){return(0,s.throwError)(e)}}).pipe((0,u.catchError)(function(e){return t.rollback().pipe((0,u.concat)((0,s.throwError)(e)))}),(0,u.concat)(t.commit()))})))}}]),n}();r.default=p},{"./internal/constants":264,"./internal/retry-logic-rx":277,"./internal/tx-config":286,"./result-rx":290,"./session":295,"./transaction-rx":298,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,rxjs:28,"rxjs/operators":227}],295:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),c=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),u=e("./internal/stream-observers"),l=n(e("./result")),h=n(e("./transaction")),f=e("./error"),p=e("./internal/util"),b=n(e("./internal/connection-holder")),d=n(e("./driver")),v=e("./internal/constants"),y=n(e("./internal/transaction-executor")),_=n(e("./internal/bookmark")),m=n(e("./internal/tx-config"));var a=function(){function a(e){var t=e.mode,r=e.connectionProvider,n=e.bookmark,i=e.database,o=e.config,s=e.reactive,u=e.fetchSize;(0,c.default)(this,a),this._mode=t,this._database=i,this._reactive=s,this._fetchSize=u,this._readConnectionHolder=new b.default({mode:v.ACCESS_MODE_READ,database:i,bookmark:n,connectionProvider:r}),this._writeConnectionHolder=new b.default({mode:v.ACCESS_MODE_WRITE,database:i,bookmark:n,connectionProvider:r}),this._open=!0,this._hasTx=!1,this._lastBookmark=n,this._transactionExecutor=function(e){var t=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new y.default(t)}(o),this._onComplete=this._onCompleteCallback.bind(this)}var e;return(0,s.default)(a,[{key:"run",value:function(e,t,r){var n=this,i=(0,p.validateQueryAndParameters)(e,t),o=i.validatedQuery,s=i.params,u=r?new m.default(r):m.default.empty();return this._run(o,s,function(e){return n._assertSessionIsOpen(),e.protocol().run(o,s,{bookmark:n._lastBookmark,txConfig:u,mode:n._mode,database:n._database,afterComplete:n._onComplete,reactive:n._reactive,fetchSize:n._fetchSize})})}},{key:"_run",value:function(e,t,r){var n,i=this._connectionHolderWithMode(this._mode);return n=this._open?!this._hasTx&&i.initializeConnection()?i.getConnection().then(function(e){return r(e)}).catch(function(e){return Promise.resolve(new u.FailedObserver({error:e}))}):Promise.resolve(new u.FailedObserver({error:(0,f.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):Promise.resolve(new u.FailedObserver({error:(0,f.newError)("Cannot run query in a closed session.")})),new l.default(n,e,t,i)}},{key:"beginTransaction",value:function(e){var t=e,r=m.default.empty();return t&&(r=new m.default(t)),this._beginTransaction(this._mode,r)}},{key:"_beginTransaction",value:function(e,t){if(!this._open)throw(0,f.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,f.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var r=d.default._validateSessionMode(e),n=this._connectionHolderWithMode(r);n.initializeConnection(),this._hasTx=!0;var i=new h.default({connectionHolder:n,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return i._begin(this._lastBookmark,t),i}},{key:"_assertSessionIsOpen",value:function(){if(!this._open)throw(0,f.newError)("You cannot run more transactions on a closed session.")}},{key:"_transactionClosed",value:function(){this._hasTx=!1}},{key:"lastBookmark",value:function(){return this._lastBookmark.values()}},{key:"readTransaction",value:function(e,t){var r=new m.default(t);return this._runTransaction(v.ACCESS_MODE_READ,r,e)}},{key:"writeTransaction",value:function(e,t){var r=new m.default(t);return this._runTransaction(v.ACCESS_MODE_WRITE,r,e)}},{key:"_runTransaction",value:function(e,t,r){var n=this;return this._transactionExecutor.execute(function(){return n._beginTransaction(e,t)},r)}},{key:"_updateBookmark",value:function(e){e&&!e.isEmpty()&&(this._lastBookmark=e)}},{key:"close",value:(e=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._open)return this._open=!1,this._transactionExecutor.close(),e.next=5,this._readConnectionHolder.close();e.next=7;break;case 5:return e.next=7,this._writeConnectionHolder.close();case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_connectionHolderWithMode",value:function(e){if(e===v.ACCESS_MODE_READ)return this._readConnectionHolder;if(e===v.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,f.newError)("Unknown access mode: "+e)}},{key:"_onCompleteCallback",value:function(e){this._updateBookmark(new _.default(e.bookmark))}}]),a}();r.default=a},{"./driver":230,"./error":231,"./internal/bookmark":242,"./internal/connection-holder":256,"./internal/constants":264,"./internal/stream-observers":283,"./internal/transaction-executor":285,"./internal/tx-config":286,"./internal/util":288,"./result":292,"./transaction":299,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":27}],296:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.isPoint=function(e){return!0===(e&&e[i])},r.Point=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),u=e("./internal/util"),i="__isPoint__",a=function(){function i(e,t,r,n){(0,o.default)(this,i),this.srid=(0,u.assertNumberOrInteger)(e,"SRID"),this.x=(0,u.assertNumber)(t,"X coordinate"),this.y=(0,u.assertNumber)(r,"Y coordinate"),this.z=null==n?n:(0,u.assertNumber)(n,"Z coordinate"),Object.freeze(this)}return(0,s.default)(i,[{key:"toString",value:function(){return this.z||0===this.z?"Point{srid=".concat(c(this.srid),", x=").concat(c(this.x),", y=").concat(c(this.y),", z=").concat(c(this.z),"}"):"Point{srid=".concat(c(this.srid),", x=").concat(c(this.x),", y=").concat(c(this.y),"}")}}]),i}();function c(e){return Number.isInteger(e)?e+".0":e.toString()}r.Point=a,Object.defineProperty(a.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1})},{"./internal/util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],297:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.isDuration=function(e){return k(e,u)},r.isLocalTime=function(e){return k(e,a)},r.isTime=function(e){return k(e,c)},r.isDate=function(e){return k(e,l)},r.isLocalDateTime=function(e){return k(e,h)},r.isDateTime=function(e){return k(e,f)},r.DateTime=r.LocalDateTime=r.Date=r.Time=r.LocalTime=r.Duration=void 0;var b=i(e("@babel/runtime/helpers/slicedToArray")),d=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),v=n(e("./internal/temporal-util")),y=e("./internal/util"),_=e("./error"),o={value:!0,enumerable:!1,configurable:!1,writable:!1},u="__isDuration__",a="__isLocalTime__",c="__isTime__",l="__isDate__",h="__isLocalDateTime__",f="__isDateTime__",p=function(){function i(e,t,r,n){(0,d.default)(this,i),this.months=(0,y.assertNumberOrInteger)(e,"Months"),this.days=(0,y.assertNumberOrInteger)(t,"Days"),(0,y.assertNumberOrInteger)(r,"Seconds"),(0,y.assertNumberOrInteger)(n,"Nanoseconds"),this.seconds=v.normalizeSecondsForDuration(r,n),this.nanoseconds=v.normalizeNanosecondsForDuration(n),Object.freeze(this)}return(0,s.default)(i,[{key:"toString",value:function(){return v.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)}}]),i}();r.Duration=p,Object.defineProperty(p.prototype,u,o);var m=function(){function i(e,t,r,n){(0,d.default)(this,i),this.hour=v.assertValidHour(e),this.minute=v.assertValidMinute(t),this.second=v.assertValidSecond(r),this.nanosecond=v.assertValidNanosecond(n),Object.freeze(this)}return(0,s.default)(i,[{key:"toString",value:function(){return v.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)}}],[{key:"fromStandardDate",value:function(e,t){return C(e,t),new i(e.getHours(),e.getMinutes(),e.getSeconds(),v.totalNanoseconds(e,t))}}]),i}();r.LocalTime=m,Object.defineProperty(m.prototype,a,o);var g=function(){function o(e,t,r,n,i){(0,d.default)(this,o),this.hour=v.assertValidHour(e),this.minute=v.assertValidMinute(t),this.second=v.assertValidSecond(r),this.nanosecond=v.assertValidNanosecond(n),this.timeZoneOffsetSeconds=(0,y.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return(0,s.default)(o,[{key:"toString",value:function(){return v.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+v.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)}}],[{key:"fromStandardDate",value:function(e,t){return C(e,t),new o(e.getHours(),e.getMinutes(),e.getSeconds(),v.totalNanoseconds(e,t),v.timeZoneOffsetInSeconds(e))}}]),o}();r.Time=g,Object.defineProperty(g.prototype,c,o);var w=function(){function n(e,t,r){(0,d.default)(this,n),this.year=v.assertValidYear(e),this.month=v.assertValidMonth(t),this.day=v.assertValidDay(r),Object.freeze(this)}return(0,s.default)(n,[{key:"toString",value:function(){return v.dateToIsoString(this.year,this.month,this.day)}}],[{key:"fromStandardDate",value:function(e){return C(e,null),new n(e.getFullYear(),e.getMonth()+1,e.getDate())}}]),n}();r.Date=w,Object.defineProperty(w.prototype,l,o);var O=function(){function u(e,t,r,n,i,o,s){(0,d.default)(this,u),this.year=v.assertValidYear(e),this.month=v.assertValidMonth(t),this.day=v.assertValidDay(r),this.hour=v.assertValidHour(n),this.minute=v.assertValidMinute(i),this.second=v.assertValidSecond(o),this.nanosecond=v.assertValidNanosecond(s),Object.freeze(this)}return(0,s.default)(u,[{key:"toString",value:function(){return E(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)}}],[{key:"fromStandardDate",value:function(e,t){return C(e,t),new u(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),v.totalNanoseconds(e,t))}}]),u}();r.LocalDateTime=O,Object.defineProperty(O.prototype,h,o);var S=function(){function p(e,t,r,n,i,o,s,u,a){(0,d.default)(this,p),this.year=v.assertValidYear(e),this.month=v.assertValidMonth(t),this.day=v.assertValidDay(r),this.hour=v.assertValidHour(n),this.minute=v.assertValidMinute(i),this.second=v.assertValidSecond(o),this.nanosecond=v.assertValidNanosecond(s);var c=function(e,t){var r=e||0===e,n=t&&""!==t;{if(r&&!n)return(0,y.assertNumberOrInteger)(e,"Time zone offset in seconds"),[e,null];if(!r&&n)return(0,y.assertString)(t,"Time zone ID"),[null,t];throw r&&n?(0,_.newError)("Unable to create DateTime with both time zone offset and id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(t)):(0,_.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(t))}}(u,a),l=(0,b.default)(c,2),h=l[0],f=l[1];this.timeZoneOffsetSeconds=h,this.timeZoneId=f,Object.freeze(this)}return(0,s.default)(p,[{key:"toString",value:function(){return E(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneId?"[".concat(this.timeZoneId,"]"):v.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds))}}],[{key:"fromStandardDate",value:function(e,t){return C(e,t),new p(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),v.totalNanoseconds(e,t),v.timeZoneOffsetInSeconds(e),null)}}]),p}();function k(e,t){return!0===(e&&e[t])}function E(e,t,r,n,i,o,s){return v.dateToIsoString(e,t,r)+"T"+v.timeToIsoString(n,i,o,s)}function C(e,t){(0,y.assertValidDate)(e,"Standard date"),null!=t&&(0,y.assertNumberOrInteger)(t,"Nanosecond")}r.DateTime=S,Object.defineProperty(S.prototype,f,o)},{"./error":231,"./internal/temporal-util":284,"./internal/util":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/slicedToArray":21}],298:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("rxjs"),u=n(e("./result-rx")),a=(n(e("./transaction")),function(){function t(e){(0,i.default)(this,t),this._txc=e}return(0,o.default)(t,[{key:"run",value:function(e,r){var n=this;return new u.default(new s.Observable(function(t){try{t.next(n._txc.run(e,r)),t.complete()}catch(e){t.error(e)}return function(){}}))}},{key:"commit",value:function(){var e=this;return new s.Observable(function(t){e._txc.commit().then(function(){t.complete()}).catch(function(e){return t.error(e)})})}},{key:"rollback",value:function(){var e=this;return new s.Observable(function(t){e._txc.rollback().then(function(){t.complete()}).catch(function(e){return t.error(e)})})}}]),t}());r.default=a},{"./result-rx":290,"./transaction":299,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,rxjs:28}],299:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),u=i(e("./result")),s=e("./internal/util"),c=n(e("./internal/connection-holder")),l=i(e("./internal/connection-holder-readonly")),h=i(e("./internal/bookmark")),f=i(e("./internal/tx-config")),p=e("./internal/stream-observers"),b=e("./error"),d=function(){function u(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmark,i=e.onConnection,o=e.reactive,s=e.fetchSize;(0,a.default)(this,u),this._connectionHolder=t,this._reactive=o,this._state=v.ACTIVE,this._onClose=r,this._onBookmark=n,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=s,this._results=[]}return(0,o.default)(u,[{key:"_begin",value:function(t,r){var n=this;this._connectionHolder.getConnection().then(function(e){return n._onConnection(),e.protocol().beginTransaction({bookmark:t,txConfig:r,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),beforeError:n._onError,afterComplete:n._onComplete})}).catch(function(e){return n._onError(e)})}},{key:"run",value:function(e,t){var r=(0,s.validateQueryAndParameters)(e,t),n=r.validatedQuery,i=r.params,o=this._state.run(n,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(o),o}},{key:"commit",value:function(){var r=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})}},{key:"rollback",value:function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})}},{key:"isOpen",value:function(){return this._state===v.ACTIVE}},{key:"_onErrorCallback",value:function(e){return this._state=v.FAILED,this._onClose(),this._connectionHolder.releaseConnection()}},{key:"_onCompleteCallback",value:function(e){this._onBookmark(new h.default(e.bookmark))}}]),u}(),v={ACTIVE:{commit:function(e){return{result:y(!0,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults),state:v.SUCCEEDED}},rollback:function(e){return{result:y(!1,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults),state:v.ROLLED_BACK}},run:function(t,r,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete,s=e.onConnection,u=e.reactive,a=e.fetchSize;return _(n.getConnection().then(function(e){return s(),e.protocol().run(t,r,{bookmark:h.default.empty(),txConfig:f.default.empty(),beforeError:i,afterComplete:o,reactive:u,fetchSize:a})}).catch(function(e){return new p.FailedObserver({error:e,onError:i})}),t,r,n)}},FAILED:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:_(new p.FailedObserver({error:(0,b.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),"COMMIT",{},t),state:v.FAILED}},rollback:function(e){var t=e.connectionHolder;e.onError,e.onComplete;return{result:_(new p.CompletedObserver,"ROLLBACK",{},t),state:v.FAILED}},run:function(e,t,r){var n=r.connectionHolder,i=r.onError;r.onComplete;return _(new p.FailedObserver({error:(0,b.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),e,t,n)}},SUCCEEDED:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:_(new p.FailedObserver({error:(0,b.newError)("Cannot commit this transaction, because it has already been committed."),onError:r}),"COMMIT",{}),state:v.SUCCEEDED,connectionHolder:t}},rollback:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:_(new p.FailedObserver({error:(0,b.newError)("Cannot rollback this transaction, because it has already been committed."),onError:r}),"ROLLBACK",{}),state:v.SUCCEEDED,connectionHolder:t}},run:function(e,t,r){var n=r.connectionHolder,i=r.onError;r.onComplete;return _(new p.FailedObserver({error:(0,b.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),e,t,n)}},ROLLED_BACK:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:_(new p.FailedObserver({error:(0,b.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:r}),"COMMIT",{},t),state:v.ROLLED_BACK}},rollback:function(e){var t=e.connectionHolder;e.onError,e.onComplete;return{result:_(new p.FailedObserver({error:(0,b.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t),state:v.ROLLED_BACK}},run:function(e,t,r){var n=r.connectionHolder,i=r.onError;r.onComplete;return _(new p.FailedObserver({error:(0,b.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),e,t,n)}}};function y(r,e,n,i,o,s){var t=e.getConnection().then(function(t){return o(),s.forEach(function(e){return e._cancel()}),Promise.all(s).then(function(e){return r?t.protocol().commitTransaction({beforeError:n,afterComplete:i}):t.protocol().rollbackTransaction({beforeError:n,afterComplete:i})})}).catch(function(e){return new p.FailedObserver({error:e,onError:n})});return new u.default(t,r?"COMMIT":"ROLLBACK",{},e)}function _(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:c.EMPTY_CONNECTION_HOLDER;return new u.default(Promise.resolve(e),t,r,new l.default(n||c.EMPTY_CONNECTION_HOLDER))}var m=d;r.default=m},{"./error":231,"./internal/bookmark":242,"./internal/connection-holder":256,"./internal/connection-holder-readonly":255,"./internal/stream-observers":283,"./internal/tx-config":286,"./internal/util":288,"./result":292,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13}],300:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="4.2.3"},{}]},{},[233])(233)});